<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>后端开发手册 | Togest Developers</title>
    <meta name="generator" content="VuePress 1.4.1">
    <link rel="apple-touch-icon" href="/vuepress-demo/apple-touch-icon.png">
    <link rel="icon" href="/vuepress-demo/favicon-32x32.png">
    <link rel="manifest" href="/vuepress-demo/manifest.json">
    <meta name="description" content="Build anything with this platform">
    <meta name="theme-color" content="#ccc">
    <link rel="preload" href="/vuepress-demo/assets/css/0.styles.047fe543.css" as="style"><link rel="preload" href="/vuepress-demo/assets/js/app.6ff1fa3b.js" as="script"><link rel="preload" href="/vuepress-demo/assets/js/6.152a5810.js" as="script"><link rel="preload" href="/vuepress-demo/assets/js/4.6682682e.js" as="script"><link rel="preload" href="/vuepress-demo/assets/js/14.e8e09540.js" as="script"><link rel="prefetch" href="/vuepress-demo/assets/js/10.aa4a63ac.js"><link rel="prefetch" href="/vuepress-demo/assets/js/11.0ec59a50.js"><link rel="prefetch" href="/vuepress-demo/assets/js/12.e85ae7d6.js"><link rel="prefetch" href="/vuepress-demo/assets/js/13.8746a8f6.js"><link rel="prefetch" href="/vuepress-demo/assets/js/15.a641b4e6.js"><link rel="prefetch" href="/vuepress-demo/assets/js/16.9ef92df0.js"><link rel="prefetch" href="/vuepress-demo/assets/js/17.841055a7.js"><link rel="prefetch" href="/vuepress-demo/assets/js/18.16d6e0be.js"><link rel="prefetch" href="/vuepress-demo/assets/js/19.bbc7060f.js"><link rel="prefetch" href="/vuepress-demo/assets/js/20.6394a851.js"><link rel="prefetch" href="/vuepress-demo/assets/js/21.5c398e52.js"><link rel="prefetch" href="/vuepress-demo/assets/js/22.7558b2d5.js"><link rel="prefetch" href="/vuepress-demo/assets/js/23.9e96b8b3.js"><link rel="prefetch" href="/vuepress-demo/assets/js/24.7ed69077.js"><link rel="prefetch" href="/vuepress-demo/assets/js/25.15ac255c.js"><link rel="prefetch" href="/vuepress-demo/assets/js/26.9e26aeb8.js"><link rel="prefetch" href="/vuepress-demo/assets/js/27.c9ced5b8.js"><link rel="prefetch" href="/vuepress-demo/assets/js/28.ebc60c17.js"><link rel="prefetch" href="/vuepress-demo/assets/js/29.0c709edd.js"><link rel="prefetch" href="/vuepress-demo/assets/js/30.1436fce2.js"><link rel="prefetch" href="/vuepress-demo/assets/js/31.9dec51b1.js"><link rel="prefetch" href="/vuepress-demo/assets/js/32.dbf5fd4e.js"><link rel="prefetch" href="/vuepress-demo/assets/js/33.ba02bdae.js"><link rel="prefetch" href="/vuepress-demo/assets/js/34.7b80876c.js"><link rel="prefetch" href="/vuepress-demo/assets/js/35.dcc449b5.js"><link rel="prefetch" href="/vuepress-demo/assets/js/36.37b08220.js"><link rel="prefetch" href="/vuepress-demo/assets/js/37.f0cb5fc6.js"><link rel="prefetch" href="/vuepress-demo/assets/js/38.65d229f2.js"><link rel="prefetch" href="/vuepress-demo/assets/js/39.3553c045.js"><link rel="prefetch" href="/vuepress-demo/assets/js/40.a4d40771.js"><link rel="prefetch" href="/vuepress-demo/assets/js/41.5cd6d47d.js"><link rel="prefetch" href="/vuepress-demo/assets/js/42.a94895a4.js"><link rel="prefetch" href="/vuepress-demo/assets/js/43.e699c204.js"><link rel="prefetch" href="/vuepress-demo/assets/js/44.c4da3988.js"><link rel="prefetch" href="/vuepress-demo/assets/js/45.9275e300.js"><link rel="prefetch" href="/vuepress-demo/assets/js/46.054911f4.js"><link rel="prefetch" href="/vuepress-demo/assets/js/47.323187ae.js"><link rel="prefetch" href="/vuepress-demo/assets/js/48.34887195.js"><link rel="prefetch" href="/vuepress-demo/assets/js/49.eed07655.js"><link rel="prefetch" href="/vuepress-demo/assets/js/5.48afd350.js"><link rel="prefetch" href="/vuepress-demo/assets/js/50.d6a06f22.js"><link rel="prefetch" href="/vuepress-demo/assets/js/51.4761fc4f.js"><link rel="prefetch" href="/vuepress-demo/assets/js/52.d045680c.js"><link rel="prefetch" href="/vuepress-demo/assets/js/53.94e46704.js"><link rel="prefetch" href="/vuepress-demo/assets/js/54.a4057e4c.js"><link rel="prefetch" href="/vuepress-demo/assets/js/55.0776dcf9.js"><link rel="prefetch" href="/vuepress-demo/assets/js/56.6e2f0b5f.js"><link rel="prefetch" href="/vuepress-demo/assets/js/57.1dcfdf1a.js"><link rel="prefetch" href="/vuepress-demo/assets/js/58.ca56fa25.js"><link rel="prefetch" href="/vuepress-demo/assets/js/59.0d604a4d.js"><link rel="prefetch" href="/vuepress-demo/assets/js/60.0495004e.js"><link rel="prefetch" href="/vuepress-demo/assets/js/61.122b5c16.js"><link rel="prefetch" href="/vuepress-demo/assets/js/62.aa57bb49.js"><link rel="prefetch" href="/vuepress-demo/assets/js/63.390f7033.js"><link rel="prefetch" href="/vuepress-demo/assets/js/64.a12ddde9.js"><link rel="prefetch" href="/vuepress-demo/assets/js/65.92405012.js"><link rel="prefetch" href="/vuepress-demo/assets/js/66.751da255.js"><link rel="prefetch" href="/vuepress-demo/assets/js/67.029d981e.js"><link rel="prefetch" href="/vuepress-demo/assets/js/68.b64ddcde.js"><link rel="prefetch" href="/vuepress-demo/assets/js/69.a80aab4b.js"><link rel="prefetch" href="/vuepress-demo/assets/js/7.a3e34f3b.js"><link rel="prefetch" href="/vuepress-demo/assets/js/70.d95c0107.js"><link rel="prefetch" href="/vuepress-demo/assets/js/71.ff126eda.js"><link rel="prefetch" href="/vuepress-demo/assets/js/72.1301978d.js"><link rel="prefetch" href="/vuepress-demo/assets/js/73.ca9ec92b.js"><link rel="prefetch" href="/vuepress-demo/assets/js/74.5da175a6.js"><link rel="prefetch" href="/vuepress-demo/assets/js/75.cb393d42.js"><link rel="prefetch" href="/vuepress-demo/assets/js/76.fb9d5d9a.js"><link rel="prefetch" href="/vuepress-demo/assets/js/77.db843647.js"><link rel="prefetch" href="/vuepress-demo/assets/js/78.b6b16326.js"><link rel="prefetch" href="/vuepress-demo/assets/js/79.bc1ddd84.js"><link rel="prefetch" href="/vuepress-demo/assets/js/8.d02f1fc7.js"><link rel="prefetch" href="/vuepress-demo/assets/js/80.66f6186e.js"><link rel="prefetch" href="/vuepress-demo/assets/js/81.a581fc76.js"><link rel="prefetch" href="/vuepress-demo/assets/js/9.eaa86139.js"><link rel="prefetch" href="/vuepress-demo/assets/js/vendors~docsearch.e7a741ae.js"><link rel="prefetch" href="/vuepress-demo/assets/js/vendors~flowchart.00d94768.js">
    <link rel="stylesheet" href="/vuepress-demo/assets/css/0.styles.047fe543.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/vuepress-demo/" class="home-link router-link-active"><!----> <span class="site-name">Togest Developers</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/vuepress-demo/guide/" class="nav-link">
  指南
</a></div><div class="nav-item"><a href="/vuepress-demo/web-application/" class="nav-link">
  前端
</a></div><div class="nav-item"><a href="/vuepress-demo/data-service/" class="nav-link router-link-active">
  后端
</a></div><div class="nav-item"><a href="/vuepress-demo/flow-engine/" class="nav-link">
  流程
</a></div><div class="nav-item"><a href="/vuepress-demo/business-intelligence/" class="nav-link">
  大屏
</a></div><div class="nav-item"><a href="/vuepress-demo/dev-tools/" class="nav-link">
  工具
</a></div><div class="nav-item"><a href="/vuepress-demo/contribute/" class="nav-link">
  贡献
</a></div> <a href="https://github.com/kromaLee/vuepress-demo" target="_blank" rel="noopener noreferrer" class="repo-link">
    源码
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/vuepress-demo/guide/" class="nav-link">
  指南
</a></div><div class="nav-item"><a href="/vuepress-demo/web-application/" class="nav-link">
  前端
</a></div><div class="nav-item"><a href="/vuepress-demo/data-service/" class="nav-link router-link-active">
  后端
</a></div><div class="nav-item"><a href="/vuepress-demo/flow-engine/" class="nav-link">
  流程
</a></div><div class="nav-item"><a href="/vuepress-demo/business-intelligence/" class="nav-link">
  大屏
</a></div><div class="nav-item"><a href="/vuepress-demo/dev-tools/" class="nav-link">
  工具
</a></div><div class="nav-item"><a href="/vuepress-demo/contribute/" class="nav-link">
  贡献
</a></div> <a href="https://github.com/kromaLee/vuepress-demo" target="_blank" rel="noopener noreferrer" class="repo-link">
    源码
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><a href="/vuepress-demo/data-service/" class="sidebar-link">后端文档</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/vuepress-demo/data-service/#概述" class="sidebar-link">概述</a></li><li class="sidebar-sub-header"><a href="/vuepress-demo/data-service/#分类" class="sidebar-link">分类</a></li></ul></li><li><a href="/vuepress-demo/data-service/sc.html" class="active sidebar-link">后端开发手册</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/vuepress-demo/data-service/sc.html#_1-emis8000-系统" class="sidebar-link">1.EMIS8000 系统</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/vuepress-demo/data-service/sc.html#_1-1-系统架构" class="sidebar-link">1.1 系统架构</a></li><li class="sidebar-sub-header"><a href="/vuepress-demo/data-service/sc.html#_1-2-软件环境" class="sidebar-link">1.2 软件环境</a></li></ul></li><li class="sidebar-sub-header"><a href="/vuepress-demo/data-service/sc.html#_2-平台支撑" class="sidebar-link">2.平台支撑</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/vuepress-demo/data-service/sc.html#_2-1-元数据" class="sidebar-link">2.1 元数据</a></li><li class="sidebar-sub-header"><a href="/vuepress-demo/data-service/sc.html#_2-2-crud" class="sidebar-link">2.2 CRUD</a></li><li class="sidebar-sub-header"><a href="/vuepress-demo/data-service/sc.html#_2-3-聚合" class="sidebar-link">2.3 聚合</a></li><li class="sidebar-sub-header"><a href="/vuepress-demo/data-service/sc.html#_2-4-导入导出" class="sidebar-link">2.4 导入导出</a></li><li class="sidebar-sub-header"><a href="/vuepress-demo/data-service/sc.html#_2-5-缓存" class="sidebar-link">2.5 缓存</a></li><li class="sidebar-sub-header"><a href="/vuepress-demo/data-service/sc.html#_2-6-权限及相关注解" class="sidebar-link">2.6 权限及相关注解</a></li><li class="sidebar-sub-header"><a href="/vuepress-demo/data-service/sc.html#_2-7-流程引擎" class="sidebar-link">2.7 流程引擎</a></li><li class="sidebar-sub-header"><a href="/vuepress-demo/data-service/sc.html#_2-8-消息服务" class="sidebar-link">2.8 消息服务</a></li><li class="sidebar-sub-header"><a href="/vuepress-demo/data-service/sc.html#_2-9-痕迹分析" class="sidebar-link">2.9 痕迹分析</a></li><li class="sidebar-sub-header"><a href="/vuepress-demo/data-service/sc.html#_2-10-代码生成器" class="sidebar-link">2.10 代码生成器</a></li><li class="sidebar-sub-header"><a href="/vuepress-demo/data-service/sc.html#_2-11-常用工具" class="sidebar-link">2.11 常用工具</a></li><li class="sidebar-sub-header"><a href="/vuepress-demo/data-service/sc.html#_2-12-日志使用" class="sidebar-link">2.12 日志使用</a></li></ul></li><li class="sidebar-sub-header"><a href="/vuepress-demo/data-service/sc.html#_3-平台服务" class="sidebar-link">3.平台服务</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/vuepress-demo/data-service/sc.html#_3-1-注册服务" class="sidebar-link">3.1 注册服务</a></li><li class="sidebar-sub-header"><a href="/vuepress-demo/data-service/sc.html#_3-2-网关" class="sidebar-link">3.2 网关</a></li><li class="sidebar-sub-header"><a href="/vuepress-demo/data-service/sc.html#_3-3-监控服务" class="sidebar-link">3.3 监控服务</a></li><li class="sidebar-sub-header"><a href="/vuepress-demo/data-service/sc.html#_3-4-配置管理" class="sidebar-link">3.4 配置管理</a></li><li class="sidebar-sub-header"><a href="/vuepress-demo/data-service/sc.html#_3-5-字典" class="sidebar-link">3.5 字典</a></li><li class="sidebar-sub-header"><a href="/vuepress-demo/data-service/sc.html#_3-6-元数据" class="sidebar-link">3.6 元数据</a></li><li class="sidebar-sub-header"><a href="/vuepress-demo/data-service/sc.html#_3-7-文件" class="sidebar-link">3.7 文件</a></li><li class="sidebar-sub-header"><a href="/vuepress-demo/data-service/sc.html#_3-8-cms" class="sidebar-link">3.8 CMS</a></li><li class="sidebar-sub-header"><a href="/vuepress-demo/data-service/sc.html#_3-9-业务基础" class="sidebar-link">3.9 业务基础</a></li><li class="sidebar-sub-header"><a href="/vuepress-demo/data-service/sc.html#_3-10-消息推送" class="sidebar-link">3.10 消息推送</a></li><li class="sidebar-sub-header"><a href="/vuepress-demo/data-service/sc.html#_3-11-定时任务" class="sidebar-link">3.11 定时任务</a></li></ul></li><li class="sidebar-sub-header"><a href="/vuepress-demo/data-service/sc.html#_4-编码规范" class="sidebar-link">4.编码规范</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/vuepress-demo/data-service/sc.html#_4-1-命名风格" class="sidebar-link">4.1 命名风格</a></li><li class="sidebar-sub-header"><a href="/vuepress-demo/data-service/sc.html#_4-2-常量定义" class="sidebar-link">4.2 常量定义</a></li><li class="sidebar-sub-header"><a href="/vuepress-demo/data-service/sc.html#_4-3-代码格式" class="sidebar-link">4.3 代码格式</a></li><li class="sidebar-sub-header"><a href="/vuepress-demo/data-service/sc.html#_4-4-oop-规约" class="sidebar-link">4.4 OOP 规约</a></li><li class="sidebar-sub-header"><a href="/vuepress-demo/data-service/sc.html#_4-5-集合使用" class="sidebar-link">4.5 集合使用</a></li><li class="sidebar-sub-header"><a href="/vuepress-demo/data-service/sc.html#_4-6-日志使用" class="sidebar-link">4.6 日志使用</a></li><li class="sidebar-sub-header"><a href="/vuepress-demo/data-service/sc.html#_4-7-异常处理" class="sidebar-link">4.7 异常处理</a></li><li class="sidebar-sub-header"><a href="/vuepress-demo/data-service/sc.html#_4-8-数据库" class="sidebar-link">4.8 数据库</a></li></ul></li></ul></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="后端开发手册"><a href="#后端开发手册" class="header-anchor">#</a> 后端开发手册</h1> <p></p><div class="table-of-contents"><ul><li><a href="#_1-emis8000-系统">1.EMIS8000 系统</a><ul><li><a href="#_1-1-系统架构">1.1 系统架构</a></li><li><a href="#_1-2-软件环境">1.2 软件环境</a></li></ul></li><li><a href="#_2-平台支撑">2.平台支撑</a><ul><li><a href="#_2-1-元数据">2.1 元数据</a></li><li><a href="#_2-2-crud">2.2 CRUD</a><ul><li><a href="#_2-2-1-togest-domain">2.2.1 togest-domain</a></li><li><a href="#_2-2-2-togest-persist">2.2.2 togest-persist</a></li><li><a href="#_2-2-3-togest-cms-crud">2.2.3 togest-cms-crud</a></li><li><a href="#_2-2-4-togest-cms-crud-web">2.2.4 togest-cms-crud-web</a></li></ul></li><li><a href="#_2-3-聚合">2.3 聚合</a><ul><li><a href="#_2-3-1-聚合表达式配置">2.3.1 聚合表达式配置</a></li><li><a href="#_2-3-2-聚合工具接口">2.3.2 聚合工具接口</a></li><li><a href="#_2-3-3-字典配置">2.3.3 字典配置</a></li><li><a href="#_2-4-2-字典工具">2.4.2 字典工具</a></li></ul></li><li><a href="#_2-4-导入导出">2.4 导入导出</a><ul><li><a href="#_2-4-1-数据模型">2.4 .1 数据模型</a></li><li><a href="#_2-4-2-导入">2.4 .2 导入</a></li><li><a href="#_2-4-3-导出">2.4 .3 导出</a></li></ul></li><li><a href="#_2-5-缓存">2.5 缓存</a><ul><li><a href="#_2-5-1-缓存注解">2.5.1 缓存注解</a></li><li><a href="#_2-5-2-缓存-api">2.5.2 缓存 API</a></li><li><a href="#_2-5-3-缓存防并发">2.5.3 缓存防并发</a></li><li><a href="#_2-5-4-单据号">2.5.4 单据号</a></li></ul></li><li><a href="#_2-6-权限及相关注解">2.6 权限及相关注解</a><ul><li><a href="#_2-6-1-userdatascope">2.6.1 UserDataScope</a></li><li><a href="#_2-6-2-datacontrolsectionput">2.6.2 DataControlSectionPut</a></li><li><a href="#_2-6-3-deletedataput">2.6.3 DeleteDataPut</a></li><li><a href="#_2-6-4-adddataput">2.6.4 AddDataPut</a></li><li><a href="#_2-6-5-框架使用">2.6.5 框架使用</a></li></ul></li><li><a href="#_2-7-流程引擎">2.7 流程引擎</a><ul><li><a href="#_2-7-1-引擎设计">2.7.1 引擎设计</a></li><li><a href="#_2-7-2-api-介绍">2.7.2 API 介绍</a><ul><li><a href="#_2-7-2-1-流程引擎核心">2.7.2.1 流程引擎核心</a></li><li><a href="#_2-7-2-2-restful-api">2.7.2.2 restful API</a></li><li><a href="#_2-7-2-3-流程事件">2.7.2.3 流程事件</a></li><li><a href="#_2-7-2-4-流程与业务">2.7.2.4 流程与业务</a></li><li><a href="#_2-7-2-5-流程事件自定义">2.7.2.5 流程事件自定义</a></li><li><a href="#_2-7-2-6-业务办理提交扩展">2.7.2.6 业务办理提交扩展</a></li><li><a href="#_2-7-2-7-业务事件升级">2.7.2.7 业务事件升级</a></li></ul></li><li><a href="#_2-7-3-流程定义配置">2.7.3 流程定义配置</a><ul><li><a href="#_2-7-3-1-流程定义">2.7.3.1 流程定义</a></li><li><a href="#_2-7-3-2-节点定义">2.7.3.2 节点定义</a></li><li><a href="#_2-7-3-3-节点权限配置">2.7.3.3 节点权限配置</a></li></ul></li></ul></li><li><a href="#_2-8-消息服务">2.8 消息服务</a><ul><li><a href="#_2-8-1-mq-三种消息模式">2.8.1 MQ 三种消息模式</a><ul><li><a href="#fanout-模式">Fanout 模式</a></li><li><a href="#direct-模式">Direct 模式</a></li><li><a href="#topic-模式">Topic 模式</a></li></ul></li><li><a href="#_2-8-2-api">2.8.2 API</a><ul><li><a href="#事件发布-eventpublisherservice">事件发布(EventPublisherService)</a></li><li><a href="#事件订阅-eventsubscriberservice">事件订阅(EventSubscriberService)</a></li></ul></li></ul></li><li><a href="#_2-9-痕迹分析">2.9 痕迹分析</a><ul><li><a href="#_2-9-1-数据表">2.9.1 数据表</a></li><li><a href="#_2-9-2-注解">2.9.2 注解</a></li><li><a href="#_2-9-3-配置">2.9.3 配置</a></li><li><a href="#_2-9-4-restful-api">2.9.4 restful api</a></li><li><a href="#_2-9-5-框架使用">2.9.5 框架使用</a></li></ul></li><li><a href="#_2-10-代码生成器">2.10 代码生成器</a></li><li><a href="#_2-11-常用工具">2.11 常用工具</a><ul><li><a href="#_2-11-1-校验">2.11.1 校验</a></li><li><a href="#_2-11-2-日期">2.11.2 日期</a></li><li><a href="#_2-11-3-集合处理">2.11.3 集合处理</a></li><li><a href="#_2-11-4-连续空值处理">2.11.4 连续空值处理</a></li></ul></li><li><a href="#_2-12-日志使用">2.12 日志使用</a></li></ul></li><li><a href="#_3-平台服务">3.平台服务</a><ul><li><a href="#_3-1-注册服务">3.1 注册服务</a></li><li><a href="#_3-2-网关">3.2 网关</a></li><li><a href="#_3-3-监控服务">3.3 监控服务</a></li><li><a href="#_3-4-配置管理">3.4 配置管理</a></li><li><a href="#_3-5-字典">3.5 字典</a></li><li><a href="#_3-6-元数据">3.6 元数据</a></li><li><a href="#_3-7-文件">3.7 文件</a></li><li><a href="#_3-8-cms">3.8 CMS</a></li><li><a href="#_3-9-业务基础">3.9 业务基础</a></li><li><a href="#_3-10-消息推送">3.10 消息推送</a></li><li><a href="#_3-11-定时任务">3.11 定时任务</a></li></ul></li><li><a href="#_4-编码规范">4.编码规范</a><ul><li><a href="#_4-1-命名风格">4.1 命名风格</a></li><li><a href="#_4-2-常量定义">4.2 常量定义</a></li><li><a href="#_4-3-代码格式">4.3 代码格式</a></li><li><a href="#_4-4-oop-规约">4.4 OOP 规约</a></li><li><a href="#_4-5-集合使用">4.5 集合使用</a></li><li><a href="#_4-6-日志使用">4.6 日志使用</a></li><li><a href="#_4-7-异常处理">4.7 异常处理</a></li><li><a href="#_4-8-数据库">4.8 数据库</a><ul><li><a href="#_4-8-1-建表规约">4.8.1 建表规约</a></li><li><a href="#_4-8-2-索引规约">4.8.2 索引规约</a></li><li><a href="#_4-8-3-sql">4.8.3 SQL</a></li><li><a href="#_4-8-4-orm">4.8.4 ORM</a></li></ul></li></ul></li></ul></div><p></p> <h2 id="_1-emis8000-系统"><a href="#_1-emis8000-系统" class="header-anchor">#</a> 1.EMIS8000 系统</h2> <h3 id="_1-1-系统架构"><a href="#_1-1-系统架构" class="header-anchor">#</a> 1.1 系统架构</h3> <p>应用软件平台采用微服务体系架构，建设以 SpringCloud、Docker、Jenkins 软件为基础的一套可以自动配置、注册、发布、服务、测试的可持续集成服务容器平台。应用平台软件架构如下图。</p> <p><img src="/vuepress-demo/assets/img/jg.df43ced7.png" alt="jg"></p> <h3 id="_1-2-软件环境"><a href="#_1-2-软件环境" class="header-anchor">#</a> 1.2 软件环境</h3> <table><thead><tr><th>名称</th> <th>版本</th> <th>用途</th> <th>备注</th></tr></thead> <tbody><tr><td>togest-nginx 镜像</td> <td>1.12.1</td> <td>代理</td> <td></td></tr> <tr><td>togest-redis 镜像</td> <td>4.0.2</td> <td>缓存</td> <td></td></tr> <tr><td>togest-mq 镜像</td> <td>3.6.10</td> <td>rabbit 消息队列</td> <td></td></tr> <tr><td>Mysql</td> <td>5.7.19</td> <td>数据库</td> <td></td></tr> <tr><td>JDK</td> <td>1.8.144</td> <td></td> <td></td></tr> <tr><td>docker</td> <td>17.09 社区版</td> <td></td> <td></td></tr> <tr><td>centos</td> <td>7.3</td> <td></td> <td></td></tr> <tr><td>springcloud</td> <td>Dalston.SR1</td> <td></td> <td></td></tr> <tr><td>springboot</td> <td>1.5.4.RELEASE</td> <td></td> <td></td></tr></tbody></table> <h2 id="_2-平台支撑"><a href="#_2-平台支撑" class="header-anchor">#</a> 2.平台支撑</h2> <h3 id="_2-1-元数据"><a href="#_2-1-元数据" class="header-anchor">#</a> 2.1 元数据</h3> <p>元数据定义了所有业务的元数据模型，比如人员管理，定义了人员管理的属性及扩展属性。整个平台以元数据为驱动，前端用元数据实现 CRUD, 后端用元数据实现数据聚合、封装、导入及导出。元数据主要有元数据主表、元数据属性构成，数据模型及 UI 如下：</p> <p><strong>元数据</strong></p> <table><thead><tr><th>序号</th> <th>属性</th> <th>描述</th></tr></thead> <tbody><tr><td>1</td> <td>名称</td> <td>元数据名称</td></tr> <tr><td>2</td> <td>自定义编码</td> <td>自定义编码</td></tr> <tr><td>3</td> <td>编码</td> <td>编码</td></tr> <tr><td>4</td> <td>表名</td> <td>物理结构表名</td></tr> <tr><td>5</td> <td>排序</td> <td>决定列表显示顺序</td></tr> <tr><td>6</td> <td>上级父类</td> <td></td></tr></tbody></table> <p><img src="/vuepress-demo/assets/img/image-20200408110407285.4eb878e8.png" alt="image-20200408110407285"></p> <p><strong>元数据明细</strong></p> <p><img src="/vuepress-demo/assets/img/image-20200408110709776.7f5d5971.png" alt="image-20200408110709776"></p> <table><thead><tr><th>序号</th> <th>属性</th> <th>描述</th></tr></thead> <tbody><tr><td>1</td> <td>名称</td> <td>属性名称</td></tr> <tr><td>2</td> <td>编码</td> <td></td></tr> <tr><td>3</td> <td>自定编码</td> <td>系统自动生成</td></tr> <tr><td>4</td> <td>组件类型</td> <td>决定前端展现，字典</td></tr> <tr><td>5</td> <td>数据类型</td> <td>数据字典布尔/文本/字符/长整形/浮点/整形/精确计算/日期</td></tr> <tr><td>6</td> <td>数据字段</td> <td>数据表列</td></tr> <tr><td>7</td> <td>属性名</td> <td>后台实体中文显示属性</td></tr> <tr><td>8</td> <td>主键属性</td> <td>后台实体属性</td></tr> <tr><td>9</td> <td>属性描述</td> <td>属性额外扩展，一般配置字典名称、小数位数</td></tr> <tr><td>11</td> <td>字段分组</td> <td>数据字典</td></tr> <tr><td>12</td> <td>排序</td> <td>显示顺序</td></tr> <tr><td>13</td> <td>格式化器</td> <td>时间格式配置，例如 yyyy-MM-dd HH:mm:ss</td></tr> <tr><td>14</td> <td>查询方式</td> <td>数据字典，LIKE/IN/BETTWEN/OR/=，对于元数据驱动查询有效</td></tr> <tr><td>15</td> <td>表达式</td> <td>后端用于聚合，JSON 格式</td></tr> <tr><td>16</td> <td>允许多值</td> <td>是/否</td></tr> <tr><td>17</td> <td>判重条件</td> <td>是/否</td></tr> <tr><td>18</td> <td>新增状态</td> <td>正常/禁用/只读/隐藏</td></tr> <tr><td>19</td> <td>详情状态</td> <td>正常/禁用</td></tr> <tr><td>20</td> <td>编辑状态</td> <td>正常/禁用/只读/隐藏</td></tr> <tr><td>21</td> <td>是否启用</td> <td>是否</td></tr> <tr><td>22</td> <td>是否必填</td> <td>是否，必填校验</td></tr> <tr><td>23</td> <td>是否表格字段</td> <td>是否，表格显示</td></tr> <tr><td>24</td> <td>是否可搜索</td> <td>是否，查询条件</td></tr> <tr><td>25</td> <td>是否下拉可搜索</td> <td>是否，下拉框可搜索</td></tr> <tr><td>26</td> <td>是否排序项</td> <td>是否，表头可点击排序</td></tr> <tr><td>27</td> <td>是否导出</td> <td>是否</td></tr> <tr><td>28</td> <td>自定义扩展</td> <td>针对列动态，用于 nosql 模式</td></tr> <tr><td>29</td> <td>档案扩展</td> <td>数据字典，无/常规/动态/静态</td></tr> <tr><td>30</td> <td>表格宽度</td> <td>预留</td></tr> <tr><td>31</td> <td>拓展配置</td> <td>预留</td></tr> <tr><td>32</td> <td>输入提示</td> <td>预留</td></tr> <tr><td>33</td> <td>UI 校验器</td> <td>预留</td></tr> <tr><td>34</td> <td>默认值</td> <td>预留</td></tr></tbody></table> <p><strong>1.数据类型</strong>：对于精确计算，后台实体需要使用 BigDecimal，浮点/精确计算前端需结合属性描述里面配置的精确位数一起使用</p> <p>**2.组件类型：**年月日日期、年月日时分秒、日期月份、文本域(teaxtArea)、文本(text)、数值、布尔、文件、图片、文件上传、大文件上传、字典、字典多选、下拉、JSON 编辑器、隐藏、一些业务定制组件等</p> <h3 id="_2-2-crud"><a href="#_2-2-crud" class="header-anchor">#</a> 2.2 CRUD</h3> <p>平台的增删改查使用的 Mybatis 框架，针对数据库的操作我们开发了 togest-domain、togest-persist、togest-cms-crud、togest-cms-crud-web 模块。</p> <h4 id="_2-2-1-togest-domain"><a href="#_2-2-1-togest-domain" class="header-anchor">#</a> 2.2.1 togest-domain</h4> <p>togest-domain 定义通用的些实体，包括 BaseCommonEntity、DataCommonEntity、TreeCommonEntity、Page、PageData、DeleteVo、UpdateVo、InsertVo、QueryVo 等，另外 IdGen 也在此模块中，完成 UUID 生成。</p> <h4 id="_2-2-2-togest-persist"><a href="#_2-2-2-togest-persist" class="header-anchor">#</a> 2.2.2 togest-persist</h4> <p>CRUD 骨架，定义了单表操作(SingleDao)、CrudCommonDao、TreeCommonDao、ICrudCommService、ITreeCommService、CrudCommService、TreeCommonService。</p> <p>CRUD 接口定义如下，业务可继承：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">ICrudCommonService</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
     <span class="token class-name">T</span> <span class="token function">get</span><span class="token punctuation">(</span><span class="token class-name">String</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token function">getByIds</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> ids<span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token class-name">T</span> <span class="token function">get</span><span class="token punctuation">(</span><span class="token class-name">T</span> entity<span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token function">findList</span><span class="token punctuation">(</span><span class="token class-name">T</span> entity<span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token function">findAllList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token class-name">Page</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token function">findPage</span><span class="token punctuation">(</span><span class="token class-name">Page</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> page<span class="token punctuation">,</span> <span class="token class-name">T</span> entity<span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token keyword">int</span> <span class="token function">save</span><span class="token punctuation">(</span><span class="token class-name">T</span> entity<span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token keyword">int</span> <span class="token function">delete</span><span class="token punctuation">(</span><span class="token class-name">T</span> entity<span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token keyword">int</span> <span class="token function">delete</span><span class="token punctuation">(</span><span class="token class-name">String</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token keyword">boolean</span> <span class="token function">unique</span><span class="token punctuation">(</span><span class="token class-name">T</span> entity<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p><img src="/vuepress-demo/assets/img/image-20200408134944623.84b9426c.png" alt="image-20200408134944623"></p> <p>CRUD Dao 接口定义如下，业务 dao 可继承：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">CrudCommonDao</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span>
<span class="token punctuation">{</span>
  <span class="token class-name">T</span> <span class="token function">getByKey</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span><span class="token class-name">String</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token function">getListByKeys</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token string">&quot;ids&quot;</span><span class="token punctuation">)</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> ids<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token class-name">T</span> <span class="token function">getByEntity</span><span class="token punctuation">(</span><span class="token class-name">T</span> entity<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token function">findList</span><span class="token punctuation">(</span><span class="token class-name">T</span> entity<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token function">findAllList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">int</span> <span class="token function">insert</span><span class="token punctuation">(</span><span class="token class-name">T</span> entity<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">int</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token class-name">T</span> entity<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">int</span> <span class="token function">delete</span><span class="token punctuation">(</span><span class="token class-name">T</span> entity<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">int</span> <span class="token function">deleteByKey</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span> <span class="token class-name">String</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p><img src="/vuepress-demo/assets/img/image-20200408135038194.a1ddc56d.png" alt="image-20200408135038194"></p> <p>CRUD 通用的实现类如下，业务可继承，对于分页由 pagehelper 插件完成，对于性能有要求的，对于 count 建议单独书写。</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CrudCommonService</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">D</span> <span class="token keyword">extends</span> <span class="token class-name">CrudCommonDao</span><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span><span class="token punctuation">,</span> <span class="token class-name">T</span> <span class="token keyword">extends</span> <span class="token class-name">DataCommonEntity</span><span class="token punctuation">&gt;</span></span> <span class="token keyword">implements</span> <span class="token class-name">ICrudCommonService</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>

	<span class="token annotation punctuation">@Autowired</span>
	<span class="token keyword">protected</span> <span class="token class-name">D</span> dao<span class="token punctuation">;</span>

	<span class="token keyword">public</span> <span class="token class-name">T</span> <span class="token function">get</span><span class="token punctuation">(</span><span class="token class-name">String</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> dao<span class="token punctuation">.</span><span class="token function">getByKey</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token function">getByIds</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> ids<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> dao<span class="token punctuation">.</span><span class="token function">getListByKeys</span><span class="token punctuation">(</span>ids<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">public</span> <span class="token class-name">T</span> <span class="token function">get</span><span class="token punctuation">(</span><span class="token class-name">T</span> entity<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> dao<span class="token punctuation">.</span><span class="token function">getByEntity</span><span class="token punctuation">(</span>entity<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token function">findList</span><span class="token punctuation">(</span><span class="token class-name">T</span> entity<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> dao<span class="token punctuation">.</span><span class="token function">findList</span><span class="token punctuation">(</span>entity<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token function">findAllList</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> dao<span class="token punctuation">.</span><span class="token function">findAllList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">public</span> <span class="token class-name">Page</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token function">findPage</span><span class="token punctuation">(</span><span class="token class-name">Page</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> page<span class="token punctuation">,</span> <span class="token class-name">T</span> entity<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token function">findPage</span><span class="token punctuation">(</span>page<span class="token punctuation">,</span> entity<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">public</span> <span class="token class-name">Page</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token function">findPage</span><span class="token punctuation">(</span><span class="token class-name">Page</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> page<span class="token punctuation">,</span> <span class="token class-name">T</span> entity<span class="token punctuation">,</span> <span class="token keyword">boolean</span> count<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token class-name">PageUtils</span><span class="token punctuation">.</span><span class="token function">setPage</span><span class="token punctuation">(</span>page<span class="token punctuation">,</span> count<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span> <span class="token class-name">PageUtils</span><span class="token punctuation">.</span><span class="token function">buildPage</span><span class="token punctuation">(</span>dao<span class="token punctuation">.</span><span class="token function">findList</span><span class="token punctuation">(</span>entity<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token annotation punctuation">@Transactional</span>
	<span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">save</span><span class="token punctuation">(</span><span class="token class-name">T</span> entity<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>entity<span class="token punctuation">.</span><span class="token function">getIsNewRecord</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			entity<span class="token punctuation">.</span><span class="token function">preInsert</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">return</span> dao<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>entity<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
			entity<span class="token punctuation">.</span><span class="token function">preUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">return</span> dao<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>entity<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>

	<span class="token annotation punctuation">@Transactional</span>
	<span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">delete</span><span class="token punctuation">(</span><span class="token class-name">T</span> entity<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		entity<span class="token punctuation">.</span><span class="token function">preDelete</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span> dao<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span>entity<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token annotation punctuation">@Transactional</span>
	<span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">delete</span><span class="token punctuation">(</span><span class="token class-name">String</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> dao<span class="token punctuation">.</span><span class="token function">deleteByKey</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token annotation punctuation">@Override</span>
	<span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">unique</span><span class="token punctuation">(</span><span class="token class-name">T</span> entity<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">try</span><span class="token punctuation">{</span>
			<span class="token class-name">T</span> dto <span class="token operator">=</span> dao<span class="token punctuation">.</span><span class="token function">getByEntity</span><span class="token punctuation">(</span>entity<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token class-name">StringUtil</span><span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span>dto<span class="token punctuation">)</span><span class="token operator">||</span>dto<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>entity<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
				<span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span><span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

<span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br></div></div><p><img src="/vuepress-demo/assets/img/image-20200408135142599.a3c42c0c.png" alt="image-20200408135142599"></p> <p>对于树形业务的框架，通过 TreeCommonDao、ITreeCommService、TreeCommonService 来实现业务的框架。</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">ITreeCommonService</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token keyword">extends</span> <span class="token class-name">ICrudCommonService</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>
	 <span class="token class-name">T</span> <span class="token function">findChildsByParent</span><span class="token punctuation">(</span><span class="token class-name">String</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><div class="language-java line-numbers-mode"><pre class="language-java"><code>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">TreeCommonDao</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token keyword">extends</span> <span class="token class-name">CrudCommonDao</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>
	 <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token function">findByParentIdsLike</span><span class="token punctuation">(</span><span class="token class-name">T</span> entity<span class="token punctuation">)</span><span class="token punctuation">;</span>
	 <span class="token keyword">int</span> <span class="token function">updateParentIds</span><span class="token punctuation">(</span><span class="token class-name">T</span> entity<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><div class="language-java line-numbers-mode"><pre class="language-java"><code>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TreeCommonService</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">D</span> <span class="token keyword">extends</span> <span class="token class-name">TreeCommonDao</span><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span><span class="token punctuation">,</span> <span class="token class-name">T</span> <span class="token keyword">extends</span> <span class="token class-name">TreeCommonEntity</span><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span>
		<span class="token keyword">extends</span> <span class="token class-name">CrudCommonService</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">D</span><span class="token punctuation">,</span> <span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token keyword">implements</span> <span class="token class-name">ITreeCommonService</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>

	<span class="token annotation punctuation">@SuppressWarnings</span><span class="token punctuation">(</span><span class="token string">&quot;unchecked&quot;</span><span class="token punctuation">)</span>
	<span class="token annotation punctuation">@Transactional</span>
	<span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">save</span><span class="token punctuation">(</span><span class="token class-name">T</span> entity<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> entityClass <span class="token operator">=</span> <span class="token class-name">ReflectHelper</span><span class="token punctuation">.</span><span class="token function">getClassGenricType</span><span class="token punctuation">(</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">StringUtil</span><span class="token punctuation">.</span><span class="token function">isBlank</span><span class="token punctuation">(</span>entity<span class="token punctuation">.</span><span class="token function">getParentId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			entity<span class="token punctuation">.</span><span class="token function">setParentId</span><span class="token punctuation">(</span><span class="token string">&quot;0&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			entity<span class="token punctuation">.</span><span class="token function">setParentIds</span><span class="token punctuation">(</span><span class="token string">&quot;0,&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token class-name">String</span> oldParentIds <span class="token operator">=</span> entity<span class="token punctuation">.</span><span class="token function">getParentIds</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		entity<span class="token punctuation">.</span><span class="token function">setParentIds</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>entity<span class="token punctuation">.</span><span class="token function">getParentId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">?</span> <span class="token string">&quot;&quot;</span>
				<span class="token operator">:</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>entity<span class="token punctuation">.</span><span class="token function">getParentId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getParentIds</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">?</span> <span class="token string">&quot;&quot;</span>
						<span class="token operator">:</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>entity<span class="token punctuation">.</span><span class="token function">getParentId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getParentIds</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
				<span class="token operator">+</span> entity<span class="token punctuation">.</span><span class="token function">getParentId</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;,&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token string">&quot;0&quot;</span><span class="token punctuation">.</span><span class="token function">equalsIgnoreCase</span><span class="token punctuation">(</span>entity<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			entity<span class="token punctuation">.</span><span class="token function">setParentId</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			entity<span class="token punctuation">.</span><span class="token function">setParentIds</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">int</span> result <span class="token operator">=</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span>entity<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">T</span> o <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
		<span class="token keyword">try</span> <span class="token punctuation">{</span>
			o <span class="token operator">=</span> entityClass<span class="token punctuation">.</span><span class="token function">newInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">ServiceException</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		o<span class="token punctuation">.</span><span class="token function">setParentIds</span><span class="token punctuation">(</span><span class="token string">&quot;%,&quot;</span> <span class="token operator">+</span> entity<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;,%&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> dao<span class="token punctuation">.</span><span class="token function">findByParentIdsLike</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">T</span> e <span class="token operator">:</span> list<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span><span class="token function">getParentIds</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> oldParentIds <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				e<span class="token punctuation">.</span><span class="token function">setParentIds</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span><span class="token function">getParentIds</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>oldParentIds<span class="token punctuation">,</span> entity<span class="token punctuation">.</span><span class="token function">getParentIds</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token function">preUpdateChild</span><span class="token punctuation">(</span>entity<span class="token punctuation">,</span> e<span class="token punctuation">)</span><span class="token punctuation">;</span>
				dao<span class="token punctuation">.</span><span class="token function">updateParentIds</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">return</span> result<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>


	<span class="token annotation punctuation">@Transactional</span>
	<span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">preUpdateChild</span><span class="token punctuation">(</span><span class="token class-name">T</span> entity<span class="token punctuation">,</span> <span class="token class-name">T</span> childEntity<span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token punctuation">}</span>

	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setTree</span><span class="token punctuation">(</span><span class="token class-name">T</span> parent<span class="token punctuation">,</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> children<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>parent <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
			<span class="token keyword">return</span><span class="token punctuation">;</span>

		<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> nodes <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> children<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token class-name">T</span> child <span class="token operator">=</span> children<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>parent<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>child<span class="token punctuation">.</span><span class="token function">getParentId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				nodes<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>child<span class="token punctuation">)</span><span class="token punctuation">;</span>
				children<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
				i<span class="token operator">--</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
		nodes<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token punctuation">(</span>c1<span class="token punctuation">,</span>c2<span class="token punctuation">)</span><span class="token operator">-&gt;</span>c1<span class="token punctuation">.</span><span class="token function">getSort</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">compareTo</span><span class="token punctuation">(</span>c2<span class="token punctuation">.</span><span class="token function">getSort</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		parent<span class="token punctuation">.</span><span class="token function">setNodes</span><span class="token punctuation">(</span>nodes<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>nodes<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">T</span> node <span class="token operator">:</span> nodes<span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token function">setTree</span><span class="token punctuation">(</span>node<span class="token punctuation">,</span> children<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">public</span> <span class="token class-name">T</span> <span class="token function">findChildsByParent</span><span class="token punctuation">(</span><span class="token class-name">String</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">StringUtil</span><span class="token punctuation">.</span><span class="token function">isNotBlank</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token class-name">T</span> entity <span class="token operator">=</span> <span class="token function">get</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> t <span class="token operator">=</span> dao<span class="token punctuation">.</span><span class="token function">findByParentIdsLike</span><span class="token punctuation">(</span>entity<span class="token punctuation">)</span><span class="token punctuation">;</span>
			t<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>entity<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token function">setTree</span><span class="token punctuation">(</span>entity<span class="token punctuation">,</span> t<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">return</span> entity<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token annotation punctuation">@Override</span>
	<span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">delete</span><span class="token punctuation">(</span><span class="token class-name">T</span> entity<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> ids <span class="token operator">=</span> <span class="token function">getChildIds</span><span class="token punctuation">(</span>entity<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">StringUtil</span><span class="token punctuation">.</span><span class="token function">isNotEmpty</span><span class="token punctuation">(</span>ids<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			entity<span class="token punctuation">.</span><span class="token function">setId</span><span class="token punctuation">(</span><span class="token class-name">CollectionUtils</span><span class="token punctuation">.</span><span class="token function">convertToString</span><span class="token punctuation">(</span>ids<span class="token punctuation">,</span> <span class="token string">&quot;,&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">return</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span>entity<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token annotation punctuation">@Override</span>
	<span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">delete</span><span class="token punctuation">(</span><span class="token class-name">String</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> ids <span class="token operator">=</span> <span class="token function">getChildIds</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">StringUtil</span><span class="token punctuation">.</span><span class="token function">isNotEmpty</span><span class="token punctuation">(</span>ids<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			id <span class="token operator">=</span> <span class="token class-name">CollectionUtils</span><span class="token punctuation">.</span><span class="token function">convertToString</span><span class="token punctuation">(</span>ids<span class="token punctuation">,</span> <span class="token string">&quot;,&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">return</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> <span class="token function">getChildIds</span><span class="token punctuation">(</span><span class="token class-name">String</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> ids <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">T</span> t <span class="token operator">=</span> dao<span class="token punctuation">.</span><span class="token function">getByKey</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">StringUtil</span><span class="token punctuation">.</span><span class="token function">isNotEmpty</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			t<span class="token punctuation">.</span><span class="token function">setParentIds</span><span class="token punctuation">(</span>t<span class="token punctuation">.</span><span class="token function">getParentIds</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> id <span class="token operator">+</span> <span class="token string">&quot;,&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> dao<span class="token punctuation">.</span><span class="token function">findByParentIdsLike</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">StringUtil</span><span class="token punctuation">.</span><span class="token function">isNotEmpty</span><span class="token punctuation">(</span>list<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				ids <span class="token operator">=</span> <span class="token class-name">CollectionUtils</span><span class="token punctuation">.</span><span class="token function">distinctExtractToList</span><span class="token punctuation">(</span>list<span class="token punctuation">,</span> <span class="token string">&quot;id&quot;</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
		ids<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span> ids<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br></div></div><p>某些简单业务无需通过书写 XML 完成 CRUD，可基于 SingleDao 来完成 CRUD，业务可直接注入@Autowired</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">SingleDao</span> <span class="token punctuation">{</span>
	 <span class="token keyword">void</span> <span class="token function">save</span><span class="token punctuation">(</span><span class="token class-name">InsertVO</span> obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
	 <span class="token keyword">void</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token class-name">UpdateVO</span> obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
	 <span class="token keyword">void</span> <span class="token function">delete</span><span class="token punctuation">(</span><span class="token class-name">DeleteVO</span> obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
	 <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">PageData</span><span class="token punctuation">&gt;</span></span> <span class="token function">list</span><span class="token punctuation">(</span><span class="token class-name">Object</span> obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
	 <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">PageData</span><span class="token punctuation">&gt;</span></span> <span class="token function">page</span><span class="token punctuation">(</span><span class="token class-name">QueryVO</span> obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
	 <span class="token class-name">PageData</span> <span class="token function">get</span><span class="token punctuation">(</span><span class="token class-name">QueryVO</span> obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
	 <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">PageData</span><span class="token punctuation">&gt;</span></span> <span class="token function">listBySql</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token string">&quot;value&quot;</span><span class="token punctuation">)</span> <span class="token class-name">String</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>
	 <span class="token class-name">PageData</span> <span class="token function">unique</span><span class="token punctuation">(</span><span class="token class-name">QueryVO</span> obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
	 <span class="token keyword">void</span> <span class="token function">saveBatch</span><span class="token punctuation">(</span><span class="token class-name">InsertBatchVO</span> vo<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h4 id="_2-2-3-togest-cms-crud"><a href="#_2-2-3-togest-cms-crud" class="header-anchor">#</a> 2.2.3 togest-cms-crud</h4> <p>togest-cms-crud 实现了基于元数据的单表的 MAP 的 CRUD。包括 CommonCrudService、CommonCrudServiceImpl、CommonImportService、CommonImportServiceImpl</p> <p>CommonCrudService 定义接口如下，CommonCrudServiceImpl 为实现类，实现类依赖 SingleDao.业务可分继承该类,达到通过元数据配置的方式动态实现 CRUD，而无需书写 dao、domain 等。对于查询是通过元数据的查询方式属性列的配置实现 like、in 、or、between、=操作</p> <p><img src="/vuepress-demo/assets/img/image-20200408141412704.f9f722cc.png" alt="image-20200408141412704"></p> <p>业务使用该框架完成变电 24 种设备的 CRUD，24 种设备的属性各不同，从而达到较少开发工作量。工程师可定义元数据，后台简单继承下框架就好。</p> <p><img src="/vuepress-demo/assets/img/image-20200408141919249.5ca9ddc6.png" alt="image-20200408141919249"></p> <p><img src="/vuepress-demo/assets/img/image-20200408141953995.c4ad1cd6.png" alt="image-20200408141953995"></p> <h4 id="_2-2-4-togest-cms-crud-web"><a href="#_2-2-4-togest-cms-crud-web" class="header-anchor">#</a> 2.2.4 togest-cms-crud-web</h4> <p>togest-cms-crud-web 主要功能如下：</p> <ol><li><p>针对 2.2.3 封装了 WEB 层，抽象了 CommonResource，业务可继承。WEB 层收到请求之后，会将请求根据元数据编码获取业务逻辑服务，获取不到则用通用的 CommonCrudServiceImpl</p> <div class="language-Java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">CommonResource</span>  <span class="token punctuation">{</span>
	<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;/dynamic/{resourceCode}/pages&quot;</span><span class="token punctuation">,</span> method<span class="token operator">=</span><span class="token class-name">RequestMethod</span><span class="token punctuation">.</span>GET<span class="token punctuation">)</span>
	<span class="token annotation punctuation">@ApiOperation</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;获取数据分页&quot;</span><span class="token punctuation">)</span>
	<span class="token keyword">public</span> <span class="token class-name">RestfulResponse</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Page</span><span class="token punctuation">&lt;</span><span class="token class-name">PageData</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> <span class="token function">findPage</span><span class="token punctuation">(</span><span class="token class-name">Page</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">PageData</span><span class="token punctuation">&gt;</span></span> page<span class="token punctuation">,</span>
			<span class="token annotation punctuation">@PathVariable</span><span class="token punctuation">(</span><span class="token string">&quot;resourceCode&quot;</span><span class="token punctuation">)</span> <span class="token class-name">String</span> resourceCode<span class="token punctuation">,</span> <span class="token class-name">String</span> authCode<span class="token punctuation">)</span>

	<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;/dynamic/{resourceCode}/list&quot;</span><span class="token punctuation">,</span> method <span class="token operator">=</span><span class="token class-name">RequestMethod</span><span class="token punctuation">.</span>GET<span class="token punctuation">)</span>
	<span class="token annotation punctuation">@ApiOperation</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;获取数据集合&quot;</span><span class="token punctuation">)</span>
	<span class="token keyword">public</span> <span class="token class-name">RestfulResponse</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">List</span><span class="token punctuation">&lt;</span><span class="token class-name">PageData</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> <span class="token function">findList</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathVariable</span><span class="token punctuation">(</span><span class="token string">&quot;resourceCode&quot;</span><span class="token punctuation">)</span>

	<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span><span class="token string">&quot;/dynamic/{resourceCode}/delete&quot;</span><span class="token punctuation">,</span>method<span class="token operator">=</span><span class="token class-name">RequestMethod</span><span class="token punctuation">.</span>POST<span class="token punctuation">)</span>
	<span class="token annotation punctuation">@ApiOperation</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;根据id删除数据&quot;</span><span class="token punctuation">)</span>
	<span class="token keyword">public</span> <span class="token class-name">RestfulResponse</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Boolean</span><span class="token punctuation">&gt;</span></span> <span class="token function">deleteData</span><span class="token punctuation">(</span><span class="token class-name">String</span> id<span class="token punctuation">,</span><span class="token annotation punctuation">@PathVariable</span><span class="token punctuation">(</span><span class="token string">&quot;resourceCode&quot;</span><span class="token punctuation">)</span> <span class="token class-name">String</span> resourceCode<span class="token punctuation">,</span><span class="token class-name">String</span> deleteIp<span class="token punctuation">)</span>

	<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;dynamic/{resourceCode}&quot;</span><span class="token punctuation">,</span> method <span class="token operator">=</span> <span class="token class-name">RequestMethod</span><span class="token punctuation">.</span>GET<span class="token punctuation">)</span>
	<span class="token annotation punctuation">@ApiOperation</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;根据id获取数据&quot;</span><span class="token punctuation">)</span>
	<span class="token keyword">public</span> <span class="token class-name">RestfulResponse</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">PageData</span><span class="token punctuation">&gt;</span></span> <span class="token function">getData</span><span class="token punctuation">(</span><span class="token class-name">String</span> id<span class="token punctuation">,</span> <span class="token annotation punctuation">@PathVariable</span><span class="token punctuation">(</span><span class="token string">&quot;resourceCode&quot;</span><span class="token punctuation">)</span> <span class="token class-name">String</span> resourceCode<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span>

	<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;dynamic/{resourceCode}/unique&quot;</span><span class="token punctuation">,</span>method<span class="token operator">=</span><span class="token class-name">RequestMethod</span><span class="token punctuation">.</span>POST<span class="token punctuation">)</span>
	<span class="token annotation punctuation">@ApiOperation</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;唯一性判重&quot;</span><span class="token punctuation">)</span>
	<span class="token keyword">public</span> <span class="token class-name">RestfulResponse</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Boolean</span><span class="token punctuation">&gt;</span></span> <span class="token function">unique</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathVariable</span><span class="token punctuation">(</span><span class="token string">&quot;resourceCode&quot;</span><span class="token punctuation">)</span> <span class="token class-name">String</span> resourceCode<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span>

	<span class="token annotation punctuation">@SuppressWarnings</span><span class="token punctuation">(</span><span class="token string">&quot;unchecked&quot;</span><span class="token punctuation">)</span>
	<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;dynamic/{resourceCode}/enclosure&quot;</span><span class="token punctuation">,</span> method <span class="token operator">=</span> <span class="token class-name">RequestMethod</span><span class="token punctuation">.</span>GET<span class="token punctuation">)</span>
	<span class="token annotation punctuation">@ApiOperation</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;去往编辑页面&quot;</span><span class="token punctuation">)</span>
	<span class="token keyword">public</span> <span class="token class-name">RestfulResponse</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Map</span><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">List</span><span class="token punctuation">&lt;</span><span class="token class-name">Map</span><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> <span class="token function">enclosure</span><span class="token punctuation">(</span><span class="token class-name">String</span> id<span class="token punctuation">,</span><span class="token annotation punctuation">@PathVariable</span><span class="token punctuation">(</span><span class="token string">&quot;resourceCode&quot;</span><span class="token punctuation">)</span> <span class="token class-name">String</span> resourceCode<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span>

	<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;/dynamic/{resourceCode}&quot;</span><span class="token punctuation">,</span> method <span class="token operator">=</span> <span class="token class-name">RequestMethod</span><span class="token punctuation">.</span>POST<span class="token punctuation">)</span>
	<span class="token annotation punctuation">@ApiOperation</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;保存数据&quot;</span><span class="token punctuation">)</span>
	<span class="token keyword">public</span> <span class="token class-name">RestfulResponse</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Boolean</span><span class="token punctuation">&gt;</span></span> <span class="token function">saveData</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathVariable</span><span class="token punctuation">(</span><span class="token string">&quot;resourceCode&quot;</span><span class="token punctuation">)</span> <span class="token class-name">String</span> resourceCode<span class="token punctuation">)</span>

	<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;dynamic/{resourceCode}/export/template&quot;</span><span class="token punctuation">,</span> method <span class="token operator">=</span> <span class="token class-name">RequestMethod</span><span class="token punctuation">.</span>GET<span class="token punctuation">)</span>
	<span class="token annotation punctuation">@ApiOperation</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;模板导出&quot;</span><span class="token punctuation">)</span>
	<span class="token keyword">public</span> <span class="token class-name">ResponseEntity</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Resource</span><span class="token punctuation">&gt;</span></span> <span class="token function">exportByTemplate</span><span class="token punctuation">(</span><span class="token class-name">String</span> templateId<span class="token punctuation">,</span> <span class="token annotation punctuation">@PathVariable</span><span class="token punctuation">(</span><span class="token string">&quot;resourceCode&quot;</span><span class="token punctuation">)</span> <span class="token class-name">String</span> resourceCode<span class="token punctuation">,</span><span class="token class-name">String</span> authCode<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Throwable</span>

	<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;dynamic/{resourceCode}/export/custom&quot;</span><span class="token punctuation">,</span> method <span class="token operator">=</span> <span class="token class-name">RequestMethod</span><span class="token punctuation">.</span>GET<span class="token punctuation">)</span>
	<span class="token annotation punctuation">@ApiOperation</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;用户自定义导出&quot;</span><span class="token punctuation">)</span>
	<span class="token keyword">public</span> <span class="token class-name">ResponseEntity</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Resource</span><span class="token punctuation">&gt;</span></span> <span class="token function">exportByCustom</span><span class="token punctuation">(</span><span class="token class-name">String</span> userId<span class="token punctuation">,</span> <span class="token annotation punctuation">@PathVariable</span><span class="token punctuation">(</span><span class="token string">&quot;resourceCode&quot;</span><span class="token punctuation">)</span> <span class="token class-name">String</span> resouceCode<span class="token punctuation">,</span><span class="token class-name">String</span> authCode<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Throwable</span>

	<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;dynamic/{resourceCode}/export/preparation&quot;</span><span class="token punctuation">,</span> method <span class="token operator">=</span> <span class="token class-name">RequestMethod</span><span class="token punctuation">.</span>GET<span class="token punctuation">)</span>
	<span class="token annotation punctuation">@ApiOperation</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;插件导出&quot;</span><span class="token punctuation">)</span>
	<span class="token keyword">public</span> <span class="token class-name">ResponseEntity</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Resource</span><span class="token punctuation">&gt;</span></span> <span class="token function">exportByPreparation</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathVariable</span><span class="token punctuation">(</span><span class="token string">&quot;resourceCode&quot;</span><span class="token punctuation">)</span> <span class="token class-name">String</span> resourceCode<span class="token punctuation">,</span><span class="token class-name">String</span> authCode<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Throwable</span>

	<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token string">&quot;dynamic/{resourceCode}/importExcel&quot;</span><span class="token punctuation">,</span>method<span class="token operator">=</span><span class="token class-name">RequestMethod</span><span class="token punctuation">.</span>POST<span class="token punctuation">)</span>
	<span class="token annotation punctuation">@ApiOperation</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;模板导入&quot;</span><span class="token punctuation">)</span>
	<span class="token keyword">public</span> <span class="token class-name">RestfulResponse</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Map</span><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> <span class="token function">importExcel</span><span class="token punctuation">(</span><span class="token class-name">MultipartFile</span> file<span class="token punctuation">,</span> <span class="token class-name">String</span> templateId<span class="token punctuation">,</span><span class="token annotation punctuation">@PathVariable</span><span class="token punctuation">(</span><span class="token string">&quot;resourceCode&quot;</span><span class="token punctuation">)</span> <span class="token class-name">String</span> resourceCode<span class="token punctuation">,</span> <span class="token class-name">String</span> fileName<span class="token punctuation">,</span> <span class="token class-name">String</span> createIp<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br></div></div></li></ol> <ol start="2"><li>针对 togest-persist 定义了抽象的 WEB 层，包括 AbstractBaseController(部门控制权限)、AbstractController(支持导入导出)、AbstractBaseSectionController(段控制权限)、AbstractSectionController(段控制权限，支持导入导出)</li></ol> <div class="language-java line-numbers-mode"><pre class="language-java"><code>   <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">AbstractBaseSectionController</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span> <span class="token keyword">extends</span> <span class="token class-name">DataCommonEntity</span><span class="token punctuation">,</span> <span class="token class-name">S</span> <span class="token keyword">extends</span> <span class="token class-name">ICrudCommonService</span><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>

       <span class="token annotation punctuation">@Autowired</span>
       <span class="token keyword">protected</span> <span class="token class-name">S</span> service<span class="token punctuation">;</span>
       <span class="token annotation punctuation">@Autowired</span>
       <span class="token keyword">protected</span> <span class="token class-name">MetadataUtil</span> metadataUtil<span class="token punctuation">;</span>
       <span class="token annotation punctuation">@Autowired</span>
       <span class="token keyword">protected</span> <span class="token class-name">MetadataConfigClient</span> metadataConfigClient<span class="token punctuation">;</span>
       <span class="token annotation punctuation">@Autowired</span>
       <span class="token keyword">protected</span> <span class="token class-name">PolymerizeDataService</span> polymerizeDataService<span class="token punctuation">;</span>



       <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;get&quot;</span><span class="token punctuation">,</span> method <span class="token operator">=</span> <span class="token class-name">RequestMethod</span><span class="token punctuation">.</span>GET<span class="token punctuation">)</span>
       <span class="token annotation punctuation">@ApiOperation</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;查看信息&quot;</span><span class="token punctuation">)</span>
       <span class="token keyword">public</span> <span class="token class-name">RestfulResponse</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token function">get</span><span class="token punctuation">(</span><span class="token class-name">String</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
           <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">StringUtil</span><span class="token punctuation">.</span><span class="token function">isBlank</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
               <span class="token class-name">Shift</span><span class="token punctuation">.</span><span class="token function">fatal</span><span class="token punctuation">(</span><span class="token class-name">StatusCode</span><span class="token punctuation">.</span>DATA_CONDITION_EMPTY<span class="token punctuation">)</span><span class="token punctuation">;</span>
           <span class="token punctuation">}</span>
           <span class="token class-name">T</span> entity <span class="token operator">=</span> service<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
           <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">StringUtil</span><span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span>entity<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
               <span class="token class-name">Shift</span><span class="token punctuation">.</span><span class="token function">fatal</span><span class="token punctuation">(</span><span class="token class-name">StatusCode</span><span class="token punctuation">.</span>ID_DATA_EMPTY<span class="token punctuation">)</span><span class="token punctuation">;</span>
           <span class="token punctuation">}</span>
           polymerizeDataService<span class="token punctuation">.</span><span class="token function">setNamesByIds</span><span class="token punctuation">(</span>entity<span class="token punctuation">,</span> <span class="token function">getResourceCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
           <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">RestfulResponse</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>entity<span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token punctuation">}</span>


       <span class="token annotation punctuation">@AddDataPut</span>
       <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;save&quot;</span><span class="token punctuation">,</span> method <span class="token operator">=</span> <span class="token class-name">RequestMethod</span><span class="token punctuation">.</span>POST<span class="token punctuation">)</span>
       <span class="token annotation punctuation">@ApiOperation</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;保存信息&quot;</span><span class="token punctuation">)</span>
       <span class="token keyword">public</span> <span class="token class-name">RestfulResponse</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Boolean</span><span class="token punctuation">&gt;</span></span> <span class="token function">save</span><span class="token punctuation">(</span><span class="token class-name">T</span> entity<span class="token punctuation">)</span> <span class="token punctuation">{</span>
           service<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span>entity<span class="token punctuation">)</span><span class="token punctuation">;</span>
           <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">RestfulResponse</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token punctuation">}</span>


       <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;unique&quot;</span><span class="token punctuation">,</span> method <span class="token operator">=</span> <span class="token class-name">RequestMethod</span><span class="token punctuation">.</span>POST<span class="token punctuation">)</span>
       <span class="token annotation punctuation">@ApiOperation</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;唯一性判重&quot;</span><span class="token punctuation">)</span>
       <span class="token keyword">public</span> <span class="token class-name">RestfulResponse</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Boolean</span><span class="token punctuation">&gt;</span></span> <span class="token function">unique</span><span class="token punctuation">(</span><span class="token class-name">T</span> entity<span class="token punctuation">)</span> <span class="token punctuation">{</span>
           <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">RestfulResponse</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>service<span class="token punctuation">.</span><span class="token function">unique</span><span class="token punctuation">(</span>entity<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token punctuation">}</span>


       <span class="token annotation punctuation">@SuppressWarnings</span><span class="token punctuation">(</span><span class="token string">&quot;unchecked&quot;</span><span class="token punctuation">)</span>
       <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;enclosure&quot;</span><span class="token punctuation">,</span> method <span class="token operator">=</span> <span class="token class-name">RequestMethod</span><span class="token punctuation">.</span>GET<span class="token punctuation">)</span>
       <span class="token annotation punctuation">@ApiOperation</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;配置信息&quot;</span><span class="token punctuation">)</span>
       <span class="token keyword">public</span> <span class="token class-name">RestfulResponse</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Map</span><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">List</span><span class="token punctuation">&lt;</span><span class="token class-name">Map</span><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> <span class="token function">enclosure</span><span class="token punctuation">(</span><span class="token class-name">String</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
           <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">StringUtil</span><span class="token punctuation">.</span><span class="token function">isBlank</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
               <span class="token class-name">Shift</span><span class="token punctuation">.</span><span class="token function">fatal</span><span class="token punctuation">(</span><span class="token class-name">StatusCode</span><span class="token punctuation">.</span>DATA_CONDITION_EMPTY<span class="token punctuation">)</span><span class="token punctuation">;</span>
           <span class="token punctuation">}</span>
           <span class="token class-name">T</span> entity <span class="token operator">=</span> service<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
           <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">StringUtil</span><span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span>entity<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
               <span class="token class-name">Shift</span><span class="token punctuation">.</span><span class="token function">fatal</span><span class="token punctuation">(</span><span class="token class-name">StatusCode</span><span class="token punctuation">.</span>ID_DATA_EMPTY<span class="token punctuation">)</span><span class="token punctuation">;</span>
           <span class="token punctuation">}</span>
           <span class="token class-name">SystemResoucesResponse</span> response <span class="token operator">=</span> <span class="token class-name">OptionalUtils</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>metadataConfigClient<span class="token punctuation">.</span><span class="token function">getSystemResources</span><span class="token punctuation">(</span><span class="token function">getResourceCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
           <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">StringUtil</span><span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
               <span class="token class-name">Shift</span><span class="token punctuation">.</span><span class="token function">fatal</span><span class="token punctuation">(</span><span class="token class-name">StatusCode</span><span class="token punctuation">.</span>EXCEPTION<span class="token punctuation">)</span><span class="token punctuation">;</span>
           <span class="token punctuation">}</span>
           polymerizeDataService<span class="token punctuation">.</span><span class="token function">setNamesByIds</span><span class="token punctuation">(</span>entity<span class="token punctuation">,</span> response<span class="token punctuation">.</span><span class="token function">getProps</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
           <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> map <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">)</span> <span class="token class-name">ObjectUtils</span><span class="token punctuation">.</span><span class="token function">objectToMap</span><span class="token punctuation">(</span>entity<span class="token punctuation">)</span><span class="token punctuation">;</span>
           <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">List</span><span class="token punctuation">&lt;</span><span class="token class-name">Map</span><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> maps <span class="token operator">=</span> metadataUtil<span class="token punctuation">.</span><span class="token function">enclosure</span><span class="token punctuation">(</span>map<span class="token punctuation">,</span> response<span class="token punctuation">.</span><span class="token function">getProps</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
           <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">RestfulResponse</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>maps<span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token punctuation">}</span>


       <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;delete&quot;</span><span class="token punctuation">,</span> method <span class="token operator">=</span> <span class="token class-name">RequestMethod</span><span class="token punctuation">.</span>POST<span class="token punctuation">)</span>
       <span class="token annotation punctuation">@DeleteDataPut</span>
       <span class="token annotation punctuation">@ApiOperation</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;假删除信息&quot;</span><span class="token punctuation">)</span>
       <span class="token keyword">public</span> <span class="token class-name">RestfulResponse</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Boolean</span><span class="token punctuation">&gt;</span></span> <span class="token function">delete</span><span class="token punctuation">(</span><span class="token class-name">T</span> entity<span class="token punctuation">)</span> <span class="token punctuation">{</span>
           <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">StringUtil</span><span class="token punctuation">.</span><span class="token function">isBlank</span><span class="token punctuation">(</span>entity<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
               <span class="token class-name">Shift</span><span class="token punctuation">.</span><span class="token function">fatal</span><span class="token punctuation">(</span><span class="token class-name">StatusCode</span><span class="token punctuation">.</span>DATA_CONDITION_EMPTY<span class="token punctuation">)</span><span class="token punctuation">;</span>
           <span class="token punctuation">}</span>
           service<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span>entity<span class="token punctuation">)</span><span class="token punctuation">;</span>
           <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">RestfulResponse</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token punctuation">}</span>


       <span class="token annotation punctuation">@DataControlSectionPut</span>
       <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;list&quot;</span><span class="token punctuation">,</span> method <span class="token operator">=</span> <span class="token class-name">RequestMethod</span><span class="token punctuation">.</span>GET<span class="token punctuation">)</span>
       <span class="token annotation punctuation">@ApiOperation</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;查看列表&quot;</span><span class="token punctuation">)</span>
       <span class="token keyword">public</span> <span class="token class-name">RestfulResponse</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">List</span><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> <span class="token function">findList</span><span class="token punctuation">(</span><span class="token class-name">T</span> entity<span class="token punctuation">)</span> <span class="token punctuation">{</span>
           <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> service<span class="token punctuation">.</span><span class="token function">findList</span><span class="token punctuation">(</span>entity<span class="token punctuation">)</span><span class="token punctuation">;</span>
           <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">StringUtil</span><span class="token punctuation">.</span><span class="token function">isNotEmpty</span><span class="token punctuation">(</span>list<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
               polymerizeDataService<span class="token punctuation">.</span><span class="token function">setNamesByIds</span><span class="token punctuation">(</span>list<span class="token punctuation">,</span> <span class="token function">getResourceCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
           <span class="token punctuation">}</span>
           <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">RestfulResponse</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>list<span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token punctuation">}</span>


       <span class="token annotation punctuation">@DataControlSectionPut</span>
       <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;page&quot;</span><span class="token punctuation">,</span> method <span class="token operator">=</span> <span class="token class-name">RequestMethod</span><span class="token punctuation">.</span>GET<span class="token punctuation">)</span>
       <span class="token annotation punctuation">@ApiOperation</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;查看分页列表&quot;</span><span class="token punctuation">)</span>
       <span class="token keyword">public</span> <span class="token class-name">RestfulResponse</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Page</span><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> <span class="token function">findPage</span><span class="token punctuation">(</span><span class="token class-name">Page</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> page<span class="token punctuation">,</span> <span class="token class-name">T</span> entity<span class="token punctuation">)</span> <span class="token punctuation">{</span>
           <span class="token class-name">Page</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> pg <span class="token operator">=</span> service<span class="token punctuation">.</span><span class="token function">findPage</span><span class="token punctuation">(</span>page<span class="token punctuation">,</span> entity<span class="token punctuation">)</span><span class="token punctuation">;</span>
           <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">StringUtil</span><span class="token punctuation">.</span><span class="token function">isNotEmpty</span><span class="token punctuation">(</span>pg<span class="token punctuation">.</span><span class="token function">getList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
               polymerizeDataService<span class="token punctuation">.</span><span class="token function">setNamesByIds</span><span class="token punctuation">(</span>pg<span class="token punctuation">.</span><span class="token function">getList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">getResourceCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
           <span class="token punctuation">}</span>
           <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">RestfulResponse</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>pg<span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token punctuation">}</span>


       <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token class-name">String</span> <span class="token function">getResourceCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br></div></div><div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">AbstractController</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span> <span class="token keyword">extends</span> <span class="token class-name">DataCommonEntity</span><span class="token punctuation">,</span> <span class="token class-name">S</span> <span class="token keyword">extends</span> <span class="token class-name">ICrudCommonService</span><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span><span class="token punctuation">,</span> <span class="token class-name">I</span> <span class="token keyword">extends</span> <span class="token class-name">ConfigExcelImportService</span><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span>
     <span class="token keyword">extends</span> <span class="token class-name">AbstractBaseController</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">,</span> <span class="token class-name">S</span><span class="token punctuation">&gt;</span></span>
     <span class="token keyword">implements</span> <span class="token class-name">ExportExtend</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">,</span> <span class="token class-name">ImportExtend</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>

 <span class="token annotation punctuation">@Autowired</span>
 <span class="token keyword">protected</span> <span class="token class-name">I</span> importService<span class="token punctuation">;</span>
 <span class="token annotation punctuation">@Autowired</span>
 <span class="token keyword">protected</span> <span class="token class-name">ExportClient</span> exportClient<span class="token punctuation">;</span>

 <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;import&quot;</span><span class="token punctuation">,</span> method <span class="token operator">=</span> <span class="token class-name">RequestMethod</span><span class="token punctuation">.</span>POST<span class="token punctuation">)</span>
 <span class="token annotation punctuation">@ApiOperation</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;数据导入&quot;</span><span class="token punctuation">)</span>
 <span class="token keyword">public</span> <span class="token class-name">RestfulResponse</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Map</span><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> <span class="token function">imports</span><span class="token punctuation">(</span><span class="token class-name">T</span> entity<span class="token punctuation">,</span> <span class="token class-name">MultipartFile</span> file<span class="token punctuation">,</span> <span class="token class-name">String</span> templetId<span class="token punctuation">,</span> <span class="token class-name">String</span> fileName<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
     <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">StringUtil</span><span class="token punctuation">.</span><span class="token function">isBlank</span><span class="token punctuation">(</span>templetId<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
         <span class="token class-name">Shift</span><span class="token punctuation">.</span><span class="token function">fatal</span><span class="token punctuation">(</span><span class="token class-name">StatusCode</span><span class="token punctuation">.</span>TEMPLATE_ID_EMPTY<span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token punctuation">}</span>
     <span class="token keyword">if</span> <span class="token punctuation">(</span>fileName <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
         fileName <span class="token operator">=</span> file<span class="token punctuation">.</span><span class="token function">getOriginalFilename</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token punctuation">}</span>
     <span class="token class-name">UserInfo</span> info <span class="token operator">=</span> <span class="token class-name">TokenUtil</span><span class="token punctuation">.</span><span class="token function">getUser</span><span class="token punctuation">(</span><span class="token class-name">ServletContextHolder</span><span class="token punctuation">.</span><span class="token function">getRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> propMap <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     propMap<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token class-name">PropFieldConstant</span><span class="token punctuation">.</span>createIp<span class="token punctuation">.</span><span class="token function">getStatus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">IpUtil</span><span class="token punctuation">.</span><span class="token function">getRealIP</span><span class="token punctuation">(</span><span class="token class-name">ServletContextHolder</span><span class="token punctuation">.</span><span class="token function">getRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     propMap<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token class-name">PropFieldConstant</span><span class="token punctuation">.</span>createBy<span class="token punctuation">.</span><span class="token function">getStatus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> info<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     propMap<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token class-name">PropFieldConstant</span><span class="token punctuation">.</span>sectionId<span class="token punctuation">.</span><span class="token function">getStatus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> info<span class="token punctuation">.</span><span class="token function">getSectionId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token class-name">Optional</span><span class="token punctuation">.</span><span class="token function">ofNullable</span><span class="token punctuation">(</span><span class="token function">extraParameter</span><span class="token punctuation">(</span>entity<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ifPresent</span><span class="token punctuation">(</span>propMap<span class="token operator">::</span><span class="token function">putAll</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> map <span class="token operator">=</span> importService<span class="token punctuation">.</span><span class="token function">importData</span><span class="token punctuation">(</span>fileName<span class="token punctuation">,</span> file<span class="token punctuation">.</span><span class="token function">getInputStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> templetId<span class="token punctuation">,</span> <span class="token function">getEntityClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> propMap<span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">RestfulResponse</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>map<span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token punctuation">}</span>


 <span class="token annotation punctuation">@UserDataScope</span>
 <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;export&quot;</span><span class="token punctuation">,</span> method <span class="token operator">=</span> <span class="token class-name">RequestMethod</span><span class="token punctuation">.</span>GET<span class="token punctuation">)</span>
 <span class="token annotation punctuation">@ApiOperation</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;数据导出&quot;</span><span class="token punctuation">)</span>
 <span class="token keyword">public</span> <span class="token class-name">ResponseEntity</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Resource</span><span class="token punctuation">&gt;</span></span> <span class="token function">export</span><span class="token punctuation">(</span><span class="token class-name">T</span> entity<span class="token punctuation">,</span> <span class="token class-name">String</span> templateId<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
     <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">StringUtil</span><span class="token punctuation">.</span><span class="token function">isBlank</span><span class="token punctuation">(</span>templateId<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
         <span class="token class-name">Shift</span><span class="token punctuation">.</span><span class="token function">fatal</span><span class="token punctuation">(</span><span class="token class-name">StatusCode</span><span class="token punctuation">.</span>TEMPLATE_ID_EMPTY<span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token punctuation">}</span>
     <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> service<span class="token punctuation">.</span><span class="token function">findList</span><span class="token punctuation">(</span>entity<span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">StringUtil</span><span class="token punctuation">.</span><span class="token function">isNotEmpty</span><span class="token punctuation">(</span>list<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
         polymerizeDataService<span class="token punctuation">.</span><span class="token function">setNamesByIds</span><span class="token punctuation">(</span>list<span class="token punctuation">,</span> <span class="token function">getResourceCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token punctuation">}</span>
     <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> b <span class="token operator">=</span> exportClient<span class="token punctuation">.</span><span class="token function">exportDataByTemplet</span><span class="token punctuation">(</span>list<span class="token punctuation">,</span> templateId<span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token keyword">return</span> <span class="token class-name">FileDownload</span><span class="token punctuation">.</span><span class="token function">fileDownload</span><span class="token punctuation">(</span>b<span class="token punctuation">,</span> <span class="token function">getFullName</span><span class="token punctuation">(</span><span class="token function">getExportName</span><span class="token punctuation">(</span>entity<span class="token punctuation">)</span><span class="token punctuation">,</span> templateId<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token punctuation">}</span>

 <span class="token annotation punctuation">@Override</span>
 <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getFileSuffix</span><span class="token punctuation">(</span><span class="token class-name">String</span> templateId<span class="token punctuation">)</span> <span class="token punctuation">{</span>
     <span class="token class-name">Objects</span><span class="token punctuation">.</span><span class="token function">requireNonNull</span><span class="token punctuation">(</span>templateId<span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token keyword">return</span> <span class="token class-name">OptionalUtils</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>metadataConfigClient<span class="token punctuation">.</span><span class="token function">getFileSuffix</span><span class="token punctuation">(</span>templateId<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token punctuation">}</span>

 <span class="token annotation punctuation">@SuppressWarnings</span><span class="token punctuation">(</span><span class="token string">&quot;unchecked&quot;</span><span class="token punctuation">)</span>
 <span class="token keyword">private</span> <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token function">getEntityClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
     <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">ParameterizedType</span><span class="token punctuation">)</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getGenericSuperclass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getActualTypeArguments</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
 <span class="token punctuation">}</span>

<span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br></div></div><p>3.业务继承 AbstractController</p> <p><img src="/vuepress-demo/assets/img/image-20200408145603446.e32f63d8.png" alt="image-20200408145603446"></p> <h3 id="_2-3-聚合"><a href="#_2-3-聚合" class="header-anchor">#</a> 2.3 聚合</h3> <p>对于数据之间的聚合我们使用元数据的方式来实现，聚合典型场景为通过名字找 ID、通过 ID 找名字。目前系统支持的方式如下：</p> <ol><li>表达式 HTTP 方式聚合：通过微服务调用方式实现服务聚合</li> <li>表达式 SQL 方式聚合：通过 SQL 直接查询方式</li> <li>字典方式聚合：字典聚合通过调用字典服务聚合</li></ol> <h4 id="_2-3-1-聚合表达式配置"><a href="#_2-3-1-聚合表达式配置" class="header-anchor">#</a> 2.3.1 聚合表达式配置</h4> <table><thead><tr><th>属性</th> <th>属性描述</th></tr></thead> <tbody><tr><td>http</td> <td>http 方式</td></tr> <tr><td>http.import</td> <td>导入聚合</td></tr> <tr><td>http.import.requestUrl</td> <td>http api</td></tr> <tr><td>http.import.requestMethod</td> <td>请求方式 POSG/GET</td></tr> <tr><td>http.import.requestParam</td> <td>请求参数，键值对 JSON 格式，请求参数与实体 BEAN 属性对应关系</td></tr> <tr><td>http.import.isBatch</td> <td>是否批量获取</td></tr> <tr><td>http.import.isObject</td> <td>是否提交对象</td></tr> <tr><td>http.import.responseCheckData</td> <td>响应数据匹配属性 JSON 格式，响应数据与实体 BEAN 属性对应关系</td></tr> <tr><td>http.import.responseDataProp</td> <td>响应数据设置属性 JSON 格式，响应数据与实体 BEAN 属性对应关系</td></tr> <tr><td>http.export</td> <td>导出</td></tr> <tr><td>http.export.requestUrl</td> <td>http api</td></tr> <tr><td>http.export.requestMethod</td> <td>请求方式 POSG/GET</td></tr> <tr><td>http.export.requestParam</td> <td>请求参数，键值对,JSON 格式</td></tr> <tr><td>http.export.isBatch</td> <td>是否批量获取</td></tr> <tr><td>http.export.isObject</td> <td>是否提交对象</td></tr> <tr><td>http.export.responseCheckData</td> <td>响应数据匹配属性 JSON 格式，响应数据与实体 BEAN 属性对应关系</td></tr> <tr><td>http.import.responseDataProp</td> <td>响应数据设置属性 JSON 格式,响应数据与实体 BEAN 属性对应关系</td></tr> <tr><td>sql</td> <td>SQL 方式</td></tr> <tr><td>sql.import</td> <td>导入聚合</td></tr> <tr><td>sql.import.sql</td> <td>SQL 语句</td></tr> <tr><td>sql.import.variable</td> <td>变量，SQL 参数与实体 BEASN 属性对应关系</td></tr> <tr><td>sql.import.responseCheckData</td> <td>响应数据匹配属性 JSON 格式，查询结果与实体 BEAN 对应关系</td></tr> <tr><td>sql.import.responseDataProp</td> <td>响应数据设置属性 JSON 格式，查询结果与实体 BEAN 对应关系</td></tr> <tr><td>sql.export</td> <td>导出聚合</td></tr> <tr><td>sql.export.sql</td> <td>变量，SQL 参数与实体 BEASN 属性对应关系</td></tr> <tr><td>sql.export.variable</td> <td>变量，SQL 参数与实体 BEASN 属性对应关系</td></tr> <tr><td>sql.export.responseCheckData</td> <td>响应数据匹配属性 JSON 格式，查询结果与实体 BEAN 对应关系</td></tr> <tr><td>sql.export.responseDataProp</td> <td>响应数据设置属性 JSON 格式，查询结果与实体 BEAN 对应关系</td></tr></tbody></table> <p><strong>GET</strong></p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;http&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;import&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;requestUrl&quot;</span><span class="token operator">:</span> <span class="token string">&quot;http://base-service/dept/names/ids?name={name}&amp;sectionId={sectionId}&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;rquestMethod&quot;</span><span class="token operator">:</span> <span class="token string">&quot;get&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;requestParam&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;deptName&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;sectionId&quot;</span><span class="token operator">:</span> <span class="token string">&quot;sectionId&quot;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token property">&quot;isBatch&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token property">&quot;isObject&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
      <span class="token property">&quot;responseCheckData&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;deptName&quot;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token property">&quot;responseDataProp&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;deptId&quot;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">&quot;export&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;requestUrl&quot;</span><span class="token operator">:</span> <span class="token string">&quot;http://base-service/dept/ids/names?id={id}&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;rquestMethod&quot;</span><span class="token operator">:</span> <span class="token string">&quot;get&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;requestParam&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;deptId&quot;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token property">&quot;isBatch&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token property">&quot;isObject&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
      <span class="token property">&quot;responseCheckData&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;deptId&quot;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token property">&quot;responseDataProp&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;deptName&quot;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br></div></div><p><strong>POST</strong></p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;http&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;import&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;requestUrl&quot;</span><span class="token operator">:</span> <span class="token string">&quot;http://base-service/dept/names/ids&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;rquestMethod&quot;</span><span class="token operator">:</span> <span class="token string">&quot;post&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;requestParam&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;deptName&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;sectionId&quot;</span><span class="token operator">:</span> <span class="token string">&quot;sectionId&quot;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token property">&quot;isBatch&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token property">&quot;isObject&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
      <span class="token property">&quot;responseCheckData&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;deptName&quot;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token property">&quot;responseDataProp&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;deptId&quot;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">&quot;export&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;requestUrl&quot;</span><span class="token operator">:</span> <span class="token string">&quot;http://base-service/dept/ids/names&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;rquestMethod&quot;</span><span class="token operator">:</span> <span class="token string">&quot;post&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;requestParam&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;deptId&quot;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token property">&quot;isBatch&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token property">&quot;isObject&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
      <span class="token property">&quot;responseCheckData&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;deptId&quot;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token property">&quot;responseDataProp&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;deptName&quot;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br></div></div><p><strong>SQL</strong></p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;sql&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;import&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;sql&quot;</span><span class="token operator">:</span> <span class="token string">&quot;select id,name from goods_factory where name in  (Filter_IN_name) and del_flag=0&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;variable&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;Filter_IN_name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;madeFactoryName&quot;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token property">&quot;responseCheckData&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;madeFactoryName&quot;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token property">&quot;responseDataProp&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;madeFactoryId&quot;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">&quot;export&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;sql&quot;</span><span class="token operator">:</span> <span class="token string">&quot;select  id,name from goods_factory  where id in (Filter_IN_id) and del_flag=0&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;variable&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;Filter_IN_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;madeFactoryId&quot;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token property">&quot;responseCheckData&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;madeFactoryId&quot;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token property">&quot;responseDataProp&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;madeFactoryName&quot;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br></div></div><h4 id="_2-3-2-聚合工具接口"><a href="#_2-3-2-聚合工具接口" class="header-anchor">#</a> 2.3.2 聚合工具接口</h4> <p>聚合工具 togest-cms-core 模块下，聚合工具接口类具体的定义如下，PolymerizeDataServiceImpl 实现该接口类。需要时可直接用@Autowired 注入</p> <p><img src="/vuepress-demo/assets/img/image-20200408091658524.f688fb5c.png" alt="image-20200408091658524"></p> <h4 id="_2-3-3-字典配置"><a href="#_2-3-3-字典配置" class="header-anchor">#</a> 2.3.3 字典配置</h4> <p>通过字典配置实现字典聚合的方式目前系统有两种，分别为元数据定义、注解定义。注解使用在字典的属性上面。目前大部分页面可以通过元数据配置的方式实现，对于某部分业务可通过注解方式实现。</p> <p><strong>元数据定义</strong></p> <p><img src="/vuepress-demo/assets/img/image-20200407171427377.b4d3b6f0.png" alt="image-20200407171427377"></p> <table><thead><tr><th>序号</th> <th>属性</th> <th>描述</th></tr></thead> <tbody><tr><td>1</td> <td>名称</td> <td>元数据描述</td></tr> <tr><td>2</td> <td>属性名</td> <td>用于显示的属性</td></tr> <tr><td>3</td> <td>组件类型</td> <td>字典</td></tr> <tr><td>4</td> <td>属性描述</td> <td>使用的字典名称。</td></tr> <tr><td>5</td> <td>主键属性</td> <td>字典值</td></tr></tbody></table> <p>注意字典值存储方式有两种方式，一种是字典项 ID、另外一种是字典项编码值。两种方式通过字典名称区分，使用字典编码值的统一使用&quot;busy_&quot;开头。</p> <p><strong>字典属性注解定义，用于实体中字典属性列上</strong></p> <p><img src="/vuepress-demo/assets/img/image-20200407172118815.af537a04.png" alt="image-20200407172118815"></p> <table><thead><tr><th>属性</th> <th>描述</th></tr></thead> <tbody><tr><td>itemName</td> <td>字典属性名,对应元数据主键属性</td></tr> <tr><td>dictName</td> <td>字典名称，对应元数据属性描述</td></tr> <tr><td>primaryKey</td> <td>默认“id”</td></tr></tbody></table> <p>注意字典值存储方式有两种方式，一种是字典项 ID、另外一种是字典项编码值。注解 primaryKey 取值为 id/code。默认使用 id</p> <p><strong>字典聚合注解定义，用于 Service 中，利用 DictMark 及切面实现字典名称的自动聚合</strong></p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Retention</span><span class="token punctuation">(</span><span class="token class-name">RetentionPolicy</span><span class="token punctuation">.</span>RUNTIME<span class="token punctuation">)</span>
<span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token class-name">ElementType</span><span class="token punctuation">.</span>METHOD <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">DictAggregation</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h4 id="_2-4-2-字典工具"><a href="#_2-4-2-字典工具" class="header-anchor">#</a> 2.4.2 字典工具</h4> <p>字典工具 togest-cms-dict-client 模块下，聚合工具接口类具体的定义如下，DictionaryCliet 类。需要时可直接用@Autowired 注入</p> <p>1、功能描述：聚合名称。通过类字典属性注解@DictMark 实现</p> <p>输入：集合</p> <p>输出：无</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token keyword">void</span> <span class="token function">setByName</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> data<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>2、 功能描述：聚合名称。通过字典定义类</p> <p>输入：集合，字典定义类</p> <p>输出：无</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token keyword">void</span> <span class="token function">setByName</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> data<span class="token punctuation">,</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">DictAnntation</span><span class="token punctuation">&gt;</span></span> annotationList<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>3、功能描述：聚合 ID 或 CODE，由 DictMark 的 primaryKey 决定。通过类字典属性注解@DictMark 实现</p> <p>输入：集合</p> <p>输出：无</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token keyword">void</span> <span class="token function">setById</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> data<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>4、 功能描述：聚合 ID 或 CODE，由 DictAnntation 的 label 决定。</p> <p>输入：集合</p> <p>输出：无</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token keyword">void</span> <span class="token function">setById</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> data<span class="token punctuation">,</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">DictAnntation</span><span class="token punctuation">&gt;</span></span> annotationList<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>5、 功能描述：获取字典的字典项配置</p> <p>输入：字典名称聚合</p> <p>输出：按照字典名组成的 MAP，VALUE 中存储的是按照 CODE、NAME 组成的 MAP</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Map</span><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> <span class="token function">fetchItemCodeByDictName</span><span class="token punctuation">(</span><span class="token class-name">Collection</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> dictList<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>6、 功能描述：获取字典的字典项配置</p> <p>输入：字典名称集合</p> <p>输出：按照字典名组成的 MAP</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">List</span><span class="token punctuation">&lt;</span><span class="token class-name">DictionaryItemDTO</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> <span class="token function">fetchItemByDictName</span><span class="token punctuation">(</span><span class="token class-name">Collection</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> dictList<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>7、功能描述：字典注解转换字典定义</p> <p>输入：实体 Class</p> <p>输出：字典定义集合</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">DictAnntation</span><span class="token punctuation">&gt;</span></span> <span class="token function">getAnnotationInfo</span><span class="token punctuation">(</span><span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> c<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>8、功能描述：字典定义 DictAnntation</p> <table><thead><tr><th>序号</th> <th>属性名称</th> <th>描述</th></tr></thead> <tbody><tr><td>1</td> <td>dictName</td> <td>字典名称,对应元数据配置的属性描述列，对应注解的 dictName</td></tr> <tr><td>2</td> <td>dictProp</td> <td>字典值属性，对应元数据主键属性，对应注解的 itemName</td></tr> <tr><td>3</td> <td>dictShowProp</td> <td>字典显示属性,对应元数据显示属性，对于直接在 dictProp 基础上最后拼接&quot;Name&quot;，形成显示属性名</td></tr> <tr><td>4</td> <td>label</td> <td>标签。使用 busy_开头字典项，自动设置“code”，否则“id”</td></tr></tbody></table> <p>9、功能描述：字典注解实现字典名称自动聚合</p> <p><img src="/vuepress-demo/assets/img/image-20200408101550023.03651433.png" alt="image-20200408101550023"></p> <h3 id="_2-4-导入导出"><a href="#_2-4-导入导出" class="header-anchor">#</a> 2.4 导入导出</h3> <p>平台导入导出实现方案有以下三种：</p> <p>1)基于元数据，上传模板，动态解析 excel，计算出列与属性关系</p> <p>2)自定义模板。通过占位符的方式配置导入导出模板</p> <p>3)word 模板。通过 ftl 方式上传模板</p> <h4 id="_2-4-1-数据模型"><a href="#_2-4-1-数据模型" class="header-anchor">#</a> 2.4 .1 数据模型</h4> <p><strong>excel 模板主表</strong></p> <table><thead><tr><th>序号</th> <th>列</th> <th>描述</th></tr></thead> <tbody><tr><td>1</td> <td>id</td> <td></td></tr> <tr><td>2</td> <td>name</td> <td>模板名称</td></tr> <tr><td>3</td> <td>file_id</td> <td>附件 ID</td></tr> <tr><td>4</td> <td>association_resources_ids</td> <td>关联多个元数据 ID。不关联资源时，表现为自定义模板,自定义模板不创建明细表</td></tr> <tr><td>5</td> <td>association_data</td> <td>关联业务元数据编码</td></tr> <tr><td>6</td> <td>tag</td> <td>列表/详情</td></tr> <tr><td>6</td> <td>data_tag</td> <td>导入/导出/导入导出</td></tr></tbody></table> <p><strong>excel 模板明细</strong></p> <table><thead><tr><th>序号</th> <th>列</th> <th>描述</th></tr></thead> <tbody><tr><td>1</td> <td>import_excel_config_id</td> <td>模板 ID</td></tr> <tr><td>2</td> <td>excel_name</td> <td>列中元数据属性编码</td></tr> <tr><td>3</td> <td>coordinates</td> <td>模板中 excel 行、列</td></tr> <tr><td>4</td> <td>property_resources_id</td> <td>关联元数据属性 ID</td></tr> <tr><td>5</td> <td>table_header_name</td> <td>列标题</td></tr></tbody></table> <p><strong>excel 模板配置</strong></p> <p><img src="sc.assets/image-20200408170357557.png" alt="image-20200408170357557"></p> <p><strong>excel 自定义模板配置</strong></p> <p><img src="/vuepress-demo/assets/img/image-20200408170433386.beab85f3.png" alt="image-20200408170433386"></p> <p><strong>word 模板</strong></p> <table><thead><tr><th>序号</th> <th>列</th> <th>属性</th></tr></thead> <tbody><tr><td>1</td> <td>name</td> <td>ftl 模板名称</td></tr> <tr><td>2</td> <td>file_id</td> <td>附件 ID</td></tr> <tr><td>3</td> <td>sys_resources_id</td> <td>关联元数据 ID</td></tr> <tr><td>4</td> <td>code</td> <td>关联元数据编码</td></tr></tbody></table> <p><strong>Word 模板配置</strong></p> <p><img src="/vuepress-demo/assets/img/image-20200408170519480.baf8facc.png" alt="image-20200408170519480"></p> <h4 id="_2-4-2-导入"><a href="#_2-4-2-导入" class="header-anchor">#</a> 2.4 .2 导入</h4> <p>平台业务导入通过针对某一元数据上传 EXCEL 模板，建立一个模板与元数据的关联关系，前端通过选择模板及上传的导入附件一起带入到后台，输入到导入业务逻辑中。</p> <p>针对平台的导入应用我们设计并开发了通用的 ConfigExcelImportService、ConfigExcelImportServiceImpl，供业务继承。ConfigExcelImportServiceImpl 导入的思想如下：</p> <ol><li>利用 ImportClient 实现文件到 MAP 集合的解析。如果解析出错，则给出提示</li> <li>解析 EXCEL 中是否有图片列</li> <li>MAP 至实体转换</li> <li>设置实体的一些其它需要设置的属性。业务可重载</li> <li>通过元数据属性表达式，关联聚合其它属性，一般业务会出现名字转换 ID 过程。业务可重载</li> <li>校验。通过元数据的属性必填，校验数据是否空，返回 QualitityData 集合数据，业务可重载</li> <li>设置 QualitityData 的行和列，采用 EXCEL 中原数据行和列，业务可重载</li> <li>唯一性判断。通过元数据的判重字段，进行唯一性判断，业务可重载。如果唯一性判断存在，则会将 ID 附上值，用于更新操作</li> <li>上传图片。针对 2 中的结果，进行图片上传处理</li> <li>生成提示。业务可重载</li> <li>调用子类保存方法，业务可重载</li> <li>生成错误提示，业务可重载</li></ol> <p>togest-cms-core 模块中定义了导入 ConfigExcelImportService、ConfigExcelImportServiceImpl 类，详细的定义如下：</p> <div class="language-Java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">ConfigExcelImportService</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>

    <span class="token comment">/**
     * 导入接口
     *
     * @param originalFilename 文件名
     * @param inputStream      文件流
     * @param templetId        模板id
     * @param clazz            转换的类
     * @param propValue        往数据中封装的数据
     */</span>
    <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> <span class="token function">importData</span><span class="token punctuation">(</span><span class="token class-name">String</span> originalFilename<span class="token punctuation">,</span> <span class="token class-name">InputStream</span> inputStream<span class="token punctuation">,</span> <span class="token class-name">String</span> templetId<span class="token punctuation">,</span> <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> clazz<span class="token punctuation">,</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> propValue<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">/**
     * 压缩文件导入接口
     * @param originalFilename
     * @param inputStream
     * @param templetId
     * @param clazz
     * @param propValue
     * @return
     */</span>
    <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> <span class="token function">importCompressData</span><span class="token punctuation">(</span><span class="token class-name">String</span> originalFilename<span class="token punctuation">,</span> <span class="token class-name">InputStream</span> inputStream<span class="token punctuation">,</span> <span class="token class-name">String</span> templetId<span class="token punctuation">,</span> <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> clazz<span class="token punctuation">,</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> propValue<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">/**
     * 压缩文件导入接口
     * @param originalFilename
     * @param inputStream
     * @param templetId
     * @param clazz
     * @param propValue
     * @return
     */</span>
    <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> <span class="token function">importCompressData</span><span class="token punctuation">(</span><span class="token class-name">String</span> originalFilename<span class="token punctuation">,</span> <span class="token class-name">InputStream</span> inputStream<span class="token punctuation">,</span> <span class="token class-name">String</span> templetId<span class="token punctuation">,</span> <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> clazz<span class="token punctuation">,</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> propValue<span class="token punctuation">,</span> <span class="token keyword">boolean</span> isResource<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">/**
     * 导入接口
     *
     * @param originalFilename 文件名
     * @param inputStream      文件流
     * @param templetId        模板id
     * @param clazz            转换的类
     * @param propValue        往数据中封装的数据
     * @param isResource       是否补充资源项，默认是false
     */</span>
    <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> <span class="token function">importData</span><span class="token punctuation">(</span><span class="token class-name">String</span> originalFilename<span class="token punctuation">,</span> <span class="token class-name">InputStream</span> inputStream<span class="token punctuation">,</span> <span class="token class-name">String</span> templetId<span class="token punctuation">,</span> <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> clazz<span class="token punctuation">,</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> propValue<span class="token punctuation">,</span> <span class="token keyword">boolean</span> isResource<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">/**
     * 导入接口
     */</span>
    <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> <span class="token function">importData</span><span class="token punctuation">(</span><span class="token class-name">String</span> originalFilename<span class="token punctuation">,</span> <span class="token class-name">InputStream</span> inputStream<span class="token punctuation">,</span> <span class="token class-name">String</span> templetId<span class="token punctuation">,</span> <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> clazz<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">/**
     * 导入接口
     * @param isResource	是否补充资源项，默认是false
     */</span>
    <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> <span class="token function">importData</span><span class="token punctuation">(</span><span class="token class-name">String</span> originalFilename<span class="token punctuation">,</span> <span class="token class-name">InputStream</span> inputStream<span class="token punctuation">,</span> <span class="token class-name">String</span> templetId<span class="token punctuation">,</span> <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> clazz<span class="token punctuation">,</span> <span class="token keyword">boolean</span> isResource<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">/**
     * 聚合数据
     */</span>
    <span class="token keyword">void</span> <span class="token function">associate</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> dataList<span class="token punctuation">,</span> <span class="token class-name">SystemResoucesResponse</span> resourcesResponse<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">/**
     * 设置数据
     */</span>
    <span class="token keyword">void</span> <span class="token function">setPropData</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> dataList<span class="token punctuation">,</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> propValue<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">/**
     * 配置检测数据
     */</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">QualitityData</span><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> <span class="token function">check</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> dataList<span class="token punctuation">,</span> <span class="token class-name">SystemResoucesResponse</span> resourcesResponse<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">/**
     * 通过资源配置判重条件进行基础的校验判重
     */</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">QualitityData</span><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> <span class="token function">unique</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">QualitityData</span><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> dataList<span class="token punctuation">,</span> <span class="token class-name">SystemResoucesResponse</span> resourcesResponse<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">/**
     * 导出错误数据和数据提示
     */</span>
    <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">report</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">QualitityData</span><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> qualitityList<span class="token punctuation">,</span> <span class="token class-name">String</span> templetId<span class="token punctuation">,</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">,</span> <span class="token class-name">List</span><span class="token punctuation">&lt;</span><span class="token class-name">FileBatchData</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> photoMap<span class="token punctuation">,</span> <span class="token class-name">String</span> errorMsg<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">/**
     * 数据保存
     */</span>
    <span class="token keyword">void</span> <span class="token function">save</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">QualitityData</span><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> dataList<span class="token punctuation">,</span> <span class="token class-name">SystemResoucesResponse</span> resourcesResponse<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">Boolean</span> <span class="token function">save</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">QualitityData</span><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> dataList<span class="token punctuation">,</span> <span class="token class-name">SystemResoucesResponse</span> resources<span class="token punctuation">,</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> map<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br></div></div><p>togest-cms-code-client 模块中定义了 ImportClient 类，完成模板的解析及 MAP 集合的封装。togest-code-client 依赖 togest-cms-code-util 模块</p> <div class="language-Java line-numbers-mode"><pre class="language-java"><code>
<span class="token annotation punctuation">@Service</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ImportClient</span> <span class="token punctuation">{</span>

	<span class="token annotation punctuation">@Autowired</span>
	<span class="token keyword">private</span> <span class="token class-name">ImportConfigClient</span> configClient<span class="token punctuation">;</span>
	<span class="token annotation punctuation">@Autowired</span>
	<span class="token keyword">private</span> <span class="token class-name">MetadataConfigClient</span> metadataClient<span class="token punctuation">;</span>

	<span class="token comment">/**
	 * 通过模板解析数据
	 *
	 * @param fileName
	 * @param in
	 * @param importExcelConfigId
	 *            模板id
	 * @return
	 * @throws Exception
	 */</span>
	<span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Map</span><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> <span class="token function">analyzeExcelData</span><span class="token punctuation">(</span><span class="token class-name">String</span> fileName<span class="token punctuation">,</span> <span class="token class-name">InputStream</span> in<span class="token punctuation">,</span> <span class="token class-name">String</span> importExcelConfigId<span class="token punctuation">)</span>
			<span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">analyzeExcelData</span><span class="token punctuation">(</span>fileName<span class="token punctuation">,</span> in<span class="token punctuation">,</span> importExcelConfigId<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Map</span><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> <span class="token function">analyzeExcelData</span><span class="token punctuation">(</span><span class="token class-name">String</span> fileName<span class="token punctuation">,</span> <span class="token class-name">InputStream</span> in<span class="token punctuation">,</span> <span class="token class-name">String</span> importExcelConfigId<span class="token punctuation">,</span><span class="token keyword">boolean</span> isPhotoLink<span class="token punctuation">)</span>
			<span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">analyzeExcelData</span><span class="token punctuation">(</span>fileName<span class="token punctuation">,</span> in<span class="token punctuation">,</span> importExcelConfigId<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> isPhotoLink<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token comment">/**
	 * 通过模板解析数据
	 *
	 * @param fileName
	 * @param in
	 * @param importExcelConfigId
	 *            模板id
	 * @param sheetIndex
	 *            从sheet的值开始解析
	 * @return
	 * @throws Exception
	 */</span>

	<span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Map</span><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> <span class="token function">analyzeExcelData</span><span class="token punctuation">(</span><span class="token class-name">String</span> fileName<span class="token punctuation">,</span> <span class="token class-name">InputStream</span> in<span class="token punctuation">,</span> <span class="token class-name">String</span> importExcelConfigId<span class="token punctuation">,</span>
			<span class="token keyword">int</span> sheetIndex<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token function">analyzeExcelData</span><span class="token punctuation">(</span>fileName<span class="token punctuation">,</span> in<span class="token punctuation">,</span> importExcelConfigId<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Map</span><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> <span class="token function">analyzeExcelData</span><span class="token punctuation">(</span><span class="token class-name">String</span> fileName<span class="token punctuation">,</span> <span class="token class-name">InputStream</span> in<span class="token punctuation">,</span> <span class="token class-name">String</span> importExcelConfigId<span class="token punctuation">,</span>
			<span class="token keyword">int</span> sheetIndex<span class="token punctuation">,</span> <span class="token keyword">boolean</span> isPhotoLink<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span><span class="token punctuation">{</span>
		<span class="token class-name">RestfulResponse</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">ImportExcelConfigResponse</span><span class="token punctuation">&gt;</span></span> config <span class="token operator">=</span> configClient
				<span class="token punctuation">.</span><span class="token function">getImportExcelConfigResponse</span><span class="token punctuation">(</span>importExcelConfigId<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>config <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> config<span class="token punctuation">.</span><span class="token function">getData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token class-name">ExcelImportUtil</span><span class="token punctuation">.</span><span class="token function">analyzeExcelData</span><span class="token punctuation">(</span>fileName<span class="token punctuation">,</span> in<span class="token punctuation">,</span> config<span class="token punctuation">.</span><span class="token function">getData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getCof</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> config<span class="token punctuation">.</span><span class="token function">getData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
					sheetIndex<span class="token punctuation">,</span>isPhotoLink<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
	<span class="token comment">/**
	 * 通过模板解析数据对数据封装
	 *
	 * @param fileName
	 * @param in
	 * @param importExcelConfigId
	 *            模板id
	 * @param sheetIndex
	 *            从sheet的值开始解析
	 * @return
	 * @throws Exception
	 */</span>
	<span class="token keyword">public</span> <span class="token class-name">ParseDataResponse</span> <span class="token function">pareseData</span><span class="token punctuation">(</span><span class="token class-name">String</span> fileName<span class="token punctuation">,</span> <span class="token class-name">InputStream</span> in<span class="token punctuation">,</span> <span class="token class-name">String</span> importExcelConfigId<span class="token punctuation">,</span> <span class="token keyword">int</span> sheetIndex<span class="token punctuation">)</span>
			<span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
		<span class="token class-name">RestfulResponse</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">ImportExcelConfigResponse</span><span class="token punctuation">&gt;</span></span> config <span class="token operator">=</span> configClient
				<span class="token punctuation">.</span><span class="token function">getImportExcelConfigResponse</span><span class="token punctuation">(</span>importExcelConfigId<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>config <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> config<span class="token punctuation">.</span><span class="token function">getData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token class-name">ExcelImportUtil</span><span class="token punctuation">.</span><span class="token function">pareseData</span><span class="token punctuation">(</span>fileName<span class="token punctuation">,</span> in<span class="token punctuation">,</span> config<span class="token punctuation">.</span><span class="token function">getData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getCof</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> config<span class="token punctuation">.</span><span class="token function">getData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>

	<span class="token comment">/**
	 * 通过定义属性解析封装数据
	 *
	 * @param properties
	 * @param fileName
	 * @param in
	 * @param startRow（从某行开始解析）
	 * @return
	 */</span>
	<span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Map</span><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> <span class="token function">importBaseData</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> properties<span class="token punctuation">,</span> <span class="token class-name">String</span> fileName<span class="token punctuation">,</span> <span class="token class-name">InputStream</span> in<span class="token punctuation">,</span>
			<span class="token keyword">int</span> startRow<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token class-name">ExcelImportUtil</span><span class="token punctuation">.</span><span class="token function">importBaseData</span><span class="token punctuation">(</span>properties<span class="token punctuation">,</span> fileName<span class="token punctuation">,</span> in<span class="token punctuation">,</span> startRow<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Map</span><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Map</span><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> <span class="token function">analyzeExcelDetailMoreData</span><span class="token punctuation">(</span><span class="token class-name">String</span> fileName<span class="token punctuation">,</span> <span class="token class-name">InputStream</span> in<span class="token punctuation">,</span>
			<span class="token class-name">String</span> importExcelConfigId<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
		<span class="token class-name">RestfulResponse</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">ImportExcelConfigResponse</span><span class="token punctuation">&gt;</span></span> configResult <span class="token operator">=</span> configClient
				<span class="token punctuation">.</span><span class="token function">getImportExcelConfigResponse</span><span class="token punctuation">(</span>importExcelConfigId<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>configResult <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> configResult<span class="token punctuation">.</span><span class="token function">getData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token class-name">ImportExcelConfigResponse</span> config <span class="token operator">=</span> configResult<span class="token punctuation">.</span><span class="token function">getData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token class-name">RestfulResponse</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">List</span><span class="token punctuation">&lt;</span><span class="token class-name">SystemResourcesDTO</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> resouces <span class="token operator">=</span> metadataClient
					<span class="token punctuation">.</span><span class="token function">getSystemPropertyResources</span><span class="token punctuation">(</span><span class="token class-name">StringUtil</span><span class="token punctuation">.</span><span class="token function">stringToList</span><span class="token punctuation">(</span>config<span class="token punctuation">.</span><span class="token function">getCof</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getAssociationResourcesIds</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token keyword">return</span> <span class="token class-name">ExcelImportUtil</span><span class="token punctuation">.</span><span class="token function">analyzeExcelDetailMoreData</span><span class="token punctuation">(</span>fileName<span class="token punctuation">,</span> in<span class="token punctuation">,</span> config<span class="token punctuation">.</span><span class="token function">getCof</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> config<span class="token punctuation">.</span><span class="token function">getList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
					resouces<span class="token punctuation">.</span><span class="token function">getData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">List</span><span class="token punctuation">&lt;</span><span class="token class-name">Map</span><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> <span class="token function">analyzeExcelData</span><span class="token punctuation">(</span><span class="token class-name">String</span> fileName<span class="token punctuation">,</span> <span class="token class-name">InputStream</span> in<span class="token punctuation">,</span>
			<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> importExcelConfigIds<span class="token punctuation">,</span><span class="token keyword">int</span> startSheet<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
		<span class="token class-name">RestfulResponse</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">List</span><span class="token punctuation">&lt;</span><span class="token class-name">ImportExcelConfigResponse</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> config <span class="token operator">=</span> configClient
				<span class="token punctuation">.</span><span class="token function">getImportExcelConfigResponse</span><span class="token punctuation">(</span>importExcelConfigIds<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>config <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> config<span class="token punctuation">.</span><span class="token function">getData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token class-name">ExcelImportUtil</span><span class="token punctuation">.</span><span class="token function">analyzeExcelData</span><span class="token punctuation">(</span>fileName<span class="token punctuation">,</span> in<span class="token punctuation">,</span> config<span class="token punctuation">.</span><span class="token function">getData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">List</span><span class="token punctuation">&lt;</span><span class="token class-name">Map</span><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> <span class="token function">analyzeExcelData</span><span class="token punctuation">(</span><span class="token class-name">String</span> fileName<span class="token punctuation">,</span> <span class="token class-name">InputStream</span> in<span class="token punctuation">,</span>
			<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> importExcelConfigIds<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token function">analyzeExcelData</span><span class="token punctuation">(</span>fileName<span class="token punctuation">,</span> in<span class="token punctuation">,</span> importExcelConfigIds<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

<span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br><span class="line-number">120</span><br><span class="line-number">121</span><br><span class="line-number">122</span><br><span class="line-number">123</span><br><span class="line-number">124</span><br><span class="line-number">125</span><br></div></div><p>给水专业日计划导入，继承了通用导入接口及实现类，并重写了 save 方法</p> <p><img src="/vuepress-demo/assets/img/image-20200408165501302.b2b01c36.png" alt="image-20200408165501302"></p> <p><img src="/vuepress-demo/assets/img/image-20200408165535720.988e0148.png" alt="image-20200408165535720"></p> <h4 id="_2-4-3-导出"><a href="#_2-4-3-导出" class="header-anchor">#</a> 2.4 .3 导出</h4> <p>EXCEL 导出支持元数据模板、占位符自定义模板两种导出方式，Word 导出通过 ftl 模板引擎导出。在 togest-cms-code-client 中定义了 ExportClient 类，实现 Excel 的导出。</p> <table><thead><tr><th>序号</th> <th>方法</th> <th>描述</th></tr></thead> <tbody><tr><td>1</td> <td>ExportClient.exportByConfigure</td> <td>用户自定义配置导出</td></tr> <tr><td>2</td> <td>ExportClient.exportByMapConfigure</td> <td>用户自定义配置导出（Map）</td></tr> <tr><td>3</td> <td>ExportClient.exportByMapDynamicData</td> <td>动态表头列表数据导出(模板中需要标记表头开始位置数据要以 TG 开头)</td></tr> <tr><td>4</td> <td>ExportClient.exportByMapDynamicMerge</td> <td>动态合并表头列表数据导出(模板中需要标记表头开始位置数据要以 TG 开头)</td></tr> <tr><td>5</td> <td>ExportClient.exportByMapPlugIn</td> <td>前端插件选项导出（Map）</td></tr> <tr><td>6</td> <td>ExportClient.exportByPlugIn</td> <td>前端插件选项导出</td></tr> <tr><td>7</td> <td>ExportClient.exportConfigData</td> <td>用户自定义导出 不处理图片</td></tr> <tr><td>8</td> <td>ExportClient.exportCoustomDataByTemplate</td> <td>自定义数据导出</td></tr> <tr><td>9</td> <td>ExportClient.exportDataByMapLocalTemplet</td> <td>模板导出(图片本地服务下载)</td></tr> <tr><td>10</td> <td>ExportClient.exportDataByMapTemplet</td> <td>导出列表数据（Map）</td></tr> <tr><td>11</td> <td>ExportClient.exportDataByTemplet</td> <td>导出列表数据</td></tr> <tr><td>12</td> <td>ExportClient.exportDataDetailByTemplet</td> <td>详情数据导出</td></tr> <tr><td>13</td> <td>ExportClient.exportDataDetailColumnByTemplet</td> <td>导出列表和详情数据</td></tr> <tr><td>14</td> <td>exportDataDetailColumnMoreSheetByTemplet</td> <td>导出列表数据（多 sheet）</td></tr> <tr><td>15</td> <td>ExportClient.exportDataMoreSheetByMapTemplet</td> <td>导出列表数据（多 sheet）（Map）</td></tr> <tr><td>16</td> <td>ExportClient.exportDataMoreSheetByTemplet</td> <td>导出列表数据（多 sheet）</td></tr> <tr><td>17</td> <td>ExportClient.exportDataMoreSheetTitleByTemplet</td> <td>导出多个 sheet 列表数据</td></tr> <tr><td>18</td> <td>ExportClient.exportDetailByTemplet</td> <td>详情数据导出(多个 sheet)</td></tr> <tr><td>19</td> <td>ExportClient.exportFilePathByMapLocalTemplet</td> <td>模板导出(图片本地服务下载)（Map）</td></tr> <tr><td>20</td> <td>ExportClient.exportFilePathByTemplet</td> <td>模板导出(图片本地服务下载)</td></tr> <tr><td>21</td> <td>ExportClient.wordDocxExport</td> <td>wordDocx 文档导出</td></tr> <tr><td>22</td> <td>ExportClient.wordExport</td> <td>word 文档导出</td></tr></tbody></table> <p><strong>1、功能描述：用户自定义配置导出</strong></p> <p><strong>输入：</strong></p> <table><thead><tr><th style="text-align:left;">属性</th> <th>类型</th> <th>描述</th> <th>是否必填</th></tr></thead> <tbody><tr><td style="text-align:left;">entityList</td> <td><code>List&lt;T&gt;</code></td> <td>集合（实体）</td> <td>必填</td></tr> <tr><td style="text-align:left;">systemResourcesCode</td> <td>String</td> <td>资源码</td> <td>必填</td></tr> <tr><td style="text-align:left;">userId</td> <td>String</td> <td>用户 Id（用户没有配置，默认资源配置的导出）</td> <td>必填</td></tr></tbody></table> <p>**输出：**byte[] 字节数组</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">exportByConfigure</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> entityList<span class="token punctuation">,</span> <span class="token class-name">String</span> systemResourcesCode<span class="token punctuation">,</span> <span class="token class-name">String</span> userId<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAABSMAAACICAYAAAAcVf42AAAfY0lEQVR4nO3dX4geV/nA8efdXQ0qZm3KT6mW1mIbaoNYaXoRxYJWClIVLy1Ir6RgFZf1QlLQbkovule+jQQvciNEMHhn1W1rIAqFEi+2GFxCbFoiSEODlsRNCrFmd+d3IZPMnp3zb2bOnHNmvh8I2X3f+XP2nOc9M/O858xMVldXiwceeEDG5uGHH5aTJ086/657Ddu99tprcvvtt8cuRiM/+MEPZHFxUe666y55/PHH5dixY9vev3z5svzwhz+UX/ziF3L+/Hl5/vnn5Wc/+1nj/S0sLMjly5e3vXbLLbfI4cOHZWFhQT70oQ/Jd77zHfn4xz8ux44dk7/85S/y/ve/Xw4fPmzc7ltvvSVj/EwDAAAAAID0zcUuAJCKq1evym233Vb73rVr1+Sll16Sffv2iYjIbbfdJu+++26r/ZVJxaeffloOHDggX/3qV7e998c//lF++ctfyszMjMzPz8vy8rLMz8+32icAAAAAAEBMJCPh7ejRoztee+KJJyKUpFsf/vCH5e2335a77rpLREQef/zxbe9/8IMflJ/+9KciIvL222/Lnj17Wu/zvffek3/84x879iUi8sUvflF+/etfy6233ioHDx6U973vfa33BwAAAAAAENOok5EPP/yw9r2TJ0/ueJ8p2v/zxBNPbEtIDiERKSJy7733yuuvv34jGVmdpr2xsSHPPvus/PnPf5Yvf/nLcu7cOdm7d2/rff7973+XyWQid95554733nnnHfnvf/8r+/fvJxEJAAAAAAAGYSZ2AWI6efLkjX+2ZbBdmYAcSiJSROTRRx+VF198UdbX1+UjH/nItvfm5ubke9/7nrzwwgvyzjvvyG9/+1s5cOBA632++eab8slPfnJHsnFra0uOHj0qd9xxh6yurrbeDwAAAAAAQApGnYw0UR9WUzdScuyGlIgUEbnzzjvlS1/6kvz85z+XZ599dsf7H/3oR2VpaUmOHj0qH/vYx+T48eNy5cqVVvt8/fXX5e67797x+ksvvSTXrl2TgwcPyn/+8x85e/Zsq/0AAAAAAACkgGQkUPGNb3xDPv3pT8tPfvITefnll+X8+fNy7do1OX/+vLz88svy4x//WK5fvy5PP/20fP7zn5fl5eXGCcl//vOf8te//lU++9nP3njt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" alt="1586487995672"></p> <p><strong>2、功能描述：用户自定义配置导出（Map）</strong></p> <p><strong>输入：</strong></p> <table><thead><tr><th>属性</th> <th>类型</th> <th>描述</th> <th>是否必填</th></tr></thead> <tbody><tr><td>list</td> <td><code>List&lt;Map&lt;String, Object&gt;&gt;</code></td> <td>集合（map）</td> <td>必填</td></tr> <tr><td>systemResourcesCode</td> <td>String</td> <td>资源码</td> <td>必填</td></tr> <tr><td>userId</td> <td>String</td> <td>用户 Id（用户没有配置，默认资源配置的导出）</td> <td>必填</td></tr></tbody></table> <p>**输出：**byte[] 字节数组</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">exportByMapConfigure</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Map</span><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> list<span class="token punctuation">,</span> <span class="token class-name">String</span> systemResourcesCode<span class="token punctuation">,</span> <span class="token class-name">String</span> userId<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAABSMAAACICAYAAAAcVf42AAAfY0lEQVR4nO3dX4geV/nA8efdXQ0qZm3KT6mW1mIbaoNYaXoRxYJWClIVLy1Ir6RgFZf1QlLQbkovule+jQQvciNEMHhn1W1rIAqFEi+2GFxCbFoiSEODlsRNCrFmd+d3IZPMnp3zb2bOnHNmvh8I2X3f+XP2nOc9M/O858xMVldXiwceeEDG5uGHH5aTJ086/657Ddu99tprcvvtt8cuRiM/+MEPZHFxUe666y55/PHH5dixY9vev3z5svzwhz+UX/ziF3L+/Hl5/vnn5Wc/+1nj/S0sLMjly5e3vXbLLbfI4cOHZWFhQT70oQ/Jd77zHfn4xz8ux44dk7/85S/y/ve/Xw4fPmzc7ltvvSVj/EwDAAAAAID0zcUuAJCKq1evym233Vb73rVr1+Sll16Sffv2iYjIbbfdJu+++26r/ZVJxaeffloOHDggX/3qV7e998c//lF++ctfyszMjMzPz8vy8rLMz8+32icAAAAAAEBMJCPh7ejRoztee+KJJyKUpFsf/vCH5e2335a77rpLREQef/zxbe9/8IMflJ/+9KciIvL222/Lnj17Wu/zvffek3/84x879iUi8sUvflF+/etfy6233ioHDx6U973vfa33BwAAAAAAENOok5EPP/yw9r2TJ0/ueJ8p2v/zxBNPbEtIDiERKSJy7733yuuvv34jGVmdpr2xsSHPPvus/PnPf5Yvf/nLcu7cOdm7d2/rff7973+XyWQid95554733nnnHfnvf/8r+/fvJxEJAAAAAAAGYSZ2AWI6efLkjX+2ZbBdmYAcSiJSROTRRx+VF198UdbX1+UjH/nItvfm5ubke9/7nrzwwgvyzjvvyG9/+1s5cOBA632++eab8slPfnJHsnFra0uOHj0qd9xxh6yurrbeDwAAAAAAQApGnYw0UR9WUzdScuyGlIgUEbnzzjvlS1/6kvz85z+XZ599dsf7H/3oR2VpaUmOHj0qH/vYx+T48eNy5cqVVvt8/fXX5e67797x+ksvvSTXrl2TgwcPyn/+8x85e/Zsq/0AAAAAAACkgGQkUPGNb3xDPv3pT8tPfvITefnll+X8+fNy7do1OX/+vLz88svy4x//WK5fvy5PP/20fP7zn5fl5eXGCcl//vOf8te//lU++9nP3njt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" alt="1586487995672"></p> <p><strong>3、功能描述：动态表头列表数据导出(模板中需要标记表头开始位置数据要以 TG 开头)</strong></p> <p><strong>输入：</strong></p> <table><thead><tr><th>属性</th> <th>类型</th> <th>描述</th> <th>是否必填</th></tr></thead> <tbody><tr><td>templetId</td> <td>String</td> <td>模板 id</td> <td>必填</td></tr> <tr><td>entityList</td> <td><code>List&lt;Map&lt;String, Object&gt;&gt;</code></td> <td>集合（map）</td> <td>必填</td></tr> <tr><td>headerList</td> <td><code>List&lt;ExcelHeaderData&gt;</code></td> <td>集合（表头实体）</td> <td>必填</td></tr></tbody></table> <p>ExcelHeaderData 实体属性描述</p> <table><thead><tr><th>属性</th> <th>类型</th> <th>描述</th></tr></thead> <tbody><tr><td>headerName</td> <td>String</td> <td>表头名称（必填）</td></tr> <tr><td>fieldName</td> <td>String</td> <td>表数据对应的字段属性（即是 Map 对象中的 key 值）（必填）</td></tr> <tr><td>flag</td> <td>String</td> <td>处理图片数据对应值：photo（选填）</td></tr></tbody></table> <p>MyPictureData 图片数据对象</p> <table><thead><tr><th>属性</th> <th>类型</th> <th>描述</th></tr></thead> <tbody><tr><td>pictureData</td> <td>byte[]</td> <td>图片数据（必填）</td></tr> <tr><td>row</td> <td>int</td> <td>行号（选填）</td></tr> <tr><td>column</td> <td>int</td> <td>列号（选填）</td></tr> <tr><td>width</td> <td>int</td> <td>宽度（选填）</td></tr> <tr><td>height</td> <td>int</td> <td>高度（选填）</td></tr> <tr><td>fileName</td> <td>String</td> <td>文件名（必填）</td></tr></tbody></table> <p>**输出：**byte[] 字节数组</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">exportByMapDynamicData</span><span class="token punctuation">(</span><span class="token class-name">String</span> templetId<span class="token punctuation">,</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Map</span><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> entityList<span class="token punctuation">,</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">ExcelHeaderData</span><span class="token punctuation">&gt;</span></span> headerList<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><strong>模板+结果</strong></p> <p><img src="/vuepress-demo/assets/img/1586488234564.4cf8fa91.png" alt="1586488234564"></p> <p><img src="/vuepress-demo/assets/img/1586488167296.5f7af1ec.png" alt="1586488167296"></p> <p><strong>4、功能描述：动态合并表头列表数据导出(模板中需要标记表头开始位置数据要以 TG 开头)</strong></p> <p><strong>输入：</strong></p> <table><thead><tr><th>属性</th> <th>类型</th> <th>描述</th> <th>是否必填</th></tr></thead> <tbody><tr><td>templetId</td> <td>String</td> <td>模板 id</td> <td>必填</td></tr> <tr><td>entityList</td> <td><code>List&lt;Map&lt;String, Object&gt;&gt;</code></td> <td>集合（map）</td> <td>必填</td></tr> <tr><td>headerList</td> <td><code>List&lt;ExcelHeaderModel&gt;</code></td> <td>集合（表头实体）</td> <td>必填</td></tr> <tr><td>sheetIndex</td> <td>int</td> <td>sheet 的位置（默认 0）</td> <td></td></tr> <tr><td>fontSize</td> <td>Short</td> <td>字体大小</td> <td></td></tr></tbody></table> <p>ExcelHeaderModel 实体属性描述</p> <table><thead><tr><th>属性</th> <th>类型</th> <th>描述</th></tr></thead> <tbody><tr><td>headerName</td> <td>String</td> <td>表头名称（必填）</td></tr> <tr><td>fieldName</td> <td>String</td> <td>表数据对应的字段属性（即是 Map 对象中的 key 值）（必填）</td></tr> <tr><td>headers</td> <td><code>List&lt;ExcelHeaderModel&gt;</code></td> <td>表头数据（子类目前只支持一层）</td></tr></tbody></table> <p>**输出：**byte[] 字节数组</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">exportByMapDynamicMerge</span><span class="token punctuation">(</span><span class="token class-name">String</span> templetId<span class="token punctuation">,</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Map</span><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> entityList<span class="token punctuation">,</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">ExcelHeaderModel</span><span class="token punctuation">&gt;</span></span> headerList<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">exportByMapDynamicMerge</span><span class="token punctuation">(</span><span class="token class-name">String</span> templetId<span class="token punctuation">,</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Map</span><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> entityList<span class="token punctuation">,</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">ExcelHeaderModel</span><span class="token punctuation">&gt;</span></span> headerList<span class="token punctuation">,</span> <span class="token keyword">int</span> sheetIndex<span class="token punctuation">,</span> <span class="token class-name">Short</span> fontSize<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><strong>模板+结果</strong></p> <p><img src="/vuepress-demo/assets/img/1586488064140.f3d11570.png" alt="1586488064140"></p> <p><img src="/vuepress-demo/assets/img/1586488110397.d5a4e916.png" alt="1586488110397"></p> <p><strong>5、功能描述：前端插件选项导出（Map）</strong></p> <p><strong>输入：</strong></p> <table><thead><tr><th>属性</th> <th>类型</th> <th>描述</th> <th>是否必填</th></tr></thead> <tbody><tr><td>entityList</td> <td><code>List&lt;Map&lt;String, Object&gt;&gt;</code></td> <td>集合（map）</td> <td>必填</td></tr> <tr><td>headerList</td> <td><code>List&lt;ExcelHeaderData&gt;</code></td> <td>集合（表头实体）</td> <td>必填</td></tr></tbody></table> <p>ExcelHeaderData 实体属性描述</p> <table><thead><tr><th>属性</th> <th>类型</th> <th>描述</th></tr></thead> <tbody><tr><td>headerName</td> <td>String</td> <td>表头名称（必填）</td></tr> <tr><td>fieldName</td> <td>String</td> <td>表数据对应的字段属性（即是 Map 对象中的 key 值）（必填）</td></tr> <tr><td>flag</td> <td>String</td> <td>处理图片数据对应值：photo（选填）</td></tr></tbody></table> <p>MyPictureData 图片数据对象</p> <table><thead><tr><th>属性</th> <th>类型</th> <th>描述</th></tr></thead> <tbody><tr><td>pictureData</td> <td>byte[]</td> <td>图片数据（必填）</td></tr> <tr><td>row</td> <td>int</td> <td>行号（选填）</td></tr> <tr><td>column</td> <td>int</td> <td>列号（选填）</td></tr> <tr><td>width</td> <td>int</td> <td>宽度（选填）</td></tr> <tr><td>height</td> <td>int</td> <td>高度（选填）</td></tr> <tr><td>fileName</td> <td>String</td> <td>文件名（必填）</td></tr></tbody></table> <p>**输出：**byte[] 字节数组</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">exportByMapPlugIn</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Map</span><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> entityList<span class="token punctuation">,</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">ExcelHeaderData</span><span class="token punctuation">&gt;</span></span> headerList<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAABSMAAACICAYAAAAcVf42AAAfY0lEQVR4nO3dX4geV/nA8efdXQ0qZm3KT6mW1mIbaoNYaXoRxYJWClIVLy1Ir6RgFZf1QlLQbkovule+jQQvciNEMHhn1W1rIAqFEi+2GFxCbFoiSEODlsRNCrFmd+d3IZPMnp3zb2bOnHNmvh8I2X3f+XP2nOc9M/O858xMVldXiwceeEDG5uGHH5aTJ086/657Ddu99tprcvvtt8cuRiM/+MEPZHFxUe666y55/PHH5dixY9vev3z5svzwhz+UX/ziF3L+/Hl5/vnn5Wc/+1nj/S0sLMjly5e3vXbLLbfI4cOHZWFhQT70oQ/Jd77zHfn4xz8ux44dk7/85S/y/ve/Xw4fPmzc7ltvvSVj/EwDAAAAAID0zcUuAJCKq1evym233Vb73rVr1+Sll16Sffv2iYjIbbfdJu+++26r/ZVJxaeffloOHDggX/3qV7e998c//lF++ctfyszMjMzPz8vy8rLMz8+32icAAAAAAEBMJCPh7ejRoztee+KJJyKUpFsf/vCH5e2335a77rpLREQef/zxbe9/8IMflJ/+9KciIvL222/Lnj17Wu/zvffek3/84x879iUi8sUvflF+/etfy6233ioHDx6U973vfa33BwAAAAAAENOok5EPP/yw9r2TJ0/ueJ8p2v/zxBNPbEtIDiERKSJy7733yuuvv34jGVmdpr2xsSHPPvus/PnPf5Yvf/nLcu7cOdm7d2/rff7973+XyWQid95554733nnnHfnvf/8r+/fvJxEJAAAAAAAGYSZ2AWI6efLkjX+2ZbBdmYAcSiJSROTRRx+VF198UdbX1+UjH/nItvfm5ubke9/7nrzwwgvyzjvvyG9/+1s5cOBA632++eab8slPfnJHsnFra0uOHj0qd9xxh6yurrbeDwAAAAAAQApGnYw0UR9WUzdScuyGlIgUEbnzzjvlS1/6kvz85z+XZ599dsf7H/3oR2VpaUmOHj0qH/vYx+T48eNy5cqVVvt8/fXX5e67797x+ksvvSTXrl2TgwcPyn/+8x85e/Zsq/0AAAAAAACkgGQkUPGNb3xDPv3pT8tPfvITefnll+X8+fNy7do1OX/+vLz88svy4x//WK5fvy5PP/20fP7zn5fl5eXGCcl//vOf8te//lU++9nP3njt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" alt="1586487995672"></p> <p><strong>6、功能描述：前端插件选项导出</strong></p> <p>**输入：**entityList 集合（实体）</p> <p>headerList 集合（表头实体）</p> <table><thead><tr><th>属性</th> <th>类型</th> <th>描述</th> <th>是否必填</th></tr></thead> <tbody><tr><td>entityList</td> <td><code>List&lt;T&gt;</code></td> <td>集合（实体）</td> <td>必填</td></tr> <tr><td>headerList</td> <td><code>List&lt;ExcelHeaderData&gt;</code></td> <td>集合（表头实体）</td> <td>必填</td></tr></tbody></table> <p>ExcelHeaderData 实体属性描述</p> <table><thead><tr><th>属性</th> <th>类型</th> <th>描述</th></tr></thead> <tbody><tr><td>headerName</td> <td>String</td> <td>表头名称（必填）</td></tr> <tr><td>fieldName</td> <td>String</td> <td>表数据对应的字段属性（即是 Map 对象中的 key 值）（必填）</td></tr> <tr><td>flag</td> <td>String</td> <td>处理图片数据对应值：photo（选填）</td></tr></tbody></table> <p>MyPictureData 图片数据对象</p> <table><thead><tr><th>属性</th> <th>类型</th> <th>描述</th></tr></thead> <tbody><tr><td>pictureData</td> <td>byte[]</td> <td>图片数据（必填）</td></tr> <tr><td>row</td> <td>int</td> <td>行号（选填）</td></tr> <tr><td>column</td> <td>int</td> <td>列号（选填）</td></tr> <tr><td>width</td> <td>int</td> <td>宽度（选填）</td></tr> <tr><td>height</td> <td>int</td> <td>高度（选填）</td></tr> <tr><td>fileName</td> <td>String</td> <td>文件名（必填）</td></tr></tbody></table> <p>**输出：**byte[] 字节数组</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">exportByPlugIn</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> entityList<span class="token punctuation">,</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">ExcelHeaderData</span><span class="token punctuation">&gt;</span></span> headerList<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAABSMAAACICAYAAAAcVf42AAAfY0lEQVR4nO3dX4geV/nA8efdXQ0qZm3KT6mW1mIbaoNYaXoRxYJWClIVLy1Ir6RgFZf1QlLQbkovule+jQQvciNEMHhn1W1rIAqFEi+2GFxCbFoiSEODlsRNCrFmd+d3IZPMnp3zb2bOnHNmvh8I2X3f+XP2nOc9M/O858xMVldXiwceeEDG5uGHH5aTJ086/657Ddu99tprcvvtt8cuRiM/+MEPZHFxUe666y55/PHH5dixY9vev3z5svzwhz+UX/ziF3L+/Hl5/vnn5Wc/+1nj/S0sLMjly5e3vXbLLbfI4cOHZWFhQT70oQ/Jd77zHfn4xz8ux44dk7/85S/y/ve/Xw4fPmzc7ltvvSVj/EwDAAAAAID0zcUuAJCKq1evym233Vb73rVr1+Sll16Sffv2iYjIbbfdJu+++26r/ZVJxaeffloOHDggX/3qV7e998c//lF++ctfyszMjMzPz8vy8rLMz8+32icAAAAAAEBMJCPh7ejRoztee+KJJyKUpFsf/vCH5e2335a77rpLREQef/zxbe9/8IMflJ/+9KciIvL222/Lnj17Wu/zvffek3/84x879iUi8sUvflF+/etfy6233ioHDx6U973vfa33BwAAAAAAENOok5EPP/yw9r2TJ0/ueJ8p2v/zxBNPbEtIDiERKSJy7733yuuvv34jGVmdpr2xsSHPPvus/PnPf5Yvf/nLcu7cOdm7d2/rff7973+XyWQid95554733nnnHfnvf/8r+/fvJxEJAAAAAAAGYSZ2AWI6efLkjX+2ZbBdmYAcSiJSROTRRx+VF198UdbX1+UjH/nItvfm5ubke9/7nrzwwgvyzjvvyG9/+1s5cOBA632++eab8slPfnJHsnFra0uOHj0qd9xxh6yurrbeDwAAAAAAQApGnYw0UR9WUzdScuyGlIgUEbnzzjvlS1/6kvz85z+XZ599dsf7H/3oR2VpaUmOHj0qH/vYx+T48eNy5cqVVvt8/fXX5e67797x+ksvvSTXrl2TgwcPyn/+8x85e/Zsq/0AAAAAAACkgGQkUPGNb3xDPv3pT8tPfvITefnll+X8+fNy7do1OX/+vLz88svy4x//WK5fvy5PP/20fP7zn5fl5eXGCcl//vOf8te//lU++9nP3njt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" alt="1586487995672"></p> <p><strong>7、功能描述：用户自定义导出(不处理图片)</strong></p> <p><strong>输入：</strong></p> <table><thead><tr><th style="text-align:left;">属性</th> <th>类型</th> <th>描述</th> <th>是否必填</th></tr></thead> <tbody><tr><td style="text-align:left;">list</td> <td><code>List&lt;Map&lt;String, Object&gt;&gt;</code></td> <td>集合（map）</td> <td>必填</td></tr> <tr><td style="text-align:left;">systemResourcesCode</td> <td>String</td> <td>资源码</td> <td>必填</td></tr> <tr><td style="text-align:left;">userId</td> <td>String</td> <td>用户 Id（用户没有配置，默认资源配置的导出）</td> <td>必填</td></tr></tbody></table> <p>**输出：**byte[] 字节数组</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">exportConfigData</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Map</span><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> list<span class="token punctuation">,</span>
                               <span class="token class-name">String</span> systemResourcesCode<span class="token punctuation">,</span> <span class="token class-name">String</span> userId<span class="token punctuation">,</span> <span class="token class-name">String</span> title<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAABSMAAACICAYAAAAcVf42AAAfY0lEQVR4nO3dX4geV/nA8efdXQ0qZm3KT6mW1mIbaoNYaXoRxYJWClIVLy1Ir6RgFZf1QlLQbkovule+jQQvciNEMHhn1W1rIAqFEi+2GFxCbFoiSEODlsRNCrFmd+d3IZPMnp3zb2bOnHNmvh8I2X3f+XP2nOc9M/O858xMVldXiwceeEDG5uGHH5aTJ086/657Ddu99tprcvvtt8cuRiM/+MEPZHFxUe666y55/PHH5dixY9vev3z5svzwhz+UX/ziF3L+/Hl5/vnn5Wc/+1nj/S0sLMjly5e3vXbLLbfI4cOHZWFhQT70oQ/Jd77zHfn4xz8ux44dk7/85S/y/ve/Xw4fPmzc7ltvvSVj/EwDAAAAAID0zcUuAJCKq1evym233Vb73rVr1+Sll16Sffv2iYjIbbfdJu+++26r/ZVJxaeffloOHDggX/3qV7e998c//lF++ctfyszMjMzPz8vy8rLMz8+32icAAAAAAEBMJCPh7ejRoztee+KJJyKUpFsf/vCH5e2335a77rpLREQef/zxbe9/8IMflJ/+9KciIvL222/Lnj17Wu/zvffek3/84x879iUi8sUvflF+/etfy6233ioHDx6U973vfa33BwAAAAAAENOok5EPP/yw9r2TJ0/ueJ8p2v/zxBNPbEtIDiERKSJy7733yuuvv34jGVmdpr2xsSHPPvus/PnPf5Yvf/nLcu7cOdm7d2/rff7973+XyWQid95554733nnnHfnvf/8r+/fvJxEJAAAAAAAGYSZ2AWI6efLkjX+2ZbBdmYAcSiJSROTRRx+VF198UdbX1+UjH/nItvfm5ubke9/7nrzwwgvyzjvvyG9/+1s5cOBA632++eab8slPfnJHsnFra0uOHj0qd9xxh6yurrbeDwAAAAAAQApGnYw0UR9WUzdScuyGlIgUEbnzzjvlS1/6kvz85z+XZ599dsf7H/3oR2VpaUmOHj0qH/vYx+T48eNy5cqVVvt8/fXX5e67797x+ksvvSTXrl2TgwcPyn/+8x85e/Zsq/0AAAAAAACkgGQkUPGNb3xDPv3pT8tPfvITefnll+X8+fNy7do1OX/+vLz88svy4x//WK5fvy5PP/20fP7zn5fl5eXGCcl//vOf8te//lU++9nP3njt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" alt="1586487995672"></p> <p><strong>8、功能描述：自定义数据导出;支持多个列表</strong></p> <p><strong>输入：</strong></p> <table><thead><tr><th>属性</th> <th>类型</th> <th><strong>描述</strong></th> <th>是否必填</th></tr></thead> <tbody><tr><td>map</td> <td><code>Map&lt;String, String&gt;</code></td> <td>map （列表数据序转成 json 数组的字符串，key 值要以 SV 开头）</td> <td>必填</td></tr> <tr><td>templateId</td> <td>String</td> <td>模板 id</td> <td>必填</td></tr></tbody></table> <p>**输出：**byte[] 字节数组</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">exportCoustomDataByTemplate</span><span class="token punctuation">(</span><span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> map<span class="token punctuation">,</span> <span class="token class-name">String</span> templateId<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><img src="data:image/png;base64,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" alt="1586490135938"></p> <p><img src="data:image/png;base64,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Y2Opam08/L2tHF0mnTmm2+Xzv2OMA6wKf1OFwPJrkOJyAACY0iQB8DCAVbVulVWNpxuiC96xweeY7ppd9tV12z6BtWvLn+6KAABw+yYJgH1Cy61q6pbZdbu+rZZ1QbpqGQAAcHuubgxgF7c6AUfV42oKgV3C3WGXxVt83gAAgL2rDYBdQs2xxproo671rmsrXt06dfvoMx5N8AMAgNt3kQHw1IlVuh6jKVDVGbIcfcYgntptdshxiwAAwHX61dQFqLLb7T77GUKWZZ8CV9U+2yajOZy5tMt65b/V3cpBAAMAAM7hIlsAxzJW613bbRXq7jl4uP7QZSy7lJBZFZzrZkK9xeUAADClqwuAda1rTb+3densEo5OmVimy0Qrp07G0vYYLqUL6JhdWa9hOQAATGnSANilG2bf5UOVo8s65b/VTcAy9HH6bNd1e6EFAADScJFjAAEAABieAAgAAJAIARAAACARAiAAAEAiBEAAAIBECIAAAACJEAABAAASIQACAAAkQgAEAABIhAAIAACQCAEQAAAgEQIgAABAIgRAAACARAiAAAAAiRAAAQAAEiEAAgAAJEIABAAASIQACAAAkAgBEAAAIBECIAAAQCIEQAAAgEQIgAAAAIkQAAEAABIhAAIAACRCAAQAAEiEAAgAAJAIARAAACARAiAAAEAiBEAAAIBECIAAAACJEAABAAASIQACAAAkQgAEAABIhAAIAACQCAEQAAAgEQIgAABAIgRAAACARAiAAAAAiRAAAQAAEiEAAgAAJCL78OHDrm7h4+NjvH79+pzl4YZ89bevpi4CAABQ8mqz2cRu93kG/OtPf42IiD9nfz53mbgRX/7w5dRFAAAASl799re/rV7y0/6fqnAIXTy3AL775t3EJQEAAL7621fGAAIAAKRCAAQAAEiEAAgAAJAIARAAACARAiAAAEAiBEAAAIBECIAAAACJEAABAAASIQACAAAkQgAEAABIhAAIAACQCAEQAAAgEQIgAABAIgRAAACARAiAAAAAiRAAAQAAEiEAAgAAJEIABAAASIQACAAAkAgBEAAAIBECIAAAQCIEQAAAgEQIgAAAAIkQAAEAABIhAAIAACRCAAQAAEiEAAgAAJAIARAAACARAiAAAEAiBEAAAIBECIAAAACJEAABAAASIQACAAAkQgAEAABIhAAIAACQCAEQAAAgEQIgAABAIgRAAACARAiAAAAAiRAAAQAAEiEAAgAAJEIABAAASMQgATDLsqve/nA/Q+2vy7HOsX3duud4nAAAwOV4NebOywFjt9s1rlMXRuq2O1wny7JO63ZRt78ugalrGYYuc1eHj6HpNSqXr+2xn/txAAAA/Q0aAA9DQlsoeF6/ar26cNQURE4JkV22KYehPmUbuszPxz8mQJbXb9v+8BhtIR4AALhsJwfAuoDQFgoOW5f6BpM+5Wv6vW39rscas8x1x+kTAsuhse5Y52zFayv3rS8HAIApjNoFtEn54vgwmAwVpOrWb2rJOtdF+zHHqtqmKQS2hcUuZRj6+egbwG9tOQAATOmkADjExW5VN9CmrqF9jn1KeOkT0A7HMVaFtD76dIl9Xr9PS2DT72MH4LYxhbe+HAAApnR0AKzrUth122dtY+3q1js13A21r8Ptq56PY8YGHj4Hbc91eXlTUDyFUAMAANft6ADYZYbMuqDVtYVrrNaoPmMVm3TtUtk0u2afbduO1eX56xI6q8pVNV7TODcAALgug40B7Bpoysu7/O2YWzG07aPNmMHmEkJT32AIAADchouYBCaivlWs73ZjB6y6iVW6HLdurOAQ4/eGmmX0cL2pwyoAADCcyQJg2aUEjcMg13WWzK7lrwu4XR/7UEH32BbAS3mdAACA40weAE8JFV1b3ZoCT1Wo6nJbha7bdClX3yB4qjHCnnAIAACXb9IAOHb4a9LUlbTuhulNt6roMgtn1Xbl/58rRB3TAjhU2crHaboFyK0uBwCAKQ0aAPuMUWsKFE0Xzl1uddB024U+M5BWlb/p+HXrdB2rV9WS2BTM2u5F10WXfTTNUNp38pguXWpveTkAAEzp5ABYd5uCPtsNtaxtnSH+fszxT3lehggUTa/RKc9n1+0BAIDL8KupCwAAAMB5CIAAAACJEAABAAASIQACAAAkQgAEAABIhAAIAACQCAEQAAAgEQIgAABAIgRAAACARAiAAAAAiRAAAQAAEiEAAgAAJEIABAAASIQACAAAkAgBEAAAIBECIAAAQCIEQAAAgEQIgAAAAIkQAAEAABIhAAIAACRCAAQAAEiEAAgAAJAIARAAACARAiAAAEAiBEAAAIBECIAAAACJEAABAAASIQACAAAkQgAEAABIhAAIAACQCAEQAAAgEQIgAABAIgRAAACARAiAAAAAiRAAAQAAEiEAAgAAJEIABAAASIQACAAAkAgBEAAAIAHvvnknAAIAAKTgq799JQACAACk4tX79+8bV8iy7ExF4dZ8+cOXEbH/pgEAADi/d9+8e3E9/upPf/pT5Yo/xA/x+PgY73bvzlU2bozgBwAAl+XV1AXgdr375l0URRGz2WzqosCg1GtukXrNqdSh8/A8cyoBEAAA4Ia9+2bfq7MoCpPAAAAApOL/AbslszI2luDtAAAAAElFTkSuQmCC" alt="1586490209170"></p> <p><strong>9、功能描述：模板导出(图片本地服务下载)</strong></p> <p><strong>输入：</strong></p> <table><thead><tr><th>属性</th> <th>类型</th> <th><strong>描述</strong></th> <th>是否必填</th></tr></thead> <tbody><tr><td>list</td> <td><code>List&lt;Map&lt;String, Object&gt;&gt;</code></td> <td>集合（map）</td> <td>必填</td></tr> <tr><td>templetId</td> <td>String</td> <td>模板 id</td> <td>必填</td></tr> <tr><td>errorMsg</td> <td>String</td> <td>错误消息（在最后一行添加）</td> <td></td></tr> <tr><td>fileHandleService</td> <td>FileHandleService</td> <td>文件服务</td> <td>必填</td></tr></tbody></table> <p>**输出：**byte[] 字节数组</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">exportDataByMapLocalTemplet</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Map</span><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> list<span class="token punctuation">,</span>
                                          <span class="token class-name">String</span> templetId<span class="token punctuation">,</span>
                                          <span class="token class-name">FileHandleService</span> fileHandleService<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">exportDataByMapLocalTemplet</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Map</span><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> list<span class="token punctuation">,</span>
                                          <span class="token class-name">String</span> templetId<span class="token punctuation">,</span> <span class="token class-name">String</span> errorMsg<span class="token punctuation">,</span>
                                          <span class="token class-name">FileHandleService</span> fileHandleService<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAABSMAAACICAYAAAAcVf42AAAfY0lEQVR4nO3dX4geV/nA8efdXQ0qZm3KT6mW1mIbaoNYaXoRxYJWClIVLy1Ir6RgFZf1QlLQbkovule+jQQvciNEMHhn1W1rIAqFEi+2GFxCbFoiSEODlsRNCrFmd+d3IZPMnp3zb2bOnHNmvh8I2X3f+XP2nOc9M/O858xMVldXiwceeEDG5uGHH5aTJ086/657Ddu99tprcvvtt8cuRiM/+MEPZHFxUe666y55/PHH5dixY9vev3z5svzwhz+UX/ziF3L+/Hl5/vnn5Wc/+1nj/S0sLMjly5e3vXbLLbfI4cOHZWFhQT70oQ/Jd77zHfn4xz8ux44dk7/85S/y/ve/Xw4fPmzc7ltvvSVj/EwDAAAAAID0zcUuAJCKq1evym233Vb73rVr1+Sll16Sffv2iYjIbbfdJu+++26r/ZVJxaeffloOHDggX/3qV7e998c//lF++ctfyszMjMzPz8vy8rLMz8+32icAAAAAAEBMJCPh7ejRoztee+KJJyKUpFsf/vCH5e2335a77rpLREQef/zxbe9/8IMflJ/+9KciIvL222/Lnj17Wu/zvffek3/84x879iUi8sUvflF+/etfy6233ioHDx6U973vfa33BwAAAAAAENOok5EPP/yw9r2TJ0/ueJ8p2v/zxBNPbEtIDiERKSJy7733yuuvv34jGVmdpr2xsSHPPvus/PnPf5Yvf/nLcu7cOdm7d2/rff7973+XyWQid95554733nnnHfnvf/8r+/fvJxEJAAAAAAAGYSZ2AWI6efLkjX+2ZbBdmYAcSiJSROTRRx+VF198UdbX1+UjH/nItvfm5ubke9/7nrzwwgvyzjvvyG9/+1s5cOBA632++eab8slPfnJHsnFra0uOHj0qd9xxh6yurrbeDwAAAAAAQApGnYw0UR9WUzdScuyGlIgUEbnzzjvlS1/6kvz85z+XZ599dsf7H/3oR2VpaUmOHj0qH/vYx+T48eNy5cqVVvt8/fXX5e67797x+ksvvSTXrl2TgwcPyn/+8x85e/Zsq/0AAAAAAACkgGQkUPGNb3xDPv3pT8tPfvITefnll+X8+fNy7do1OX/+vLz88svy4x//WK5fvy5PP/20fP7zn5fl5eXGCcl//vOf8te//lU++9nP3njt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" alt="1586487995672"></p> <p><strong>10、功能描述：导出列表数据(Map)</strong></p> <p><strong>输入：</strong></p> <table><thead><tr><th>属性</th> <th>类型</th> <th><strong>描述</strong></th> <th>是否必填</th></tr></thead> <tbody><tr><td>list</td> <td><code>List&lt;Map&lt;String, Object&gt;&gt;</code></td> <td>集合（map）</td> <td>必填</td></tr> <tr><td>templetId</td> <td>String</td> <td>模板 id</td> <td>必填</td></tr> <tr><td>errorMsg</td> <td>String</td> <td>错误消息（在最后一行添加）</td> <td></td></tr> <tr><td>sortColumn</td> <td>Integer</td> <td>是否添加序号（不为空时，在第一列添加序号）</td> <td></td></tr> <tr><td>isImg</td> <td>Boolean</td> <td>是否添加图片</td> <td></td></tr></tbody></table> <p>**输出：**byte[] 字节数组</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">exportDataByMapTemplet</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Map</span><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> list<span class="token punctuation">,</span> <span class="token class-name">String</span> templetId<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">exportDataByMapTemplet</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Map</span><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> list<span class="token punctuation">,</span> <span class="token class-name">String</span> templetId<span class="token punctuation">,</span> <span class="token class-name">String</span> errorMsg<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">exportDataByMapTemplet</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Map</span><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> list<span class="token punctuation">,</span> <span class="token class-name">String</span> templetId<span class="token punctuation">,</span> <span class="token class-name">String</span> errorMsg<span class="token punctuation">,</span> <span class="token class-name">Integer</span> sortColumn<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">exportDataByMapTemplet</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Map</span><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> list<span class="token punctuation">,</span> <span class="token class-name">String</span> templetId<span class="token punctuation">,</span> <span class="token class-name">String</span> errorMsg<span class="token punctuation">,</span> <span class="token class-name">Integer</span> sortColumn<span class="token punctuation">,</span> <span class="token class-name">Boolean</span> isImg<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAABSMAAACICAYAAAAcVf42AAAfY0lEQVR4nO3dX4geV/nA8efdXQ0qZm3KT6mW1mIbaoNYaXoRxYJWClIVLy1Ir6RgFZf1QlLQbkovule+jQQvciNEMHhn1W1rIAqFEi+2GFxCbFoiSEODlsRNCrFmd+d3IZPMnp3zb2bOnHNmvh8I2X3f+XP2nOc9M/O858xMVldXiwceeEDG5uGHH5aTJ086/657Ddu99tprcvvtt8cuRiM/+MEPZHFxUe666y55/PHH5dixY9vev3z5svzwhz+UX/ziF3L+/Hl5/vnn5Wc/+1nj/S0sLMjly5e3vXbLLbfI4cOHZWFhQT70oQ/Jd77zHfn4xz8ux44dk7/85S/y/ve/Xw4fPmzc7ltvvSVj/EwDAAAAAID0zcUuAJCKq1evym233Vb73rVr1+Sll16Sffv2iYjIbbfdJu+++26r/ZVJxaeffloOHDggX/3qV7e998c//lF++ctfyszMjMzPz8vy8rLMz8+32icAAAAAAEBMJCPh7ejRoztee+KJJyKUpFsf/vCH5e2335a77rpLREQef/zxbe9/8IMflJ/+9KciIvL222/Lnj17Wu/zvffek3/84x879iUi8sUvflF+/etfy6233ioHDx6U973vfa33BwAAAAAAENOok5EPP/yw9r2TJ0/ueJ8p2v/zxBNPbEtIDiERKSJy7733yuuvv34jGVmdpr2xsSHPPvus/PnPf5Yvf/nLcu7cOdm7d2/rff7973+XyWQid95554733nnnHfnvf/8r+/fvJxEJAAAAAAAGYSZ2AWI6efLkjX+2ZbBdmYAcSiJSROTRRx+VF198UdbX1+UjH/nItvfm5ubke9/7nrzwwgvyzjvvyG9/+1s5cOBA632++eab8slPfnJHsnFra0uOHj0qd9xxh6yurrbeDwAAAAAAQApGnYw0UR9WUzdScuyGlIgUEbnzzjvlS1/6kvz85z+XZ599dsf7H/3oR2VpaUmOHj0qH/vYx+T48eNy5cqVVvt8/fXX5e67797x+ksvvSTXrl2TgwcPyn/+8x85e/Zsq/0AAAAAAACkgGQkUPGNb3xDPv3pT8tPfvITefnll+X8+fNy7do1OX/+vLz88svy4x//WK5fvy5PP/20fP7zn5fl5eXGCcl//vOf8te//lU++9nP3njt8uXL8sILL8hvfvMbefLJJ+UDH/iAPPbYY/L888/LwsJCV38mAAAAAABAFKO+ZySgmp2dlW9+85vyuc99TlZWVuTFF1+Ud999V/bs2SN79+6V7373u3L8+HFZWVmRr33tayIisry8LAcPHpTdu3c77+fSpUty7Ngx+dSnPiX33XefiIgsLCzIlStX5O6775Yf/ehHcscdd4iIyIMPPigPPvhg938sAAAAAABAzyarq6vFAw88ELscvapOt1anX1enZvMAG3+vvfaa3H777bGLEdSVK1dkeXlZvvCFL8ijjz4qv//972VtbU2eeuopp/UXFhZkc3NT7rvvPvn2t7/tlcR08dZbb8nYPtMAAAAAACAPoxwZqSYVdUlGko+os3v3bjl48KAsLy9LURRyzz33yB/+8Afn9Q8fPhywdAAAAAAAAOmaERG5fv167HJgAMYUR2VCcm1tTY4cOSLf+ta3YhdpmzG1BQAAAAAAyMfc7OysXL16Vfbs2RO7LMjc1atXZXZ2NnYxerN7927nqdl94jMNAAAAAABSNbNr1y65cOGCbGxsxC4LMraxsSEXLlyQXbt2xS7K6PGZBgAAAAAAqZqZn5+XjY0NOXv2rFy6dInpnfBy/fp1uXTpkpw9e1Y2NjZkfn4+dpFGj880AAAAAABI1eTixYvF5uamrK+vy3vvvSebm5uxy4TMzM7Oyq5du2R+fn5U07RTxmcaAAAAAACkaHLx4sUidiEAAAAAAAAADN9M7AIAAAAAAAAAGAeSkQAAAAAAAAB6QTISAAAAAAAAQC9IRgIAAAAAAADoBclIAAAAAAAAAL0gGQkAAAAAAACgFyQjAQAAAAAAAPRiro+dbGxsyNxcL7tCxdbWlszMkG/uG/UeB/WOUIgthEJsIRRiC6FsbW3Jv//979jFwAAVRSG33npr7GJggDgmxmGr915aZGtrq4/dQLG5uRm7CKNEvcdBvSMUYguhEFsIhdhCKMQWQiFngFDot+Kw1XsvyUgaPw7qPQ7qPQ7qHaEQWwiF2EIoxBZCIbYQCslIhEK/FUcSyUg6ljj40MVBvcdBvSMUYguhEFsIhdhCKMQWQiFngFDot+JIIhlJ48exsbERuwijRL3HQb0jFGILoRBbCIXYQijEFkIhGYlQ6LfisNV7kKfKnD59Wu6///4bv+fcsUynU1lcXIxdjEZySwJPp9Pa13Or/9zqvVRX/znVfa713pfc2zcmYstsKH13DMSWGbHVHLHlRo0xYsuO2DL7/unv3/j5yP1HdvwOvZxzBn3hfL6ZXPut3NvbVu+dJyNPnz694zU6ljhy+9AtLi7WJn9zSwjnVu8i9XWsuwhMVY713qe6z1dun61YiC2zofTdMRBbZsRWc8SWXd0xEXabm5syOzsbuxjJKhOQZeJR/R165Azsyj6L46CfXI+Jubd3r9O06xKRLoVIVdnouZ6c5Frvucut3nPt3FS51XsKcu7f+kRs+Sljagj9SmjElh9iyx2xZTaUc58YiC2EQjISodBvxdFbMlKXiBShY4llCB+6HE8Wh1DvIvld7A2l3pEeYguhEFsIhdjyl9t5TyzEFkIpiiJ2ETBQ9Ftx9DJN25SIFCEZGUuuH7rqSK0cTwxzrffcUe8Ihdhywyhbf8SWG2LLH7GFUIgtN9V7RcINOQOEQr8VR/BkpC0R6VIIhJFrved+T7tc6z131DtCIbbcVO9rAzfElhtiyx+xhVCILTfVe0SSmHRDMhKh0G/FEXSatksiUiTPjqU84VX/z8kQHmGf4z3thlDvOaLeEQqxhVCILYRCbPmZTqc3/sGM2EIoOeYMkAf6rThs9d44GemaiBTJt2NZXFy88S9HfAMQx1DqPbcT8qHUO9JDbPnJ9ZgZA7Hlh9hyR2z5KWOLGLMjthBKrjkDpI9+K44gIyN9EpEuhUAY1HscudV73ehTpsePQ47tHAOx1UxuX2jEQGwhFGLLLMeZN6kgthAKyUiEQr8Vh63eJxcvXgz+2Ko33nhD7rnnntC76Yz6AJVcH6iytrYmn/nMZ2IXw5nupDCnOhfJr95LucZ5Kdd670vd5yvHdo6B2DIbSt8dA7FllvtxKSZiyw0x5m9tbU0+8YlPxC5Gsqr3hzxy/5Edv0PvwoUL9FsWnM83k/sxMdcBJLZ67yUZ+be//U3uvffe0LuBIvcPXa6o9ziod4RCbCEUYguhEFsIhWQkQiEZiVByOyaqycehJiNbP03bBUOuAQAAACBvz/3rOZF/xS4FhupX8qvYRQCSMIaR+5M333yzKIpCiqKQra0tafpz9fe6ZQAAAAAA+XruX8/FLgIG7Kn/eyp2EQD0pJdp2mtra/Lqq6+G3g0AAAAAAACAyJaWlrTvNXqaNgAAAAAAAAD4IhkJAAAAAAAAoBckIwEAAAAAAAD0openaaeqnL/+zDPPeC9vmvvus80x86l/6rs7beK+yfpork1du65bt5zPuqurq7KysuJdPsTl2na2WFhaWpJz587J3r17jcv5lq3cFv1NfmLElm9/p6qWl5hLW5NzmBMnTsgjjzzitV7dPkummFVjn3jKQ9tz47b7LRFbw9L0GqqLtiW28tC2rnNvq1EmI9UPp3qiUlVt2PLCaGlpyfiBRjhqvVPfGDKXPqdO9XPhum65zvHjx2u3U5bHtj9VrgfHsdGdzLjGYN17rv2z78Vfk3URT4jYMm3X5cS87ssXpMfUNjH6A9eYrStb9TX6rfQ0Pd8S0cepz3aILZTUc3iVbxsTW+nybeu685s2fVcKrMnI6XQqi4uLfZSlN7qGqn5r2sWBBd3josGfrs5cE03oTxcXXnXfwuoOUOoItOPHj8tjjz227TXbflZWVmRlZUX77S/SobbJ/v37Zf/+/Td+1/UBtsTN3r17jbHik8TWnZgdOHBg2/aIr7TEiK3qCbi6jaaj306cOOG9HsJrOuK1fP3UqVM3zvFtx1LX47B6XFWPierrnGOlpetE9yuvvCJ/+tOfjNsmtmBTdy5evl79vW490zarPxNbaWjS1rrEY87tpE1GTqfTPsvRq7qLZpcTUD6Y8VDnzTWZfou4bAck24mu6zdmtgOZy4gkLuDzofYFq6urNxJGrn1CXSyeO3du24jatmVU40tkezIB6ekztlwS0YzmGAbd+Yt6rHNJVtZd9DXZt2771bLVzbbi/CtNTc63dF+U+e7TtN+694mt4av2aeqXbfRbw9K0rV0HfeTSZtpkZDkacohJybpGr/vWNJdGHDrXETC0V3dcPwN8VrrV5qLdtA21z3MZBeIyclaXKCIu0lPXztWRa7r2jpnUaTK6BP3rO7Zc+q+mI+mQrvI45pr8idF3lYn4U6dOyalTp7aVg+NhWpqeb5Wv6UbdhvpyltjKR9trqLq+S3cO3wViK542bT2UwUaju2ckFzdpMA0Z12kyNH3sfOPd9C2Nbhs5dnypatNe5XKmNnMZ/ehzALR99oiRdNS1s8tDRtQp0dWfXS+6mvbRuunYTNNOS6zY0o2U040Er5a1rm+qJlCRFrW9bKOk1ZGQuu1Vt6lb5pVXXjGWpfpz+Z5tNB3HxPianm91uW9ia5iaXkOp7Vg9lrkmqoitPJjq1dTWQ7yuGl0y0tR4rieziGuIH8RQ2nxr4nLBTxt0y9Zetjb0bW+XE6Um23dNViKOsl3U+/qVbIlo3YhY0zqmctjKiXz0FVtq/6NeYNWdw5kutFZXV7X7Qny+5+W2ZVy34dMHlcuq915Dmpqeb6kx0eQ4RWwNX5NrqK76NmIrfU0HkQwxRzW6ZKRI/YGDe571py7LP6QPVYp0o09KpuRWH98SY7u+Eu6uX87o3it/rvaffJbTltO33Lr+hyRlmvqMLduIbtso8LpRlUiP7fOvvh867lwSVAcOHLB+SZN63zsmTb6oV9frog8htoanyTWUyzmPbxsTW+mrm+FhWlZkOCNZR5mMLDF6B2PBFPc86aYhmpa1vW4bKWRa33ShX3fPSFN50T916mKKXzToEg08TTttfcZWmxHd1WXom9Jn+jKsTfv5XtzrLhR1x8TyeOhzgYm4fM63VNV1HnnkkW1P1vZZl9iCaTqubxsTW/mwDRqq02b2Y0pGnYzUyblBU1dXt7Yhx+qHrbzgoZ3c1Z14U3/pUmPepa2aXHC7nPT4TPM2bQ9xlW1y7ty5zr6cqCYIu2pz0/o8TTtNfceWbdpk0xgs1yPO0qW7QPZtc5fly+0/9NBD8tBDD+14XbcOM63y0uR8a2lpSX73u9/J17/+de21i8vsEmILXSO28uSTAB7aNdaok5EpjgoZMtOHx5aQrLZV9YLH9cRh7HQnW0iXeqEVMtZ970FSV7a695iynY4u2kGdxlM+edHWn/j2N21GqKB/sWKrLhll6yeJpzyZRuj7HLt86L5cs02NU59Iyxfo6Wt7vuU7iozYgkmb9iS28uQ6MnKI7TG5ePFiUffGdDrd8dri4mKjnaytrcmrr77aaN0Q6j6gJ06c2DY82WW9uvdKQwqSLrh+eEydp8sILerdj67emkwFQHsu/UhXUzfalEFXHt3nl/hIm62f9Rkl6zO61nUdU/Kb2EpbiNhyaX9dorL83Taq21Ym9KPtOaDvMcl1edftqMtwTExH2/Mt1+m0tuQQsTU8bc7JXeOpbn/EVn66aCuTVNrMVF5tMrJLqSUjAQAAAAAAAIRhSkbO9FgOAAAAAAAAACNGMhIAAAAAAABAL0hGAgAAAAAAAOjF3Pr6uhRFIVtbWzf+V3+u/q5bpigKKQr97ScPHTrU458Fkf/VOfXeP+o9DuodoRBbCIXYQijEFkIhthAKsYVQiK04Dh06JGfOnNG+39sDbL7yla+E3g0Uk8nEmCBGGNR7HNQ7QiG2EAqxhVAmz0x2vFYsEWtoj9hCKBwTEQqxFYet3pmmDQAAAAwYySKEQmwBAJqYi10AV67Z7Mlk57d1JrZtNs2ik30HAABAbCSLEAqxBQBoKptkpA/XJKBv4jIUNXGpKxfJTQAAALgiWYRQiC0AQBuDTEbmpiiKbQlJko4AAABog2QRQiG2AABtDfaekZPJxPjPdR3T6wAAAEByeGgoQiG2AAAdSG5kpCnR5zN9uenoQnW9uns/quUwJTdd9qF7DQAAAAAAABiS5JKRuqRcyg+EqSuXrry2UZUuoy5TrQcAAAAAAADAJLlkZJ0yseebkGzyIJi6dXynZfuUs7rtoih2PMiGxCMAAAAAAACGIotkZBu2KdYuy/tuw0e5be5DCQAAAAAAgKEb7ANscldNgpKoBAAAAAAAwBAkn4ysJuXKqdqh92d7mrZreduUobqNPv5uF03LEKrsrg8SUt9PoS5jSa0NkQbaF0Asvg8BbLssAAAA4hv8NG3fE1SXadohmRJmY7iHpG1EqOnvd72vaJP7jwJj0eReuwDQVN0xuatjNMd6AACANCWdjKw7ifRJJPmegPo+HCdE4tL34TpDo7avenHS5X6AofD5bNj6LV1iAAC6ZJvdoD7gz2d9vnQEAABImzEZOZ1Ot/2+uLgYtDBVppPIFE8yXcqjW8b1aeExRmi6vN51uWzJEltslMvUMV3cpBZTbcVsQ/SrafupI5GJg7yon2VTwkbXtqZ2tyWDfMro+iA43y8FTeu61A/iMR3XXWc5tFkf4+TSr9n6TaAOsQUAfrTJyOl0uiP5WPda11w76ep9FH07dN9RRG3vE2kqZ5N7YvZ1AGvyZHHfez+Funiw1bVL2Yag7zZEfvq4Dy665zI635Rs9m33JnFgS3a32b7t7w81ewHdcW0P19j1HVmJ8XHp1/iSDk0QWwDgL7lp2j4dc92yMaZvt3nfdHGWozZJwDYjXttcdNhGU44NidzxsJ0Uc7KcL9v0e99+z7d/dpn+j3FziQlbEltd1vQ+oFJjkH4LXSG2AMBOm4zsc0o20lR3keqbfPI90DY9KNddWDMqIk4bIi+uI7tFxvs5SlHubdF21KXvl4D0Y2mpO1brRja63GrA9D4AAADS4zwyso8p2khLkym+XejqopFvHeO1IfLgc59a4iRtofs63Rc9qi7K0GT7ttHbYz4OpChEnHArEfjiuIZQiC0AsHNKRpKIBIBhYuRj/kIkItV7GLe5T7OJzzRcn22o2xr7F1OpanKf7Goc0q7wYerXgDaILQDwZ01G5pqI7PsE1feAk8PJc9spvm0feND1/TTHeOESow2RD9d7tREH6QrZNjm0uevfP8b+Pxeut4nQLR96pC6GhZhAKMQWAPgxJiOHkoh0nbrjk6Rp+vCcnKRwz61yn6YkpWm9pu8PRQptiDyRvEnf2NvH9PePvW5y0mb0kG8iEwAAAGmY0b1Rl4icTqfBC9SWbspX3T+VbhmXdV3Llgufv1E3+q7rqXau9VeXjM6p7rsSow2Rp+pnRE38Ewdpst3/Ve0zm/bJTdfvYv+2snH/22HQnaPR7yAEU78Uut/CsBFbAODHOjIyJylMK+Tg4lYHXS1Tp+6+Lbr3yv2oP9OG4doH3WqSgKn2k9Xf67ZNQjJdtrY33efRtd9r0yeGus9kyTY9V32fGE4TSWT0zdQvhe63MGzEFgC40yYjc5yenULHrrtwH8LFvMvoRJfp0eW26rZv2o6aQNGVUbf96jJjfWhH6DZE/9q0g6mfqhsh2XZ/6I5rO5hGm3e1jzbbaLqPvsqP8Lqeak1fBRP6DoRCbAGAH6enaedGvaA2CXFQGPJIorYXlm0voH220UU5hqivNkR+1FHEuvcAoAshjjf0VQAAAOkbXDLSNi2rryRhNSE51MQkAAAAAAAA4EP7AJscpZb0IxEJAAAAAAAA3DSoZGRqSb/qyEgAAAAAAABg7AaVjEyJ7uEPAAAAAAAAwFiRjAxA9yRoEpIAAAAAAAAYM5KRHeMekQAAAAAAAEC9wT1NuynTqEXde3VJR1MikiQlAAAAAAAAxmw0yUjbFOkuEoU+07BJTAIAAAAAAGBsBpmM9B2xGGqfAAAAAAAAAG6aW19fl6IoZGtr68b/6s/V33XLFEVhTMjx8JY4qPc4qPc4qHeEQmwhFGILoRBbCIXYQijEFkIhtuI4c+aM9r25+fn54AVYW1tj5GAEPEwnDuo9DuodoRBbCIXYQijEFkKZPLPzgr5YItbQHv0WQiG24phMJrJv3z7t+zxNGwAAAADgjUQkAKCJbO4Z6ZrN9h1+W7fN6r7U/fpk1dsuW75GJh8AAABASkhEAgCayiYZ6cMnAZgDEpIAAAAAUkEiEgDQBtO0E6COxFRfE+Fp3QAAAADiIxEJAGhrsMnIyWRi/Gdary4xWF2vbn3dPnz27fo3AAAAAEDvDsUuAABgCJKbpm1LFNapGzXYxUjCuunRpunSuns+qq/V/V7+X+6zuj2maAMAAAAAAGAIkktG6pJufSTkYow6VBOd1YfWAAAAAAAAAEOSXDKyTtOnSvuMpOwiCaibvu26rmkUpTpaEgAAAAAAAMhNFsnINmzTpHXLdbUvl/3rkqxM0wYAAAAAAMCQDD4Z2VTdqET19y4ShHUPxSHxCAAAAAAAgCFKPhlZHRXYZKp2U0320WSatmk/Q5qm3abdGBlqphuB61JnpuWo9/GgrQHEout/fPol+jAAAIC8JJ+MbKvtg2C6fpq2D6ZpoymfxH2TRLfv54r4DavL9gh5KwsAUNUdr7o67+H8CQAAIE1JJyPrTiJ9kiwhTkB1+/dN5OhGAfhuKzWmpIhLkkO3TN3rOddTKLpbCoiYk+VNkvY+I1YQnu5Cvu4iv0p9X5cYAIAumY5X6u+mcybd8iQiAQAA0mVMRk6n022/Ly4uBi1MlW0EYh8nmaYHy3T5rX11u7r3crmnpC7h5fNE9KYPAtItO1S6afwuI0xck1U+CfJQI1sQjikOkD61H2zyJZftVg2mbfuU0SWZ5LsPn7+/yfYRlul44XuuwPEHQGwuxxuOSQBwkzYZOZ1OdyQf617rmmvyo0y6uCyr24dtmbYHiWoZTcs0eS8HbUe2+u5rbHRJJJfkrxqb6mdJ3YYOF4D5s312aNM0udwr1meErG37TeLAtv82tzZp8vcjLU3vbew6g4KLfgB9aTIQAADGLrlp2j4njLokS5t9VJMxTbfRZLmu1ktF3yNbObjrL8RMF2SuSUcdtS2ZGpcX26hI2jJftun3vn2m72fbZfp/SHX7R1pcYsLntjhDuNUNgGFQ+zeOSQCwkzYZGWNUJPKnuxjQJcHq3qu7OB5zktFVrBGKJCTz5pIMKNGm6ci9LbqYeYB81Y3Mt32hRhISAABgOKwjI8v7RpKIhAuXqVSm0aeMzmqmaR3pLgIxDra48ZnWi7hC95O6exir2txb0mW0pu+9L0mmp6mLtjBNy+56XwDgw+V2EvRNAMbOmowsk5CMjISvNvcDa7POWKgnNC4XZq7TtH2SlOr9KW33q0RaODHOX4jPmtonmEazt9V2+prrbQbok9LjcozRzZ7gOAMgFaZjZoljEgBsN+O64OLi4o6na6fM9RvzLvfn829smh5wm97LcAyKothxAV8ddVr3u+92fdZDGnT36qvre6pxYrpdAifM6QrZNrrY6FLb8tvuT4z0qf2QLe7U9zjXApACl74LAHCTNhmZU+LRle0ktW0y0XRC7XKCPQSm+nKpS9cReVxk1LN9C6tbvml9mu4VOeQ4T5WuvZv0PXwRkL7ck8QhE5HIR5tk4hjPswAAAIYguadph1B3weIyhVW3bpflGBrf+3k13SbTs+qp91yz1Y9umnYVUyDz0eZ+feX6pgQz0qE7runaru1tMnzXt+3fVn6fsjVZH+lw+cIMAFLX9pgLAGNjfJq2Ojoyl3tG1h0M+jpAcPBpzqXuTIkx9eextoMa6yLudWEaqapuw/Y7+tXkot0WH3X9J9Jha/Pqlwy2afh1y9jeszHtXy1DE6b1675gIYbTRMIRwFDojnkckwBgJ+PIyFySjybqKJHqa6H2x4iNm3wuMqr14zJFVF1+bHSJw7p6MY1KcvlstEl0oR9NEs6mfso3RtAv13Zoc++qLto61L2z+io/wut6ZCR9FYAYXGYjAQBuGtw0bXW0R92FdejEICOJbmpTB9Sfmc/IxLajGpuMgqT9+uM7fdblPUa+AggtxMU7fRUAAED6nJ+mnQPdiETdtO2QI7eqI4lITAIAAAAAAAADGxmpe9BJqe8n/TJCEgAAAAAAALhpUCMjdepGR/a1X5d7HwIAAAAAAABjMIpkZFEU2ntHhqJ7+AMAAAAAAAAwVqNIRpb6eohN3bZJSAIAAAAAAGDsBnXPSJU6AjJWIhIAAAAAAADAwJORJV1Ssso0alH3nu2BOT7vAQAAAAAAAEM3+GRkNZEYOlHoMw2bxCQAAAAAAADGZpDJyGqir6+kH8lFAAAAAAAAwGxufX1diqKQra2tG/+rP1d/1y1TfWJ1HR7eEgf1Hgf1Hgf1jlCILYRCbCEUYguhEFsIhdhCKMRWHGfOnNG+Nzc/Px+8AGtra4wcjICH6cRBvcdBvSMUYguhEFsIhdhCKJNndl7QF0vEGtqj30IoxFYck8lE9u3bp31/pseyAAAAAAAGgkQkAKCJ/wertI2STtv62gAAAABJRU5ErkJggg==" alt="1586487995672"></p> <p><strong>11、功能描述：导出列表数据</strong></p> <p><strong>输入：</strong></p> <table><thead><tr><th>属性</th> <th>类型</th> <th><strong>描述</strong></th> <th>是否必填</th></tr></thead> <tbody><tr><td>list</td> <td><code>List&lt;T&gt;</code></td> <td>集合（实体）</td> <td>必填</td></tr> <tr><td>templetId</td> <td>String</td> <td>模板 id</td> <td>必填</td></tr> <tr><td>errorMsg</td> <td>String</td> <td>错误消息（在最后一行添加）</td> <td></td></tr> <tr><td>sortColumn</td> <td>Integer</td> <td>是否添加序号（不为空时，在第一列添加序号）</td> <td></td></tr></tbody></table> <p>**输出：**byte[] 字节数组</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">exportDataByTemplet</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> entityList<span class="token punctuation">,</span> <span class="token class-name">String</span> templetId<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">exportDataByTemplet</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> entityList<span class="token punctuation">,</span> <span class="token class-name">String</span> templetId<span class="token punctuation">,</span>
                                      <span class="token class-name">String</span> errorMsg<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">exportDataByTemplet</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> entityList<span class="token punctuation">,</span> <span class="token class-name">String</span> templetId<span class="token punctuation">,</span>
                                      <span class="token class-name">String</span> errorMsg<span class="token punctuation">,</span> <span class="token class-name">Integer</span> sort<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAABSMAAACICAYAAAAcVf42AAAfY0lEQVR4nO3dX4geV/nA8efdXQ0qZm3KT6mW1mIbaoNYaXoRxYJWClIVLy1Ir6RgFZf1QlLQbkovule+jQQvciNEMHhn1W1rIAqFEi+2GFxCbFoiSEODlsRNCrFmd+d3IZPMnp3zb2bOnHNmvh8I2X3f+XP2nOc9M/O858xMVldXiwceeEDG5uGHH5aTJ086/657Ddu99tprcvvtt8cuRiM/+MEPZHFxUe666y55/PHH5dixY9vev3z5svzwhz+UX/ziF3L+/Hl5/vnn5Wc/+1nj/S0sLMjly5e3vXbLLbfI4cOHZWFhQT70oQ/Jd77zHfn4xz8ux44dk7/85S/y/ve/Xw4fPmzc7ltvvSVj/EwDAAAAAID0zcUuAJCKq1evym233Vb73rVr1+Sll16Sffv2iYjIbbfdJu+++26r/ZVJxaeffloOHDggX/3qV7e998c//lF++ctfyszMjMzPz8vy8rLMz8+32icAAAAAAEBMJCPh7ejRoztee+KJJyKUpFsf/vCH5e2335a77rpLREQef/zxbe9/8IMflJ/+9KciIvL222/Lnj17Wu/zvffek3/84x879iUi8sUvflF+/etfy6233ioHDx6U973vfa33BwAAAAAAENOok5EPP/yw9r2TJ0/ueJ8p2v/zxBNPbEtIDiERKSJy7733yuuvv34jGVmdpr2xsSHPPvus/PnPf5Yvf/nLcu7cOdm7d2/rff7973+XyWQid95554733nnnHfnvf/8r+/fvJxEJAAAAAAAGYSZ2AWI6efLkjX+2ZbBdmYAcSiJSROTRRx+VF198UdbX1+UjH/nItvfm5ubke9/7nrzwwgvyzjvvyG9/+1s5cOBA632++eab8slPfnJHsnFra0uOHj0qd9xxh6yurrbeDwAAAAAAQApGnYw0UR9WUzdScuyGlIgUEbnzzjvlS1/6kvz85z+XZ599dsf7H/3oR2VpaUmOHj0qH/vYx+T48eNy5cqVVvt8/fXX5e67797x+ksvvSTXrl2TgwcPyn/+8x85e/Zsq/0AAAAAAACkgGQkUPGNb3xDPv3pT8tPfvITefnll+X8+fNy7do1OX/+vLz88svy4x//WK5fvy5PP/20fP7zn5fl5eXGCcl//vOf8te//lU++9nP3njt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" alt="1586487995672"></p> <p><strong>12、功能描述：导出详情数据</strong></p> <p><strong>输入：</strong></p> <table><thead><tr><th>属性</th> <th>类型</th> <th><strong>描述</strong></th> <th>是否必填</th></tr></thead> <tbody><tr><td>map</td> <td><code>Map&lt;String, Object&gt;</code></td> <td>数据</td> <td>必填</td></tr> <tr><td>templetId</td> <td>String</td> <td>模板 id</td> <td>必填</td></tr> <tr><td>isStyle</td> <td>Boolean</td> <td>是否添加样式</td> <td></td></tr></tbody></table> <p>**输出：**byte[] 字节数组</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">exportDataDetailByTemplet</span><span class="token punctuation">(</span><span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> map<span class="token punctuation">,</span> <span class="token class-name">String</span> templetId<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">exportDataDetailByTemplet</span><span class="token punctuation">(</span><span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> map<span class="token punctuation">,</span> <span class="token class-name">String</span> templetId<span class="token punctuation">,</span>
                                        <span class="token class-name">Boolean</span> isStyle<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><img src="data:image/png;base64,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" alt="1586490135938"></p> <p><img src="data:image/png;base64,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Y2Opam08/L2tHF0mnTmm2+Xzv2OMA6wKf1OFwPJrkOJyAACY0iQB8DCAVbVulVWNpxuiC96xweeY7ppd9tV12z6BtWvLn+6KAABw+yYJgH1Cy61q6pbZdbu+rZZ1QbpqGQAAcHuubgxgF7c6AUfV42oKgV3C3WGXxVt83gAAgL2rDYBdQs2xxproo671rmsrXt06dfvoMx5N8AMAgNt3kQHw1IlVuh6jKVDVGbIcfcYgntptdshxiwAAwHX61dQFqLLb7T77GUKWZZ8CV9U+2yajOZy5tMt65b/V3cpBAAMAAM7hIlsAxzJW613bbRXq7jl4uP7QZSy7lJBZFZzrZkK9xeUAADClqwuAda1rTb+3densEo5OmVimy0Qrp07G0vYYLqUL6JhdWa9hOQAATGnSANilG2bf5UOVo8s65b/VTcAy9HH6bNd1e6EFAADScJFjAAEAABieAAgAAJAIARAAACARAiAAAEAiBEAAAIBECIAAAACJEAABAAASIQACAAAkQgAEAABIhAAIAACQCAEQAAAgEQIgAABAIgRAAACARAiAAAAAiRAAAQAAEiEAAgAAJEIABAAASIQACAAAkAgBEAAAIBECIAAAQCIEQAAAgEQIgAAAAIkQAAEAABIhAAIAACRCAAQAAEiEAAgAAJAIARAAACARAiAAAEAiBEAAAIBECIAAAACJEAABAAASIQACAAAkQgAEAABIhAAIAACQCAEQAAAgEQIgAABAIgRAAACARAiAAAAAiRAAAQAAEiEAAgAAJCL78OHDrm7h4+NjvH79+pzl4YZ89bevpi4CAABQ8mqz2cRu93kG/OtPf42IiD9nfz53mbgRX/7w5dRFAAAASl799re/rV7y0/6fqnAIXTy3AL775t3EJQEAAL7621fGAAIAAKRCAAQAAEiEAAgAAJAIARAAACARAiAAAEAiBEAAAIBECIAAAACJEAABAAASIQACAAAkQgAEAABIhAAIAACQCAEQAAAgEQIgAABAIgRAAACARAiAAAAAiRAAAQAAEiEAAgAAJEIABAAASIQACAAAkAgBEAAAIBECIAAAQCIEQAAAgEQIgAAAAIkQAAEAABIhAAIAACRCAAQAAEiEAAgAAJAIARAAACARAiAAAEAiBEAAAIBECIAAAACJEAABAAASIQACAAAkQgAEAABIhAAIAACQCAEQAAAgEQIgAABAIgRAAACARAiAAAAAiRAAAQAAEiEAAgAAJEIABAAASMQgATDLsqve/nA/Q+2vy7HOsX3duud4nAAAwOV4NebOywFjt9s1rlMXRuq2O1wny7JO63ZRt78ugalrGYYuc1eHj6HpNSqXr+2xn/txAAAA/Q0aAA9DQlsoeF6/ar26cNQURE4JkV22KYehPmUbuszPxz8mQJbXb9v+8BhtIR4AALhsJwfAuoDQFgoOW5f6BpM+5Wv6vW39rscas8x1x+kTAsuhse5Y52zFayv3rS8HAIApjNoFtEn54vgwmAwVpOrWb2rJOtdF+zHHqtqmKQS2hcUuZRj6+egbwG9tOQAATOmkADjExW5VN9CmrqF9jn1KeOkT0A7HMVaFtD76dIl9Xr9PS2DT72MH4LYxhbe+HAAApnR0AKzrUth122dtY+3q1js13A21r8Ptq56PY8YGHj4Hbc91eXlTUDyFUAMAANft6ADYZYbMuqDVtYVrrNaoPmMVm3TtUtk0u2afbduO1eX56xI6q8pVNV7TODcAALgug40B7Bpoysu7/O2YWzG07aPNmMHmEkJT32AIAADchouYBCaivlWs73ZjB6y6iVW6HLdurOAQ4/eGmmX0cL2pwyoAADCcyQJg2aUEjcMg13WWzK7lrwu4XR/7UEH32BbAS3mdAACA40weAE8JFV1b3ZoCT1Wo6nJbha7bdClX3yB4qjHCnnAIAACXb9IAOHb4a9LUlbTuhulNt6roMgtn1Xbl/58rRB3TAjhU2crHaboFyK0uBwCAKQ0aAPuMUWsKFE0Xzl1uddB024U+M5BWlb/p+HXrdB2rV9WS2BTM2u5F10WXfTTNUNp38pguXWpveTkAAEzp5ABYd5uCPtsNtaxtnSH+fszxT3lehggUTa/RKc9n1+0BAIDL8KupCwAAAMB5CIAAAACJEAABAAASIQACAAAkQgAEAABIhAAIAACQCAEQAAAgEQIgAABAIgRAAACARAiAAAAAiRAAAQAAEiEAAgAAJEIABAAASIQACAAAkAgBEAAAIBECIAAAQCIEQAAAgEQIgAAAAIkQAAEAABIhAAIAACRCAAQAAEiEAAgAAJAIARAAACARAiAAAEAiBEAAAIBECIAAAACJEAABAAASIQACAAAkQgAEAABIhAAIAACQCAEQAAAgEQIgAABAIgRAAACARAiAAAAAiRAAAQAAEiEAAgAAJEIABAAASIQACAAAkAgBEAAAIAHvvnknAAIAAKTgq799JQACAACk4tX79+8bV8iy7ExF4dZ8+cOXEbH/pgEAADi/d9+8e3E9/upPf/pT5Yo/xA/x+PgY73bvzlU2bozgBwAAl+XV1AXgdr375l0URRGz2WzqosCg1GtukXrNqdSh8/A8cyoBEAAA4Ia9+2bfq7MoCpPAAAAApOL/AbslszI2luDtAAAAAElFTkSuQmCC" alt="1586490209170"></p> <p><strong>13、功能描述：导出列表和详情数据</strong></p> <p><strong>输入：</strong></p> <table><thead><tr><th>属性</th> <th>类型</th> <th><strong>描述</strong></th> <th>是否必填</th></tr></thead> <tbody><tr><td>detailMap</td> <td><code>Map&lt;String, Object&gt;</code></td> <td>详情数据</td> <td>必填</td></tr> <tr><td>columnMaps</td> <td><code>List&lt;Map&lt;String, Object&gt;&gt;</code></td> <td>列表数据 1 (以 SV 开头的标记)</td> <td>必填</td></tr> <tr><td>column2Maps</td> <td><code>List&lt;Map&lt;String, Object&gt;&gt;</code></td> <td>列表数据 2 (以 SVR_开头的标记)</td> <td></td></tr> <tr><td>templetId</td> <td>String</td> <td>模板 id</td> <td>必填</td></tr> <tr><td>isSort</td> <td>Boolean</td> <td>是否添加序号</td> <td></td></tr> <tr><td>isStyle</td> <td>Boolean</td> <td>是否设置样式</td> <td></td></tr> <tr><td>detailIsStyle</td> <td>Boolean</td> <td>是否设置列表样式</td> <td></td></tr></tbody></table> <p>**输出：**byte[] 字节数组</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">exportDataDetailColumnByTemplet</span><span class="token punctuation">(</span><span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> detailMap<span class="token punctuation">,</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Map</span><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> columnMaps<span class="token punctuation">,</span><span class="token class-name">String</span> templetId<span class="token punctuation">,</span> <span class="token class-name">Boolean</span> isSort<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">exportDataDetailColumnByTemplet</span><span class="token punctuation">(</span><span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> detailMap<span class="token punctuation">,</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Map</span><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> columnMaps<span class="token punctuation">,</span><span class="token class-name">String</span> templetId<span class="token punctuation">,</span> <span class="token class-name">Boolean</span> isSort<span class="token punctuation">,</span> <span class="token class-name">Boolean</span> isStyle<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">exportDataDetailColumnByTemplet</span><span class="token punctuation">(</span><span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> detailMap<span class="token punctuation">,</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Map</span><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> columnMaps<span class="token punctuation">,</span> <span class="token class-name">String</span> templetId<span class="token punctuation">,</span> <span class="token class-name">Boolean</span> isSort<span class="token punctuation">,</span> <span class="token class-name">Boolean</span> isStyle<span class="token punctuation">,</span> <span class="token class-name">Boolean</span> detailIsStyle<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">exportDataDetailColumnByTemplet</span><span class="token punctuation">(</span><span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> detailMap<span class="token punctuation">,</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Map</span><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> columnMaps<span class="token punctuation">,</span> <span class="token class-name">String</span> templetId<span class="token punctuation">,</span> <span class="token class-name">Boolean</span> isSort<span class="token punctuation">,</span> <span class="token class-name">CellStyle</span> style<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">exportDataDetailColumnByTemplet</span><span class="token punctuation">(</span><span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> detailMap<span class="token punctuation">,</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Map</span><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> columnMaps<span class="token punctuation">,</span> <span class="token class-name">String</span> templetId<span class="token punctuation">,</span> <span class="token class-name">Boolean</span> isSort<span class="token punctuation">,</span> <span class="token class-name">CellStyle</span> detailStyle<span class="token punctuation">,</span> <span class="token class-name">CellStyle</span> columnStyle<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">exportDataDetailColumnByTemplet</span><span class="token punctuation">(</span><span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> detailMap<span class="token punctuation">,</span>
<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Map</span><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> columnMaps<span class="token punctuation">,</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Map</span><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> column2Maps<span class="token punctuation">,</span>
 <span class="token class-name">String</span> templetId<span class="token punctuation">,</span> <span class="token class-name">Boolean</span> isSort<span class="token punctuation">,</span> <span class="token class-name">Boolean</span> isStyle<span class="token punctuation">,</span><span class="token class-name">Boolean</span> detailIsStyle<span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p><img src="/vuepress-demo/assets/img/1586488714068-1586738232866.43f6aeae.png" alt="1586488714068"></p> <p><img src="/vuepress-demo/assets/img/1586489025083-1586738232867.02a357ce.png" alt="1586489025083"></p> <p><strong>13-1、功能描述：导出列表和详情数据(固定列的数据)</strong></p> <p><strong>输入：</strong></p> <table><thead><tr><th>属性</th> <th>类型</th> <th><strong>描述</strong></th> <th>是否必填</th></tr></thead> <tbody><tr><td>detailMap</td> <td><code>Map&lt;String, Object&gt;</code></td> <td>详情数据</td> <td>必填</td></tr> <tr><td>columnMaps</td> <td><code>List&lt;Map&lt;String, Object&gt;&gt;</code></td> <td>列表数据</td> <td>必填</td></tr> <tr><td>templetId</td> <td>String</td> <td>模板 id</td> <td>必填</td></tr> <tr><td>isSort</td> <td>Boolean</td> <td>是否添加序号</td> <td></td></tr> <tr><td>mergedRowNum</td> <td>Integer</td> <td>合并行数</td> <td>必填</td></tr> <tr><td>fixedColumn</td> <td>Integer</td> <td>固定列的数据复制并赋值</td> <td>必填</td></tr> <tr><td>startRowNum</td> <td>Integer</td> <td>数据解析的开始行数</td> <td>必填</td></tr> <tr><td>remarkColumnNum</td> <td>Integer</td> <td>备注要合并单元格固定列</td> <td></td></tr> <tr><td>remark</td> <td>String</td> <td>备注填写数据</td> <td></td></tr></tbody></table> <p>**输出：**byte[] 字节数组</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">exportDataDetailColumnByTemplet</span><span class="token punctuation">(</span><span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> detailMap<span class="token punctuation">,</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Map</span><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> columnMaps<span class="token punctuation">,</span> <span class="token class-name">String</span> templetId<span class="token punctuation">,</span> <span class="token class-name">Boolean</span> isSort<span class="token punctuation">,</span> <span class="token class-name">Integer</span> mergedRowNum<span class="token punctuation">,</span> <span class="token class-name">Integer</span> fixedColumn<span class="token punctuation">,</span> <span class="token class-name">Integer</span> startRowNum<span class="token punctuation">,</span> <span class="token class-name">Integer</span> remarkColumnNum<span class="token punctuation">,</span>
<span class="token class-name">String</span> remark<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><img src="data:image/png;base64,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" alt="1586740721836"></p> <p><img src="data:image/png;base64,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" alt="1586740810544"></p> <p><strong>14、功能描述：导出列表和详情多个 sheet 数据</strong></p> <p><strong>输入：</strong></p> <table><thead><tr><th>属性</th> <th>类型</th> <th><strong>描述</strong></th> <th>是否必填</th></tr></thead> <tbody><tr><td>listDatas</td> <td><code>List&lt;ExportMoreSheetRequest&gt;</code></td> <td>详情、列表和 sheet 名数据</td> <td>必填</td></tr> <tr><td>templetId</td> <td>String</td> <td>模板 id</td> <td>必填</td></tr> <tr><td>isSort</td> <td>Boolean</td> <td>是否添加序号</td> <td></td></tr> <tr><td>fixedColumn</td> <td>Integer</td> <td>固定列的数据复制并赋值</td> <td>必填</td></tr> <tr><td>startRowNum</td> <td>Integer</td> <td>数据解析的开始行数</td> <td>必填</td></tr> <tr><td>remarkColumnNum</td> <td>Integer</td> <td>备注要合并单元格固定列</td> <td></td></tr> <tr><td>remark</td> <td>String</td> <td>备注填写数据</td> <td></td></tr></tbody></table> <p>ExportMoreSheetRequest 实体属性描述</p> <table><thead><tr><th>属性</th> <th>类型</th> <th><strong>描述</strong></th></tr></thead> <tbody><tr><td>title</td> <td>String</td> <td>主题</td></tr> <tr><td>sheetName</td> <td>String</td> <td>sheet 名</td></tr> <tr><td>headers</td> <td><code>List&lt;ExcelHeaderData&gt;</code></td> <td>表头</td></tr> <tr><td>datas</td> <td><code>List&lt;Map&lt;String,Object&gt;&gt;</code></td> <td>列表数据</td></tr> <tr><td>details</td> <td><code>Map&lt;String,Object&gt;</code></td> <td>详情数据</td></tr></tbody></table> <p>ExcelHeaderData 实体属性描述</p> <table><thead><tr><th>属性</th> <th>类型</th> <th>描述</th></tr></thead> <tbody><tr><td>headerName</td> <td>String</td> <td>表头名称（必填）</td></tr> <tr><td>fieldName</td> <td>String</td> <td>表数据对应的字段属性（即是 Map 对象中的 key 值）（必填）</td></tr> <tr><td>flag</td> <td>String</td> <td>处理图片数据对应值：photo（选填）</td></tr></tbody></table> <p>MyPictureData 图片数据对象</p> <table><thead><tr><th>属性</th> <th>类型</th> <th>描述</th></tr></thead> <tbody><tr><td>pictureData</td> <td>byte[]</td> <td>图片数据（必填）</td></tr> <tr><td>row</td> <td>int</td> <td>行号（选填）</td></tr> <tr><td>column</td> <td>int</td> <td>列号（选填）</td></tr> <tr><td>width</td> <td>int</td> <td>宽度（选填）</td></tr> <tr><td>height</td> <td>int</td> <td>高度（选填）</td></tr> <tr><td>fileName</td> <td>String</td> <td>文件名（必填）</td></tr></tbody></table> <p>**输出：**byte[] 字节数组</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">exportDataDetailColumnMoreSheetByTemplet</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">ExportMoreSheetRequest</span><span class="token punctuation">&gt;</span></span> listDatas<span class="token punctuation">,</span> <span class="token class-name">String</span> templetId<span class="token punctuation">,</span> <span class="token class-name">Boolean</span> isSort<span class="token punctuation">,</span> <span class="token class-name">Integer</span> mergedRowNum<span class="token punctuation">,</span> <span class="token class-name">Integer</span> fixedColumn<span class="token punctuation">,</span> <span class="token class-name">Integer</span> startRowNum<span class="token punctuation">,</span> <span class="token class-name">Integer</span> remarkColumnNum<span class="token punctuation">,</span> <span class="token class-name">String</span> remark<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><img src="data:image/png;base64,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" alt="1586740730115"></p> <p><img src="data:image/png;base64,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" alt="1586740818607"></p> <p><strong>15、功能描述：导出列表数据（多 sheet）</strong></p> <p><strong>输入：</strong></p> <table><thead><tr><th>属性</th> <th>类型</th> <th><strong>描述</strong></th> <th>是否必填</th></tr></thead> <tbody><tr><td>list</td> <td><code>List&lt;List&lt;Map&lt;String, Object&gt;&gt;&gt;</code></td> <td>集合（map）</td> <td>必填</td></tr> <tr><td>templetId</td> <td>String</td> <td>模板 id</td> <td>必填</td></tr> <tr><td>sort</td> <td>Integer</td> <td>是否添加序号</td> <td></td></tr></tbody></table> <p>**输出：**byte[] 字节数组</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">exportDataMoreSheetByMapTemplet</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">List</span><span class="token punctuation">&lt;</span><span class="token class-name">Map</span><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> list<span class="token punctuation">,</span> <span class="token class-name">String</span> templetId<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">exportDataMoreSheetByMapTemplet</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">List</span><span class="token punctuation">&lt;</span><span class="token class-name">Map</span><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> list<span class="token punctuation">,</span> <span class="token class-name">String</span> templetId<span class="token punctuation">,</span> <span class="token class-name">Integer</span> sort<span class="token punctuation">)</span><span class="token punctuation">;</span>


</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><img src="/vuepress-demo/assets/img/1586512181483-1586738278858.b23a9e29.png" alt="1586512181483"></p> <p><img src="/vuepress-demo/assets/img/1586512272780-1586738278858.627c4d91.png" alt="1586512272780"></p> <p><strong>16、功能描述：导出多个 sheet 列表数据</strong></p> <p><strong>输入：</strong></p> <table><thead><tr><th>属性</th> <th>类型</th> <th><strong>描述</strong></th> <th>是否必填</th></tr></thead> <tbody><tr><td>entityList</td> <td><code>List&lt;List&lt;T&gt;&gt;</code></td> <td>集合（实体）</td> <td>必填</td></tr> <tr><td>sheetNames</td> <td><code>List&lt;String&gt;</code></td> <td>sheet 名集合</td> <td>必填</td></tr> <tr><td>templetId</td> <td>String</td> <td>模板 id</td> <td>必填</td></tr> <tr><td>sort</td> <td>Integer</td> <td>是否添加序号</td> <td></td></tr> <tr><td>fontSize</td> <td>Short</td> <td>字体大小</td> <td></td></tr></tbody></table> <p>**输出：**byte[] 字节数组</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">exportDataMoreSheetByTemplet</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">List</span><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> entityList<span class="token punctuation">,</span>
                                               <span class="token class-name">String</span> templetId<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">exportDataMoreSheetByTemplet</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">List</span><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> entityList<span class="token punctuation">,</span>
                                               <span class="token class-name">String</span> templetId<span class="token punctuation">,</span> <span class="token class-name">Integer</span> sort<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">exportDataMoreSheetByTemplet</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">List</span><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> entityList<span class="token punctuation">,</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> sheetNames<span class="token punctuation">,</span> <span class="token class-name">String</span> templetId<span class="token punctuation">,</span> <span class="token class-name">Integer</span> sort<span class="token punctuation">,</span> <span class="token class-name">Short</span> fontSize<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p><img src="/vuepress-demo/assets/img/1586512181483-1586738283451.b23a9e29.png" alt="1586512181483"></p> <p><img src="/vuepress-demo/assets/img/1586512272780-1586738283452.627c4d91.png" alt="1586512272780"></p> <p><strong>17、功能描述：导出多个 sheet 列表数据</strong></p> <p><strong>输入：</strong></p> <table><thead><tr><th>属性</th> <th>类型</th> <th><strong>描述</strong></th> <th>是否必填</th></tr></thead> <tbody><tr><td>entityList</td> <td><code>List&lt;List&lt;T&gt;&gt;</code></td> <td>集合（实体）</td> <td>必填</td></tr> <tr><td>sheetNames</td> <td><code>List&lt;TitleSheetName&gt;</code></td> <td>sheet 名+主题</td> <td>必填</td></tr> <tr><td>templetId</td> <td>String</td> <td>模板 id</td> <td>必填</td></tr> <tr><td>sort</td> <td>Integer</td> <td>是否添加序号</td> <td></td></tr> <tr><td>fontSize</td> <td>Short</td> <td>字体大小</td> <td></td></tr> <tr><td>landscape</td> <td>boolean</td> <td>打印方向，true：横向，false：纵向(默认)</td> <td></td></tr></tbody></table> <p>TitleSheetName 实体属性描述</p> <table><thead><tr><th>属性</th> <th>类型</th> <th><strong>描述</strong></th></tr></thead> <tbody><tr><td>titleName</td> <td>String</td> <td>主题</td></tr> <tr><td>sheetName</td> <td>String</td> <td>sheet 名</td></tr></tbody></table> <p>**输出：**byte[] 字节数组</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">exportDataMoreSheetTitleByTemplet</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">List</span><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> entityList<span class="token punctuation">,</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">TitleSheetName</span><span class="token punctuation">&gt;</span></span> sheetNames<span class="token punctuation">,</span> <span class="token class-name">String</span> templetId<span class="token punctuation">,</span> <span class="token class-name">Integer</span> sort<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">exportDataMoreSheetTitleByTemplet</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">List</span><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> entityList<span class="token punctuation">,</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">TitleSheetName</span><span class="token punctuation">&gt;</span></span> sheetNames<span class="token punctuation">,</span> <span class="token class-name">String</span> templetId<span class="token punctuation">,</span> <span class="token class-name">Integer</span> sort<span class="token punctuation">,</span> <span class="token class-name">Short</span> fontSize<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">exportDataMoreSheetTitleByTemplet</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">List</span><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> entityList<span class="token punctuation">,</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">TitleSheetName</span><span class="token punctuation">&gt;</span></span> sheetNames<span class="token punctuation">,</span> <span class="token class-name">String</span> templetId<span class="token punctuation">,</span> <span class="token class-name">Integer</span> sort<span class="token punctuation">,</span> <span class="token class-name">Short</span> fontSize<span class="token punctuation">,</span>
<span class="token keyword">boolean</span> landscape<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><img src="/vuepress-demo/assets/img/1586512181483-1586738309239.b23a9e29.png" alt="1586512181483"></p> <p><img src="/vuepress-demo/assets/img/1586512272780-1586738309239.627c4d91.png" alt="1586512272780"></p> <p><strong>18、功能描述：详情数据导出</strong></p> <p><strong>输入：</strong></p> <table><thead><tr><th>属性</th> <th>类型</th> <th><strong>描述</strong></th> <th>是否必填</th></tr></thead> <tbody><tr><td>templetId</td> <td>String</td> <td>模板 id</td> <td>必填</td></tr> <tr><td>detailMaps</td> <td><code>Map&lt;String, Object&gt;</code></td> <td>map 数据</td> <td>必填</td></tr></tbody></table> <p>**输出：**byte[] 字节数组</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">exportDetailByTemplet</span><span class="token punctuation">(</span><span class="token class-name">String</span> templetId<span class="token punctuation">,</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> detailMaps<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><img src="data:image/png;base64,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" alt="1586490135938"></p> <p><img src="data:image/png;base64,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Y2Opam08/L2tHF0mnTmm2+Xzv2OMA6wKf1OFwPJrkOJyAACY0iQB8DCAVbVulVWNpxuiC96xweeY7ppd9tV12z6BtWvLn+6KAABw+yYJgH1Cy61q6pbZdbu+rZZ1QbpqGQAAcHuubgxgF7c6AUfV42oKgV3C3WGXxVt83gAAgL2rDYBdQs2xxproo671rmsrXt06dfvoMx5N8AMAgNt3kQHw1IlVuh6jKVDVGbIcfcYgntptdshxiwAAwHX61dQFqLLb7T77GUKWZZ8CV9U+2yajOZy5tMt65b/V3cpBAAMAAM7hIlsAxzJW613bbRXq7jl4uP7QZSy7lJBZFZzrZkK9xeUAADClqwuAda1rTb+3densEo5OmVimy0Qrp07G0vYYLqUL6JhdWa9hOQAATGnSANilG2bf5UOVo8s65b/VTcAy9HH6bNd1e6EFAADScJFjAAEAABieAAgAAJAIARAAACARAiAAAEAiBEAAAIBECIAAAACJEAABAAASIQACAAAkQgAEAABIhAAIAACQCAEQAAAgEQIgAABAIgRAAACARAiAAAAAiRAAAQAAEiEAAgAAJEIABAAASIQACAAAkAgBEAAAIBECIAAAQCIEQAAAgEQIgAAAAIkQAAEAABIhAAIAACRCAAQAAEiEAAgAAJAIARAAACARAiAAAEAiBEAAAIBECIAAAACJEAABAAASIQACAAAkQgAEAABIhAAIAACQCAEQAAAgEQIgAABAIgRAAACARAiAAAAAiRAAAQAAEiEAAgAAJCL78OHDrm7h4+NjvH79+pzl4YZ89bevpi4CAABQ8mqz2cRu93kG/OtPf42IiD9nfz53mbgRX/7w5dRFAAAASl799re/rV7y0/6fqnAIXTy3AL775t3EJQEAAL7621fGAAIAAKRCAAQAAEiEAAgAAJAIARAAACARAiAAAEAiBEAAAIBECIAAAACJEAABAAASIQACAAAkQgAEAABIhAAIAACQCAEQAAAgEQIgAABAIgRAAACARAiAAAAAiRAAAQAAEiEAAgAAJEIABAAASIQACAAAkAgBEAAAIBECIAAAQCIEQAAAgEQIgAAAAIkQAAEAABIhAAIAACRCAAQAAEiEAAgAAJAIARAAACARAiAAAEAiBEAAAIBECIAAAACJEAABAAASIQACAAAkQgAEAABIhAAIAACQCAEQAAAgEQIgAABAIgRAAACARAiAAAAAiRAAAQAAEiEAAgAAJEIABAAASMQgATDLsqve/nA/Q+2vy7HOsX3duud4nAAAwOV4NebOywFjt9s1rlMXRuq2O1wny7JO63ZRt78ugalrGYYuc1eHj6HpNSqXr+2xn/txAAAA/Q0aAA9DQlsoeF6/ar26cNQURE4JkV22KYehPmUbuszPxz8mQJbXb9v+8BhtIR4AALhsJwfAuoDQFgoOW5f6BpM+5Wv6vW39rscas8x1x+kTAsuhse5Y52zFayv3rS8HAIApjNoFtEn54vgwmAwVpOrWb2rJOtdF+zHHqtqmKQS2hcUuZRj6+egbwG9tOQAATOmkADjExW5VN9CmrqF9jn1KeOkT0A7HMVaFtD76dIl9Xr9PS2DT72MH4LYxhbe+HAAApnR0AKzrUth122dtY+3q1js13A21r8Ptq56PY8YGHj4Hbc91eXlTUDyFUAMAANft6ADYZYbMuqDVtYVrrNaoPmMVm3TtUtk0u2afbduO1eX56xI6q8pVNV7TODcAALgug40B7Bpoysu7/O2YWzG07aPNmMHmEkJT32AIAADchouYBCaivlWs73ZjB6y6iVW6HLdurOAQ4/eGmmX0cL2pwyoAADCcyQJg2aUEjcMg13WWzK7lrwu4XR/7UEH32BbAS3mdAACA40weAE8JFV1b3ZoCT1Wo6nJbha7bdClX3yB4qjHCnnAIAACXb9IAOHb4a9LUlbTuhulNt6roMgtn1Xbl/58rRB3TAjhU2crHaboFyK0uBwCAKQ0aAPuMUWsKFE0Xzl1uddB024U+M5BWlb/p+HXrdB2rV9WS2BTM2u5F10WXfTTNUNp38pguXWpveTkAAEzp5ABYd5uCPtsNtaxtnSH+fszxT3lehggUTa/RKc9n1+0BAIDL8KupCwAAAMB5CIAAAACJEAABAAASIQACAAAkQgAEAABIhAAIAACQCAEQAAAgEQIgAABAIgRAAACARAiAAAAAiRAAAQAAEiEAAgAAJEIABAAASIQACAAAkAgBEAAAIBECIAAAQCIEQAAAgEQIgAAAAIkQAAEAABIhAAIAACRCAAQAAEiEAAgAAJAIARAAACARAiAAAEAiBEAAAIBECIAAAACJEAABAAASIQACAAAkQgAEAABIhAAIAACQCAEQAAAgEQIgAABAIgRAAACARAiAAAAAiRAAAQAAEiEAAgAAJEIABAAASIQACAAAkAgBEAAAIAHvvnknAAIAAKTgq799JQACAACk4tX79+8bV8iy7ExF4dZ8+cOXEbH/pgEAADi/d9+8e3E9/upPf/pT5Yo/xA/x+PgY73bvzlU2bozgBwAAl+XV1AXgdr375l0URRGz2WzqosCg1GtukXrNqdSh8/A8cyoBEAAA4Ia9+2bfq7MoCpPAAAAApOL/AbslszI2luDtAAAAAElFTkSuQmCC" alt="1586490209170"></p> <p><strong>18-1、功能描述：详情数据导出(多个 sheet)</strong></p> <p><strong>输入：</strong></p> <table><thead><tr><th>属性</th> <th>类型</th> <th><strong>描述</strong></th> <th>是否必填</th></tr></thead> <tbody><tr><td>templetId</td> <td>String</td> <td>模板 id</td> <td>必填</td></tr> <tr><td>detailMaps</td> <td><code>List&lt;Map&lt;String, Object&gt;&gt;</code></td> <td>集合（map）</td> <td>必填</td></tr></tbody></table> <p>**输出：**byte[] 字节数组</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">exportDetailByTemplet</span><span class="token punctuation">(</span><span class="token class-name">String</span> templetId<span class="token punctuation">,</span>
                                    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Map</span><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> detailMaps<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><img src="data:image/png;base64,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" alt="1586490135938"></p> <p><img src="data:image/png;base64,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Y2Opam08/L2tHF0mnTmm2+Xzv2OMA6wKf1OFwPJrkOJyAACY0iQB8DCAVbVulVWNpxuiC96xweeY7ppd9tV12z6BtWvLn+6KAABw+yYJgH1Cy61q6pbZdbu+rZZ1QbpqGQAAcHuubgxgF7c6AUfV42oKgV3C3WGXxVt83gAAgL2rDYBdQs2xxproo671rmsrXt06dfvoMx5N8AMAgNt3kQHw1IlVuh6jKVDVGbIcfcYgntptdshxiwAAwHX61dQFqLLb7T77GUKWZZ8CV9U+2yajOZy5tMt65b/V3cpBAAMAAM7hIlsAxzJW613bbRXq7jl4uP7QZSy7lJBZFZzrZkK9xeUAADClqwuAda1rTb+3densEo5OmVimy0Qrp07G0vYYLqUL6JhdWa9hOQAATGnSANilG2bf5UOVo8s65b/VTcAy9HH6bNd1e6EFAADScJFjAAEAABieAAgAAJAIARAAACARAiAAAEAiBEAAAIBECIAAAACJEAABAAASIQACAAAkQgAEAABIhAAIAACQCAEQAAAgEQIgAABAIgRAAACARAiAAAAAiRAAAQAAEiEAAgAAJEIABAAASIQACAAAkAgBEAAAIBECIAAAQCIEQAAAgEQIgAAAAIkQAAEAABIhAAIAACRCAAQAAEiEAAgAAJAIARAAACARAiAAAEAiBEAAAIBECIAAAACJEAABAAASIQACAAAkQgAEAABIhAAIAACQCAEQAAAgEQIgAABAIgRAAACARAiAAAAAiRAAAQAAEiEAAgAAJCL78OHDrm7h4+NjvH79+pzl4YZ89bevpi4CAABQ8mqz2cRu93kG/OtPf42IiD9nfz53mbgRX/7w5dRFAAAASl799re/rV7y0/6fqnAIXTy3AL775t3EJQEAAL7621fGAAIAAKRCAAQAAEiEAAgAAJAIARAAACARAiAAAEAiBEAAAIBECIAAAACJEAABAAASIQACAAAkQgAEAABIhAAIAACQCAEQAAAgEQIgAABAIgRAAACARAiAAAAAiRAAAQAAEiEAAgAAJEIABAAASIQACAAAkAgBEAAAIBECIAAAQCIEQAAAgEQIgAAAAIkQAAEAABIhAAIAACRCAAQAAEiEAAgAAJAIARAAACARAiAAAEAiBEAAAIBECIAAAACJEAABAAASIQACAAAkQgAEAABIhAAIAACQCAEQAAAgEQIgAABAIgRAAACARAiAAAAAiRAAAQAAEiEAAgAAJEIABAAASMQgATDLsqve/nA/Q+2vy7HOsX3duud4nAAAwOV4NebOywFjt9s1rlMXRuq2O1wny7JO63ZRt78ugalrGYYuc1eHj6HpNSqXr+2xn/txAAAA/Q0aAA9DQlsoeF6/ar26cNQURE4JkV22KYehPmUbuszPxz8mQJbXb9v+8BhtIR4AALhsJwfAuoDQFgoOW5f6BpM+5Wv6vW39rscas8x1x+kTAsuhse5Y52zFayv3rS8HAIApjNoFtEn54vgwmAwVpOrWb2rJOtdF+zHHqtqmKQS2hcUuZRj6+egbwG9tOQAATOmkADjExW5VN9CmrqF9jn1KeOkT0A7HMVaFtD76dIl9Xr9PS2DT72MH4LYxhbe+HAAApnR0AKzrUth122dtY+3q1js13A21r8Ptq56PY8YGHj4Hbc91eXlTUDyFUAMAANft6ADYZYbMuqDVtYVrrNaoPmMVm3TtUtk0u2afbduO1eX56xI6q8pVNV7TODcAALgug40B7Bpoysu7/O2YWzG07aPNmMHmEkJT32AIAADchouYBCaivlWs73ZjB6y6iVW6HLdurOAQ4/eGmmX0cL2pwyoAADCcyQJg2aUEjcMg13WWzK7lrwu4XR/7UEH32BbAS3mdAACA40weAE8JFV1b3ZoCT1Wo6nJbha7bdClX3yB4qjHCnnAIAACXb9IAOHb4a9LUlbTuhulNt6roMgtn1Xbl/58rRB3TAjhU2crHaboFyK0uBwCAKQ0aAPuMUWsKFE0Xzl1uddB024U+M5BWlb/p+HXrdB2rV9WS2BTM2u5F10WXfTTNUNp38pguXWpveTkAAEzp5ABYd5uCPtsNtaxtnSH+fszxT3lehggUTa/RKc9n1+0BAIDL8KupCwAAAMB5CIAAAACJEAABAAASIQACAAAkQgAEAABIhAAIAACQCAEQAAAgEQIgAABAIgRAAACARAiAAAAAiRAAAQAAEiEAAgAAJEIABAAASIQACAAAkAgBEAAAIBECIAAAQCIEQAAAgEQIgAAAAIkQAAEAABIhAAIAACRCAAQAAEiEAAgAAJAIARAAACARAiAAAEAiBEAAAIBECIAAAACJEAABAAASIQACAAAkQgAEAABIhAAIAACQCAEQAAAgEQIgAABAIgRAAACARAiAAAAAiRAAAQAAEiEAAgAAJEIABAAASIQACAAAkAgBEAAAIAHvvnknAAIAAKTgq799JQACAACk4tX79+8bV8iy7ExF4dZ8+cOXEbH/pgEAADi/d9+8e3E9/upPf/pT5Yo/xA/x+PgY73bvzlU2bozgBwAAl+XV1AXgdr375l0URRGz2WzqosCg1GtukXrNqdSh8/A8cyoBEAAA4Ia9+2bfq7MoCpPAAAAApOL/AbslszI2luDtAAAAAElFTkSuQmCC" alt="1586490209170"></p> <p><strong>19、功能描述：模板导出(图片本地服务下载)</strong></p> <p><strong>输入：</strong></p> <table><thead><tr><th>属性</th> <th>类型</th> <th>*<em>描述</em></th> <th>是否必填</th></tr></thead> <tbody><tr><td>list</td> <td><code>List&lt;Map&lt;String, Object&gt;&gt;</code></td> <td>集合（map）</td> <td>必填</td></tr> <tr><td>templetId</td> <td>String</td> <td>模板 id</td> <td>必填</td></tr> <tr><td>errorMsg</td> <td>String</td> <td>错误提示</td> <td></td></tr> <tr><td>fileHandleService</td> <td>FileHandleService</td> <td>文件服务</td> <td>必填</td></tr></tbody></table> <p>**输出：**字符串（文件本地路径）</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">exportFilePathByMapLocalTemplet</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Map</span><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> list<span class="token punctuation">,</span>
<span class="token class-name">String</span> templetId<span class="token punctuation">,</span><span class="token class-name">FileHandleService</span> fileHandleService<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">exportFilePathByMapLocalTemplet</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Map</span><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> list<span class="token punctuation">,</span>
<span class="token class-name">String</span> templetId<span class="token punctuation">,</span> <span class="token class-name">String</span> errorMsg<span class="token punctuation">,</span> <span class="token class-name">FileHandleService</span> fileHandleService<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><img src="sc.assets/1586487995672-1586738428871.png" alt="1586487995672"></p> <p><strong>20、功能描述：导出数据</strong></p> <p><strong>输入：</strong></p> <table><thead><tr><th>属性</th> <th>类型</th> <th>*<em>描述</em></th> <th>是否必填</th></tr></thead> <tbody><tr><td>list</td> <td><code>List&lt;T&gt;</code></td> <td>集合（实体）</td> <td>必填</td></tr> <tr><td>templetId</td> <td>String</td> <td>模板 id</td> <td>必填</td></tr> <tr><td>errorMsg</td> <td>String</td> <td>错误提示</td> <td></td></tr></tbody></table> <p>**输出：**字符串（文件本地路径）</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token class-name">String</span> <span class="token function">exportFilePathByTemplet</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> entityList<span class="token punctuation">,</span> <span class="token class-name">String</span> templetId<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token class-name">String</span> <span class="token function">exportFilePathByTemplet</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> entityList<span class="token punctuation">,</span> <span class="token class-name">String</span> templetId<span class="token punctuation">,</span>
                                          <span class="token class-name">String</span> errorMsg<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><img src="sc.assets/1586487995672-1586738431663.png" alt="1586487995672"></p> <p><strong>21、功能描述：wordDocx 文档导出</strong></p> <p><strong>输入：</strong></p> <table><thead><tr><th>属性</th> <th>类型</th> <th>*<em>描述</em></th> <th>是否必填</th></tr></thead> <tbody><tr><td>map</td> <td><code>Map&lt;String, Object&gt;</code></td> <td>数据</td> <td>必填</td></tr> <tr><td>mapPic</td> <td><code>Map&lt;String, Object&gt;</code></td> <td>图片数据</td> <td></td></tr></tbody></table> <p>**输出：**byte[] 字节数组</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">wordDocxExport</span><span class="token punctuation">(</span><span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> map<span class="token punctuation">,</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> mapPic<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><img src="/vuepress-demo/assets/img/1586513152491.1e15d828.png" alt="1586513152491"></p> <p><strong>22、功能描述：word 文档导出</strong></p> <p><strong>输入：</strong></p> <table><thead><tr><th>属性</th> <th>类型</th> <th>*<em>描述</em></th> <th>是否必填</th></tr></thead> <tbody><tr><td>map</td> <td><code>Map&lt;String, Object&gt;</code></td> <td>数据</td> <td>必填</td></tr></tbody></table> <p>**输出：**byte[] 字节数组</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">wordExport</span><span class="token punctuation">(</span><span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> map<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><img src="/vuepress-demo/assets/img/1586513152491.1e15d828.png" alt="1586513152491"></p> <h3 id="_2-5-缓存"><a href="#_2-5-缓存" class="header-anchor">#</a> 2.5 缓存</h3> <p>平台缓存使用的是 Redis 框架，开发了 togest-cache 模块。</p> <p><img src="/vuepress-demo/assets/img/image-20200410104253510.f7b9e64c.png" alt="image-20200410104253510"></p> <p>com.togest.config:实例化 RedisTemplate、RedisCacheAspect、RedisService、RedisUtils</p> <p>con.togest.aspect:切面类，处理基于 RedisCacheable、RedisCacheEvict、RedisCachePut 注解的缓存查询、更新、删除</p> <p>con.togest.annotation:定义缓存注解</p> <p>com.togest.common:缓存常量定义</p> <p>com.togest.service:Redis 操作包，主要定义了 RedisService、RedisUtils、RedisLockService、单据号实现</p> <h4 id="_2-5-1-缓存注解"><a href="#_2-5-1-缓存注解" class="header-anchor">#</a> 2.5.1 缓存注解</h4> <p><strong>RedisCacheable -查询注解</strong></p> <table><thead><tr><th>方法</th> <th>描述</th></tr></thead> <tbody><tr><td>String cacheName()</td> <td>缓存开头 KEY</td></tr> <tr><td>Class entityClass()</td> <td>实体 CLASS</td></tr> <tr><td>StorageFormat storage()</td> <td>存储方式，枚举，包括 SERIALIZE(0), JSON(1), JSONLIST(3),MAP(2)</td></tr> <tr><td>String key()</td> <td>定义 key，以#开头，后跟参数。如果对象则#obj.prop</td></tr> <tr><td>long expire() default 0</td> <td>过期时间</td></tr> <tr><td>TimeUnit timeUnit();</td> <td>过期单位</td></tr></tbody></table> <p><strong>RedisCachePut -更新注解</strong></p> <table><thead><tr><th>方法</th> <th>描述</th></tr></thead> <tbody><tr><td>String cacheName()</td> <td>缓存开头 KEY</td></tr> <tr><td>StorageFormat storage()</td> <td>存储方式，枚举，包括 SERIALIZE(0), JSON(1), JSONLIST(3),MAP(2)</td></tr> <tr><td>String key()</td> <td>定义 key，以#开头，后跟参数。如果对象则#obj.prop</td></tr> <tr><td>long expire() default 0</td> <td>过期时间</td></tr> <tr><td>TimeUnit timeUnit();</td> <td>过期单位</td></tr></tbody></table> <p><strong>RedisCacheEvict -删除注解</strong></p> <table><thead><tr><th>方法</th> <th>描述</th></tr></thead> <tbody><tr><td>String cacheName()</td> <td>缓存开头 KEY</td></tr> <tr><td>String key()</td> <td>定义 key，以#开头，后跟参数。如果对象则#obj.prop</td></tr></tbody></table> <p><strong>注解使用举例</strong></p> <p><img src="/vuepress-demo/assets/img/image-20200410110756517.010e7b30.png" alt="image-20200410110756517"></p> <h4 id="_2-5-2-缓存-api"><a href="#_2-5-2-缓存-api" class="header-anchor">#</a> 2.5.2 缓存 API</h4> <p><strong>RedisService 方法如下，</strong> 使用时，可以直接@Autowired</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">void</span> <span class="token function">delete</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token function">getListJson</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">,</span> <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> c<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">void</span> <span class="token function">setMap</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">,</span> <span class="token class-name">Object</span> obj<span class="token punctuation">,</span> <span class="token class-name">Long</span> expireTime<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">void</span> <span class="token function">delete</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> key<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">void</span> <span class="token function">deleteByPrex</span><span class="token punctuation">(</span><span class="token class-name">String</span> prex<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Object</span> <span class="token function">get</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token class-name">T</span> <span class="token function">get</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">,</span> <span class="token keyword">boolean</span> retain<span class="token punctuation">,</span> <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> clazz<span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token class-name">T</span> <span class="token function">get</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">,</span> <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> clazz<span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token keyword">void</span> <span class="token function">expire</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">,</span> <span class="token class-name">Long</span> expireTime<span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token keyword">void</span> <span class="token function">setJson</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">,</span> <span class="token class-name">Object</span> value<span class="token punctuation">,</span> <span class="token class-name">Long</span> expireTime<span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token class-name">T</span> <span class="token function">getJson</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">,</span> <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> c<span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token keyword">void</span> <span class="token function">set</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">,</span> <span class="token class-name">Object</span> value<span class="token punctuation">,</span> <span class="token class-name">Long</span> expireTime<span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token keyword">void</span> <span class="token function">set</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">,</span> <span class="token class-name">Object</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token function">getMulti</span><span class="token punctuation">(</span><span class="token class-name">Collection</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> keys<span class="token punctuation">,</span> <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> clazz<span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token keyword">void</span> <span class="token function">setMulti</span><span class="token punctuation">(</span><span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> objects<span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token keyword">void</span> <span class="token function">setMap</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">,</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Object</span><span class="token punctuation">,</span> <span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> map<span class="token punctuation">,</span> <span class="token class-name">Long</span> expireTime<span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token keyword">void</span> <span class="token function">setMap</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">,</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> map<span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token keyword">void</span> <span class="token function">setMap</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">,</span> <span class="token class-name">String</span> field<span class="token punctuation">,</span> <span class="token class-name">String</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token function">getMap</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">,</span> <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> clazz<span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token class-name">T</span> <span class="token function">getMapField</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">,</span> <span class="token class-name">String</span> field<span class="token punctuation">,</span> <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> clazz<span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token keyword">void</span> <span class="token function">deleteMapField</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> field<span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token keyword">void</span> <span class="token function">set</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token keyword">void</span> <span class="token function">delete</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token function">getMapByPipelined</span><span class="token punctuation">(</span><span class="token keyword">final</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> keys<span class="token punctuation">,</span> <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> clazz<span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token function">getByPipelined</span><span class="token punctuation">(</span><span class="token keyword">final</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> keys<span class="token punctuation">,</span> <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> clazz<span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token function">setMapByPipelined</span><span class="token punctuation">(</span>
			<span class="token keyword">final</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Map</span><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> values<span class="token punctuation">,</span> <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> clazz<span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token function">set</span><span class="token punctuation">(</span><span class="token keyword">final</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> values<span class="token punctuation">,</span> <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> clazz<span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token function">getMapByPipelined</span><span class="token punctuation">(</span><span class="token keyword">final</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> keys<span class="token punctuation">,</span>
			<span class="token keyword">final</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> fields<span class="token punctuation">,</span> <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> clazz<span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token class-name">T</span> <span class="token function">rightProp</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">,</span><span class="token keyword">int</span> timeout<span class="token punctuation">,</span> <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> clazz<span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token keyword">long</span> <span class="token function">leftPush</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">,</span> <span class="token class-name">T</span> data<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br></div></div><p><strong>RedisUtil 方法如下，</strong> 该类针对 RedisTemplate 做了简单封装，使用时，可以直接@Autowired</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">delete</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">/**
	 * 批量删除key
	 *
	 * @param keys
	 */</span>
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">delete</span><span class="token punctuation">(</span><span class="token class-name">Collection</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> keys<span class="token punctuation">)</span> <span class="token punctuation">;</span>
	<span class="token comment">/**
	 * 序列化key
	 *
	 * @param key
	 * @return
	 */</span>
	<span class="token keyword">public</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">dump</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">)</span> <span class="token punctuation">;</span>
	<span class="token comment">/**
	 * 是否存在key
	 *
	 * @param key
	 * @return
	 */</span>
	<span class="token keyword">public</span> <span class="token class-name">Boolean</span> <span class="token function">hasKey</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">/**
	 * 设置过期时间
	 *
	 * @param key
	 * @param timeout
	 * @param unit
	 * @return
	 */</span>
	<span class="token keyword">public</span> <span class="token class-name">Boolean</span> <span class="token function">expire</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">,</span> <span class="token keyword">long</span> timeout<span class="token punctuation">,</span> <span class="token class-name">TimeUnit</span> unit<span class="token punctuation">)</span> <span class="token punctuation">;</span>

	<span class="token comment">/**
	 * 设置过期时间
	 *
	 * @param key
	 * @param date
	 * @return
	 */</span>
	<span class="token keyword">public</span> <span class="token class-name">Boolean</span> <span class="token function">expireAt</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">,</span> <span class="token class-name">Date</span> date<span class="token punctuation">)</span> <span class="token punctuation">;</span>

	<span class="token comment">/**
	 * 查找匹配的key
	 *
	 * @param pattern
	 * @return
	 */</span>
	<span class="token keyword">public</span> <span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> <span class="token function">keys</span><span class="token punctuation">(</span><span class="token class-name">String</span> pattern<span class="token punctuation">)</span> <span class="token punctuation">;</span>
	<span class="token comment">/**
	 * 将当前数据库的 key 移动到给定的数据库 db 当中
	 *
	 * @param key
	 * @param dbIndex
	 * @return
	 */</span>
	<span class="token keyword">public</span> <span class="token class-name">Boolean</span> <span class="token function">move</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">,</span> <span class="token keyword">int</span> dbIndex<span class="token punctuation">)</span> <span class="token punctuation">;</span>
	<span class="token comment">/**
	 * 移除 key 的过期时间，key 将持久保持
	 *
	 * @param key
	 * @return
	 */</span>
	<span class="token keyword">public</span> <span class="token class-name">Boolean</span> <span class="token function">persist</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">)</span> <span class="token punctuation">;</span>
	<span class="token comment">/**
	 * 返回 key 的剩余的过期时间
	 *
	 * @param key
	 * @param unit
	 * @return
	 */</span>
	<span class="token keyword">public</span> <span class="token class-name">Long</span> <span class="token function">getExpire</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">,</span> <span class="token class-name">TimeUnit</span> unit<span class="token punctuation">)</span> <span class="token punctuation">;</span>
	<span class="token comment">/**
	 * 返回 key 的剩余的过期时间
	 *
	 * @param key
	 * @return
	 */</span>
	<span class="token keyword">public</span> <span class="token class-name">Long</span> <span class="token function">getExpire</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">)</span> <span class="token punctuation">;</span>
	<span class="token comment">/**
	 * 从当前数据库中随机返回一个 key
	 *
	 * @return
	 */</span>
	<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">randomKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">;</span>
	<span class="token comment">/**
	 * 修改 key 的名称
	 *
	 * @param oldKey
	 * @param newKey
	 */</span>
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">rename</span><span class="token punctuation">(</span><span class="token class-name">String</span> oldKey<span class="token punctuation">,</span> <span class="token class-name">String</span> newKey<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">/**
	 * 仅当 newkey 不存在时，将 oldKey 改名为 newkey
	 *
	 * @param oldKey
	 * @param newKey
	 * @return
	 */</span>
	<span class="token keyword">public</span> <span class="token class-name">Boolean</span> <span class="token function">renameIfAbsent</span><span class="token punctuation">(</span><span class="token class-name">String</span> oldKey<span class="token punctuation">,</span> <span class="token class-name">String</span> newKey<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">/**
	 * 返回 key 所储存的值的类型
	 *
	 * @param key
	 * @return
	 */</span>
	<span class="token keyword">public</span> <span class="token class-name">DataType</span> <span class="token function">type</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">)</span> <span class="token punctuation">;</span>

	<span class="token comment">/** -------------------string相关操作--------------------- */</span>

	<span class="token comment">/**
	 * 设置指定 key 的值
	 * @param key
	 * @param value
	 */</span>
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">set</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">,</span> <span class="token class-name">String</span> value<span class="token punctuation">)</span> <span class="token punctuation">;</span>
	<span class="token comment">/**
	 * 获取指定 key 的值
	 * @param key
	 * @return
	 */</span>
	<span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">get</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">/**
	 * 返回 key 中字符串值的子字符
	 * @param key
	 * @param start
	 * @param end
	 * @return
	 */</span>
	<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getRange</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">,</span> <span class="token keyword">long</span> start<span class="token punctuation">,</span> <span class="token keyword">long</span> end<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">/**
	 * 将给定 key 的值设为 value ，并返回 key 的旧值(old value)
	 *
	 * @param key
	 * @param value
	 * @return
	 */</span>
	<span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">getAndSet</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">,</span> <span class="token class-name">String</span> value<span class="token punctuation">)</span> <span class="token punctuation">;</span>

	<span class="token comment">/**
	 * 对 key 所储存的字符串值，获取指定偏移量上的位(bit)
	 *
	 * @param key
	 * @param offset
	 * @return
	 */</span>
	<span class="token keyword">public</span> <span class="token class-name">Boolean</span> <span class="token function">getBit</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">,</span> <span class="token keyword">long</span> offset<span class="token punctuation">)</span> <span class="token punctuation">;</span>
	<span class="token comment">/**
	 * 批量获取
	 *
	 * @param keys
	 * @return
	 */</span>
	<span class="token keyword">public</span> <span class="token class-name">List</span> <span class="token function">multiGet</span><span class="token punctuation">(</span><span class="token class-name">Collection</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> keys<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">/**
	 * 设置ASCII码, 字符串'a'的ASCII码是97, 转为二进制是'01100001', 此方法是将二进制第offset位值变为value
	 *
	 * @param key
	 *            位置
	 * @param value
	 *            值,true为1, false为0
	 * @return
	 */</span>
	<span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">setBit</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">,</span> <span class="token keyword">long</span> offset<span class="token punctuation">,</span> <span class="token keyword">boolean</span> value<span class="token punctuation">)</span> <span class="token punctuation">;</span>

	<span class="token comment">/**
	 * 将值 value 关联到 key ，并将 key 的过期时间设为 timeout
	 *
	 * @param key
	 * @param value
	 * @param timeout
	 *            过期时间
	 * @param unit
	 *            时间单位, 天:TimeUnit.DAYS 小时:TimeUnit.HOURS 分钟:TimeUnit.MINUTES
	 *            秒:TimeUnit.SECONDS 毫秒:TimeUnit.MILLISECONDS
	 */</span>
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setEx</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">,</span> <span class="token class-name">String</span> value<span class="token punctuation">,</span> <span class="token keyword">long</span> timeout<span class="token punctuation">,</span> <span class="token class-name">TimeUnit</span> unit<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">/**
	 * 只有在 key 不存在时设置 key 的值
	 *
	 * @param key
	 * @param value
	 * @return 之前已经存在返回false,不存在返回true
	 */</span>
	<span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">setIfAbsent</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">,</span> <span class="token class-name">String</span> value<span class="token punctuation">)</span> <span class="token punctuation">;</span>

	<span class="token comment">/**
	 * 用 value 参数覆写给定 key 所储存的字符串值，从偏移量 offset 开始
	 *
	 * @param key
	 * @param value
	 * @param offset
	 *            从指定位置开始覆写
	 */</span>
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setRange</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">,</span> <span class="token class-name">String</span> value<span class="token punctuation">,</span> <span class="token keyword">long</span> offset<span class="token punctuation">)</span> <span class="token punctuation">;</span>

	<span class="token comment">/**
	 * 获取字符串的长度
	 *
	 * @param key
	 * @return
	 */</span>
	<span class="token keyword">public</span> <span class="token class-name">Long</span> <span class="token function">size</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">)</span> <span class="token punctuation">;</span>

	<span class="token comment">/**
	 * 批量添加
	 *
	 * @param maps
	 */</span>
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">multiSet</span><span class="token punctuation">(</span><span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> maps<span class="token punctuation">)</span> <span class="token punctuation">;</span>

	<span class="token comment">/**
	 * 同时设置一个或多个 key-value 对，当且仅当所有给定 key 都不存在
	 *
	 * @param maps
	 * @return 之前已经存在返回false,不存在返回true
	 */</span>
	<span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">multiSetIfAbsent</span><span class="token punctuation">(</span><span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> maps<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">/**
	 * 增加(自增长), 负数则为自减
	 *

	 * @return
	 */</span>
	<span class="token keyword">public</span> <span class="token class-name">Long</span> <span class="token function">incrBy</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">,</span> <span class="token keyword">long</span> increment<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">/**
	 *
	 * @return
	 */</span>
	<span class="token keyword">public</span> <span class="token class-name">Double</span> <span class="token function">incrByFloat</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">,</span> <span class="token keyword">double</span> increment<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">/**
	 * 追加到末尾
	 *
	 * @param key
	 * @param value
	 * @return
	 */</span>
	<span class="token keyword">public</span> <span class="token class-name">Integer</span> <span class="token function">append</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">,</span> <span class="token class-name">String</span> value<span class="token punctuation">)</span> <span class="token punctuation">;</span>


	<span class="token comment">/**
	 * 获取所有给定字段的值
	 *
	 * @param key
	 * @param fields
	 * @return
	 */</span>
	<span class="token keyword">public</span> <span class="token class-name">List</span> <span class="token function">hMultiGet</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">,</span> <span class="token class-name">Collection</span> fields<span class="token punctuation">)</span> <span class="token punctuation">;</span>

	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">hPut</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">,</span> <span class="token class-name">String</span> hashKey<span class="token punctuation">,</span> <span class="token class-name">String</span> value<span class="token punctuation">)</span> <span class="token punctuation">;</span>

	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">hPutAll</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">,</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> maps<span class="token punctuation">;</span>

	<span class="token comment">/**
	 * 仅当hashKey不存在时才设置
	 *
	 * @param key
	 * @param hashKey
	 * @param value
	 * @return
	 */</span>
	<span class="token keyword">public</span> <span class="token class-name">Boolean</span> <span class="token function">hPutIfAbsent</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">,</span> <span class="token class-name">String</span> hashKey<span class="token punctuation">,</span> <span class="token class-name">String</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">/**
	 * 删除一个或多个哈希表字段
	 *
	 * @param key
	 * @param fields
	 * @return
	 */</span>
	<span class="token keyword">public</span> <span class="token class-name">Long</span> <span class="token function">hDelete</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> fields<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">/**
	 * 查看哈希表 key 中，指定的字段是否存在
	 *
	 * @param key
	 * @param field
	 * @return
	 */</span>
	<span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">hExists</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">,</span> <span class="token class-name">String</span> field<span class="token punctuation">)</span> <span class="token punctuation">;</span>

	<span class="token comment">/**
	 * 为哈希表 key 中的指定字段的整数值加上增量 increment
	 *
	 * @param key
	 * @param field
	 * @param increment
	 * @return
	 */</span>
	<span class="token keyword">public</span> <span class="token class-name">Long</span> <span class="token function">hIncrBy</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">,</span> <span class="token class-name">Object</span> field<span class="token punctuation">,</span> <span class="token keyword">long</span> increment<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">/**
	 * 为哈希表 key 中的指定字段的整数值加上增量 increment
	 *
	 * @param key
	 * @param field
	 * @param delta
	 * @return
	 */</span>
	<span class="token keyword">public</span> <span class="token class-name">Double</span> <span class="token function">hIncrByFloat</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">,</span> <span class="token class-name">Object</span> field<span class="token punctuation">,</span> <span class="token keyword">double</span> delta<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">/**
	 * 获取所有哈希表中的字段
	 *
	 * @param key
	 * @return
	 */</span>
	<span class="token keyword">public</span> <span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> <span class="token function">hKeys</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">/**
	 * 获取哈希表中字段的数量
	 *
	 * @param key
	 * @return
	 */</span>
	<span class="token keyword">public</span> <span class="token class-name">Long</span> <span class="token function">hSize</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">/**
	 * 获取哈希表中所有值
	 *
	 * @param key
	 * @return
	 */</span>
	<span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> <span class="token function">hValues</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">)</span> <span class="token punctuation">;</span>

	<span class="token comment">/**
	 * 迭代哈希表中的键值对
	 *
	 * @param key
	 * @param options
	 * @return
	 */</span>
	<span class="token keyword">public</span> <span class="token class-name">Cursor</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Map<span class="token punctuation">.</span>Entry</span><span class="token punctuation">&lt;</span><span class="token class-name">Object</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> <span class="token function">hScan</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">,</span> <span class="token class-name">ScanOptions</span> options<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">/** ------------------------list相关操作---------------------------- */</span>

	<span class="token comment">/**
	 * 通过索引获取列表中的元素
	 *
	 * @param key
	 * @param index
	 * @return
	 */</span>
	<span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">lIndex</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">,</span> <span class="token keyword">long</span> index<span class="token punctuation">)</span> <span class="token punctuation">;</span>
	<span class="token comment">/**
	 * 获取列表指定范围内的元素
	 *
	 * @param key
	 * @param start
	 *            开始位置, 0是开始位置
	 * @param end
	 *            结束位置, -1返回所有
	 * @return
	 */</span>
	<span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> <span class="token function">lRange</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">,</span> <span class="token keyword">long</span> start<span class="token punctuation">,</span> <span class="token keyword">long</span> end<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">/**
	 * 存储在list头部
	 *
	 * @param key
	 * @param value
	 * @return
	 */</span>
	<span class="token keyword">public</span> <span class="token class-name">Long</span> <span class="token function">lLeftPush</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">,</span> <span class="token class-name">String</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">/**
	 *
	 * @param key
	 * @param value
	 * @return
	 */</span>
	<span class="token keyword">public</span> <span class="token class-name">Long</span> <span class="token function">lLeftPushAll</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">/**
	 *
	 * @param key
	 * @param value
	 * @return
	 */</span>
	<span class="token keyword">public</span> <span class="token class-name">Long</span> <span class="token function">lLeftPushAll</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">,</span> <span class="token class-name">Collection</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> value<span class="token punctuation">)</span> <span class="token punctuation">;</span>

	<span class="token comment">/**
	 * 当list存在的时候才加入
	 *
	 * @param key
	 * @param value
	 * @return
	 */</span>
	<span class="token keyword">public</span> <span class="token class-name">Long</span> <span class="token function">lLeftPushIfPresent</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">,</span> <span class="token class-name">String</span> value<span class="token punctuation">)</span> <span class="token punctuation">;</span>

	<span class="token comment">/**
	 * 如果pivot存在,再pivot前面添加
	 *
	 * @param key
	 * @param pivot
	 * @param value
	 * @return
	 */</span>
	<span class="token keyword">public</span> <span class="token class-name">Long</span> <span class="token function">lLeftPush</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">,</span> <span class="token class-name">String</span> pivot<span class="token punctuation">,</span> <span class="token class-name">String</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">/**
	 *
	 * @param key
	 * @param value
	 * @return
	 */</span>
	<span class="token keyword">public</span> <span class="token class-name">Long</span> <span class="token function">lRightPush</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">,</span> <span class="token class-name">String</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">/**
	 *
	 * @param key
	 * @param value
	 * @return
	 */</span>
	<span class="token keyword">public</span> <span class="token class-name">Long</span> <span class="token function">lRightPushAll</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">/**
	 *
	 * @param key
	 * @param value
	 * @return
	 */</span>
	<span class="token keyword">public</span> <span class="token class-name">Long</span> <span class="token function">lRightPushAll</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">,</span> <span class="token class-name">Collection</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> value<span class="token punctuation">)</span> <span class="token punctuation">;</span>

	<span class="token comment">/**
	 * 为已存在的列表添加值
	 *
	 * @param key
	 * @param value
	 * @return
	 */</span>
	<span class="token keyword">public</span> <span class="token class-name">Long</span> <span class="token function">lRightPushIfPresent</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">,</span> <span class="token class-name">String</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">/**
	 * 在pivot元素的右边添加值
	 *
	 * @param key
	 * @param pivot
	 * @param value
	 * @return
	 */</span>
	<span class="token keyword">public</span> <span class="token class-name">Long</span> <span class="token function">lRightPush</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">,</span> <span class="token class-name">String</span> pivot<span class="token punctuation">,</span> <span class="token class-name">String</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">/**
	 * 通过索引设置列表元素的值
	 *
	 * @param key
	 * @param index
	 *            位置
	 * @param value
	 */</span>
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">lSet</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">,</span> <span class="token keyword">long</span> index<span class="token punctuation">,</span> <span class="token class-name">String</span> value<span class="token punctuation">)</span> <span class="token punctuation">;</span>

	<span class="token comment">/**
	 * 移出并获取列表的第一个元素
	 *
	 * @param key
	 * @return 删除的元素
	 */</span>
	<span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">lLeftPop</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">/**
	 * 移出并获取列表的第一个元素， 如果列表没有元素会阻塞列表直到等待超时或发现可弹出元素为止
	 *
	 * @param key
	 * @param timeout
	 *            等待时间
	 * @param unit
	 *            时间单位
	 * @return
	 */</span>
	<span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">lBLeftPop</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">,</span> <span class="token keyword">long</span> timeout<span class="token punctuation">,</span> <span class="token class-name">TimeUnit</span> unit<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">/**
	 * 移除并获取列表最后一个元素
	 *
	 * @param key
	 * @return 删除的元素
	 */</span>
	<span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">lRightPop</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">)</span> <span class="token punctuation">;</span>

	<span class="token comment">/**
	 * 移出并获取列表的最后一个元素， 如果列表没有元素会阻塞列表直到等待超时或发现可弹出元素为止
	 *
	 * @param key
	 * @param timeout
	 *            等待时间
	 * @param unit
	 *            时间单位
	 * @return
	 */</span>
	<span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">lBRightPop</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">,</span> <span class="token keyword">long</span> timeout<span class="token punctuation">,</span> <span class="token class-name">TimeUnit</span> unit<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">/**
	 * 移除列表的最后一个元素，并将该元素添加到另一个列表并返回
	 *
	 * @param sourceKey
	 * @param destinationKey
	 * @return
	 */</span>
	<span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">lRightPopAndLeftPush</span><span class="token punctuation">(</span><span class="token class-name">String</span> sourceKey<span class="token punctuation">,</span> <span class="token class-name">String</span> destinationKey<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">/**
	 * 从列表中弹出一个值，将弹出的元素插入到另外一个列表中并返回它； 如果列表没有元素会阻塞列表直到等待超时或发现可弹出元素为止
	 *
	 * @param sourceKey
	 * @param destinationKey
	 * @param timeout
	 * @param unit
	 * @return
	 */</span>
	<span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">lBRightPopAndLeftPush</span><span class="token punctuation">(</span><span class="token class-name">String</span> sourceKey<span class="token punctuation">,</span> <span class="token class-name">String</span> destinationKey<span class="token punctuation">,</span>
										<span class="token keyword">long</span> timeout<span class="token punctuation">,</span> <span class="token class-name">TimeUnit</span> unit<span class="token punctuation">)</span> <span class="token punctuation">;</span>

	<span class="token comment">/**
	 * 删除集合中值等于value得元素
	 *
	 * @param key
	 * @param index
	 *            index=0, 删除所有值等于value的元素; index&gt;0, 从头部开始删除第一个值等于value的元素;
	 *            index&lt;0, 从尾部开始删除第一个值等于value的元素;
	 * @param value
	 * @return
	 */</span>
	<span class="token keyword">public</span> <span class="token class-name">Long</span> <span class="token function">lRemove</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">,</span> <span class="token keyword">long</span> index<span class="token punctuation">,</span> <span class="token class-name">String</span> value<span class="token punctuation">)</span> <span class="token punctuation">;</span>

	<span class="token comment">/**
	 * 裁剪list
	 *
	 * @param key
	 * @param start
	 * @param end
	 */</span>
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">lTrim</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">,</span> <span class="token keyword">long</span> start<span class="token punctuation">,</span> <span class="token keyword">long</span> end<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">/**
	 * 获取列表长度
	 *
	 * @param key
	 * @return
	 */</span>
	<span class="token keyword">public</span> <span class="token class-name">Long</span> <span class="token function">lLen</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">)</span> <span class="token punctuation">;</span>

	<span class="token comment">/** --------------------set相关操作-------------------------- */</span>

	<span class="token comment">/**
	 * set添加元素
	 *
	 * @param key
	 * @param values
	 * @return
	 */</span>
	<span class="token keyword">public</span> <span class="token class-name">Long</span> <span class="token function">sAdd</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> values<span class="token punctuation">)</span> <span class="token punctuation">;</span>

	<span class="token comment">/**
	 * set移除元素
	 *
	 * @param key
	 * @param values
	 * @return
	 */</span>
	<span class="token keyword">public</span> <span class="token class-name">Long</span> <span class="token function">sRemove</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> values<span class="token punctuation">)</span> <span class="token punctuation">;</span>

	<span class="token comment">/**
	 * 移除并返回集合的一个随机元素
	 *
	 * @param key
	 * @return
	 */</span>
	<span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">sPop</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">/**
	 * 将元素value从一个集合移到另一个集合
	 *
	 * @param key
	 * @param value
	 * @param destKey
	 * @return
	 */</span>
	<span class="token keyword">public</span> <span class="token class-name">Boolean</span> <span class="token function">sMove</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">,</span> <span class="token class-name">String</span> value<span class="token punctuation">,</span> <span class="token class-name">String</span> destKey<span class="token punctuation">)</span> <span class="token punctuation">;</span>

	<span class="token comment">/**
	 * 获取集合的大小
	 *
	 * @param key
	 * @return
	 */</span>
	<span class="token keyword">public</span> <span class="token class-name">Long</span> <span class="token function">sSize</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">)</span> <span class="token punctuation">;</span>

	<span class="token comment">/**
	 * 判断集合是否包含value
	 *
	 * @param key
	 * @param value
	 * @return
	 */</span>
	<span class="token keyword">public</span> <span class="token class-name">Boolean</span> <span class="token function">sIsMember</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">,</span> <span class="token class-name">Object</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">/**
	 * 获取两个集合的交集
	 *
	 * @param key
	 * @param otherKey
	 * @return
	 */</span>
	<span class="token keyword">public</span> <span class="token class-name">Set</span> <span class="token function">sIntersect</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">,</span> <span class="token class-name">String</span> otherKey<span class="token punctuation">)</span> <span class="token punctuation">;</span>

	<span class="token comment">/**
	 * 获取key集合与多个集合的交集
	 *
	 * @param key
	 * @param otherKeys
	 * @return
	 */</span>
	<span class="token keyword">public</span> <span class="token class-name">Set</span> <span class="token function">sIntersect</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">,</span> <span class="token class-name">Collection</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> otherKeys<span class="token punctuation">)</span> <span class="token punctuation">;</span>

	<span class="token comment">/**
	 * key集合与otherKey集合的交集存储到destKey集合中
	 *
	 * @param key
	 * @param otherKey
	 * @param destKey
	 * @return
	 */</span>
	<span class="token keyword">public</span> <span class="token class-name">Long</span> <span class="token function">sIntersectAndStore</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">,</span> <span class="token class-name">String</span> otherKey<span class="token punctuation">,</span> <span class="token class-name">String</span> destKey<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">/**
	 * key集合与多个集合的交集存储到destKey集合中
	 *
	 * @param key
	 * @param otherKeys
	 * @param destKey
	 * @return
	 */</span>
	<span class="token keyword">public</span> <span class="token class-name">Long</span> <span class="token function">sIntersectAndStore</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">,</span> <span class="token class-name">Collection</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> otherKeys<span class="token punctuation">,</span>
								   <span class="token class-name">String</span> destKey<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">/**
	 * 获取两个集合的并集
	 *
	 * @param key
	 * @param otherKeys
	 * @return
	 */</span>
	<span class="token keyword">public</span> <span class="token class-name">Set</span> <span class="token function">sUnion</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">,</span> <span class="token class-name">String</span> otherKeys<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">/**
	 * 获取key集合与多个集合的并集
	 *
	 * @param key
	 * @param otherKeys
	 * @return
	 */</span>
	<span class="token keyword">public</span> <span class="token class-name">Set</span> <span class="token function">sUnion</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">,</span> <span class="token class-name">Collection</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> otherKeys<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">/**
	 * key集合与otherKey集合的并集存储到destKey中
	 *
	 * @param key
	 * @param otherKey
	 * @param destKey
	 * @return
	 */</span>
	<span class="token keyword">public</span> <span class="token class-name">Long</span> <span class="token function">sUnionAndStore</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">,</span> <span class="token class-name">String</span> otherKey<span class="token punctuation">,</span> <span class="token class-name">String</span> destKey<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">/**
	 * key集合与多个集合的并集存储到destKey中
	 *
	 * @param key
	 * @param otherKeys
	 * @param destKey
	 * @return
	 */</span>
	<span class="token keyword">public</span> <span class="token class-name">Long</span> <span class="token function">sUnionAndStore</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">,</span> <span class="token class-name">Collection</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> otherKeys<span class="token punctuation">,</span>
							   <span class="token class-name">String</span> destKey<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">/**
	 * 获取两个集合的差集
	 *
	 * @param key
	 * @param otherKey
	 * @return
	 */</span>
	<span class="token keyword">public</span> <span class="token class-name">Set</span> <span class="token function">sDifference</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">,</span> <span class="token class-name">String</span> otherKey<span class="token punctuation">)</span> <span class="token punctuation">;</span>

	<span class="token comment">/**
	 * 获取key集合与多个集合的差集
	 *
	 * @param key
	 * @param otherKeys
	 * @return
	 */</span>
	<span class="token keyword">public</span> <span class="token class-name">Set</span> <span class="token function">sDifference</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">,</span> <span class="token class-name">Collection</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> otherKeys<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">/**
	 * key集合与otherKey集合的差集存储到destKey中
	 *
	 * @param key
	 * @param otherKey
	 * @param destKey
	 * @return
	 */</span>
	<span class="token keyword">public</span> <span class="token class-name">Long</span> <span class="token function">sDifference</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">,</span> <span class="token class-name">String</span> otherKey<span class="token punctuation">,</span> <span class="token class-name">String</span> destKey<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">/**
	 * key集合与多个集合的差集存储到destKey中
	 *
	 * @param key
	 * @param otherKeys
	 * @param destKey
	 * @return
	 */</span>
	<span class="token keyword">public</span> <span class="token class-name">Long</span> <span class="token function">sDifference</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">,</span> <span class="token class-name">Collection</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> otherKeys<span class="token punctuation">,</span>
							<span class="token class-name">String</span> destKey<span class="token punctuation">)</span> <span class="token punctuation">;</span>


	<span class="token keyword">public</span> <span class="token class-name">Set</span> <span class="token function">setMembers</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">)</span> <span class="token punctuation">;</span>

	<span class="token comment">/**
	 * 随机获取集合中的一个元素
	 *
	 * @param key
	 * @return
	 */</span>
	<span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">sRandomMember</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">)</span> <span class="token punctuation">;</span>

	<span class="token comment">/**
	 * 随机获取集合中count个元素
	 *
	 * @param key
	 * @param count
	 * @return
	 */</span>
	<span class="token keyword">public</span> <span class="token class-name">List</span> <span class="token function">sRandomMembers</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">,</span> <span class="token keyword">long</span> count<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">/**
	 * 随机获取集合中count个元素并且去除重复的
	 *
	 * @param key
	 * @param count
	 * @return
	 */</span>
	<span class="token keyword">public</span> <span class="token class-name">Set</span> <span class="token function">sDistinctRandomMembers</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">,</span> <span class="token keyword">long</span> count<span class="token punctuation">)</span> <span class="token punctuation">;</span>

	<span class="token comment">/**
	 *
	 * @param key
	 * @param options
	 * @return
	 */</span>
	<span class="token keyword">public</span> <span class="token class-name">Cursor</span> <span class="token function">sScan</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">,</span> <span class="token class-name">ScanOptions</span> options<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">/**------------------zSet相关操作--------------------------------*/</span>

	<span class="token comment">/**
	 * 添加元素,有序集合是按照元素的score值由小到大排列
	 *
	 * @param key
	 * @param value
	 * @param score
	 * @return
	 */</span>
	<span class="token keyword">public</span> <span class="token class-name">Boolean</span> <span class="token function">zAdd</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">,</span> <span class="token class-name">String</span> value<span class="token punctuation">,</span> <span class="token keyword">double</span> score<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">/**
	 *
	 * @param key
	 * @param values
	 * @return
	 */</span>
	<span class="token keyword">public</span> <span class="token class-name">Long</span> <span class="token function">zAdd</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">,</span> <span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">ZSetOperations<span class="token punctuation">.</span>TypedTuple</span><span class="token punctuation">&lt;</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> values<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">/**
	 *
	 * @param key
	 * @param values
	 * @return
	 */</span>
	<span class="token keyword">public</span> <span class="token class-name">Long</span> <span class="token function">zRemove</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> values<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">/**
	 * 增加元素的score值，并返回增加后的值
	 *
	 * @param key
	 * @param value
	 * @param delta
	 * @return
	 */</span>
	<span class="token keyword">public</span> <span class="token class-name">Double</span> <span class="token function">zIncrementScore</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">,</span> <span class="token class-name">String</span> value<span class="token punctuation">,</span> <span class="token keyword">double</span> delta<span class="token punctuation">)</span> <span class="token punctuation">;</span>

	<span class="token comment">/**
	 * 返回元素在集合的排名,有序集合是按照元素的score值由小到大排列
	 *
	 * @param key
	 * @param value
	 * @return 0表示第一位
	 */</span>
	<span class="token keyword">public</span> <span class="token class-name">Long</span> <span class="token function">zRank</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">,</span> <span class="token class-name">Object</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">/**
	 * 返回元素在集合的排名,按元素的score值由大到小排列
	 *
	 * @param key
	 * @param value
	 * @return
	 */</span>
	<span class="token keyword">public</span> <span class="token class-name">Long</span> <span class="token function">zReverseRank</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">,</span> <span class="token class-name">Object</span> value<span class="token punctuation">)</span> <span class="token punctuation">;</span>

	<span class="token comment">/**
	 * 获取集合的元素, 从小到大排序
	 *
	 * @param key
	 * @param start
	 *            开始位置
	 * @param end
	 *            结束位置, -1查询所有
	 * @return
	 */</span>
	<span class="token keyword">public</span> <span class="token class-name">Set</span> <span class="token function">zRange</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">,</span> <span class="token keyword">long</span> start<span class="token punctuation">,</span> <span class="token keyword">long</span> end<span class="token punctuation">)</span> <span class="token punctuation">;</span>

	<span class="token comment">/**
	 * 获取集合元素, 并且把score值也获取
	 *
	 * @param key
	 * @param start
	 * @param end
	 * @return
	 */</span>
	<span class="token keyword">public</span> <span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">ZSetOperations<span class="token punctuation">.</span>TypedTuple</span><span class="token punctuation">&lt;</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> <span class="token function">zRangeWithScores</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">,</span> <span class="token keyword">long</span> start<span class="token punctuation">,</span>
																   <span class="token keyword">long</span> end<span class="token punctuation">)</span> <span class="token punctuation">;</span>

	<span class="token comment">/**
	 * 根据Score值查询集合元素
	 *
	 * @param key
	 * @param min
	 *            最小值
	 * @param max
	 *            最大值
	 * @return
	 */</span>
	<span class="token keyword">public</span> <span class="token class-name">Set</span> <span class="token function">zRangeByScore</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">,</span> <span class="token keyword">double</span> min<span class="token punctuation">,</span> <span class="token keyword">double</span> max<span class="token punctuation">)</span> <span class="token punctuation">;</span>

	<span class="token comment">/**
	 * 根据Score值查询集合元素, 从小到大排序
	 *
	 * @param key
	 * @param min
	 *            最小值
	 * @param max
	 *            最大值
	 * @return
	 */</span>
	<span class="token keyword">public</span> <span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">ZSetOperations<span class="token punctuation">.</span>TypedTuple</span><span class="token punctuation">&lt;</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> <span class="token function">zRangeByScoreWithScores</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">,</span>
																		  <span class="token keyword">double</span> min<span class="token punctuation">,</span> <span class="token keyword">double</span> max<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">/**
	 *
	 * @param key
	 * @param min
	 * @param max
	 * @param start
	 * @param end
	 * @return
	 */</span>
	<span class="token keyword">public</span> <span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">ZSetOperations<span class="token punctuation">.</span>TypedTuple</span><span class="token punctuation">&lt;</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> <span class="token function">zRangeByScoreWithScores</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">,</span>
																		  <span class="token keyword">double</span> min<span class="token punctuation">,</span> <span class="token keyword">double</span> max<span class="token punctuation">,</span> <span class="token keyword">long</span> start<span class="token punctuation">,</span> <span class="token keyword">long</span> end<span class="token punctuation">)</span> <span class="token punctuation">;</span>

	<span class="token comment">/**
	 * 获取集合的元素, 从大到小排序
	 *
	 * @param key
	 * @param start
	 * @param end
	 * @return
	 */</span>
	<span class="token keyword">public</span> <span class="token class-name">Set</span> <span class="token function">zReverseRange</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">,</span> <span class="token keyword">long</span> start<span class="token punctuation">,</span> <span class="token keyword">long</span> end<span class="token punctuation">)</span> <span class="token punctuation">;</span>

	<span class="token comment">/**
	 * 获取集合的元素, 从大到小排序, 并返回score值
	 *
	 * @param key
	 * @param start
	 * @param end
	 * @return
	 */</span>
	<span class="token keyword">public</span> <span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">ZSetOperations<span class="token punctuation">.</span>TypedTuple</span><span class="token punctuation">&lt;</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> <span class="token function">zReverseRangeWithScores</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">,</span>
																		  <span class="token keyword">long</span> start<span class="token punctuation">,</span> <span class="token keyword">long</span> end<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">/**
	 * 根据Score值查询集合元素, 从大到小排序
	 *
	 * @param key
	 * @param min
	 * @param max
	 * @return
	 */</span>
	<span class="token keyword">public</span> <span class="token class-name">Set</span> <span class="token function">zReverseRangeByScore</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">,</span> <span class="token keyword">double</span> min<span class="token punctuation">,</span>
											<span class="token keyword">double</span> max<span class="token punctuation">)</span> <span class="token punctuation">;</span>

	<span class="token comment">/**
	 * 根据Score值查询集合元素, 从大到小排序
	 *
	 * @param key
	 * @param min
	 * @param max
	 * @return
	 */</span>
	<span class="token keyword">public</span> <span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">ZSetOperations<span class="token punctuation">.</span>TypedTuple</span><span class="token punctuation">&lt;</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> <span class="token function">zReverseRangeByScoreWithScores</span><span class="token punctuation">(</span>
			<span class="token class-name">String</span> key<span class="token punctuation">,</span> <span class="token keyword">double</span> min<span class="token punctuation">,</span> <span class="token keyword">double</span> max<span class="token punctuation">)</span> <span class="token punctuation">;</span>

	<span class="token comment">/**
	 *
	 * @param key
	 * @param min
	 * @param max
	 * @param start
	 * @param end
	 * @return
	 */</span>
	<span class="token keyword">public</span> <span class="token class-name">Set</span> <span class="token function">zReverseRangeByScore</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">,</span> <span class="token keyword">double</span> min<span class="token punctuation">,</span>
											<span class="token keyword">double</span> max<span class="token punctuation">,</span> <span class="token keyword">long</span> start<span class="token punctuation">,</span> <span class="token keyword">long</span> end<span class="token punctuation">)</span> <span class="token punctuation">;</span>

	<span class="token comment">/**
	 * 根据score值获取集合元素数量
	 *
	 * @param key
	 * @param min
	 * @param max
	 * @return
	 */</span>
	<span class="token keyword">public</span> <span class="token class-name">Long</span> <span class="token function">zCount</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">,</span> <span class="token keyword">double</span> min<span class="token punctuation">,</span> <span class="token keyword">double</span> max<span class="token punctuation">)</span> <span class="token punctuation">;</span>

	<span class="token comment">/**
	 * 获取集合大小
	 *
	 * @param key
	 * @return
	 */</span>
	<span class="token keyword">public</span> <span class="token class-name">Long</span> <span class="token function">zSize</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">/**
	 * 获取集合大小
	 *
	 * @param key
	 * @return
	 */</span>
	<span class="token keyword">public</span> <span class="token class-name">Long</span> <span class="token function">zZCard</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">/**
	 * 获取集合中value元素的score值
	 *
	 * @param key
	 * @param value
	 * @return
	 */</span>
	<span class="token keyword">public</span> <span class="token class-name">Double</span> <span class="token function">zScore</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">,</span> <span class="token class-name">Object</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">/**
	 * 移除指定索引位置的成员
	 *
	 * @param key
	 * @param start
	 * @param end
	 * @return
	 */</span>
	<span class="token keyword">public</span> <span class="token class-name">Long</span> <span class="token function">zRemoveRange</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">,</span> <span class="token keyword">long</span> start<span class="token punctuation">,</span> <span class="token keyword">long</span> end<span class="token punctuation">)</span> <span class="token punctuation">;</span>

	<span class="token comment">/**
	 * 根据指定的score值的范围来移除成员
	 *
	 * @param key
	 * @param min
	 * @param max
	 * @return
	 */</span>
	<span class="token keyword">public</span> <span class="token class-name">Long</span> <span class="token function">zRemoveRangeByScore</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">,</span> <span class="token keyword">double</span> min<span class="token punctuation">,</span> <span class="token keyword">double</span> max<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">/**
	 * 获取key和otherKey的并集并存储在destKey中
	 *
	 * @param key
	 * @param otherKey
	 * @param destKey
	 * @return
	 */</span>
	<span class="token keyword">public</span> <span class="token class-name">Long</span> <span class="token function">zUnionAndStore</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">,</span> <span class="token class-name">String</span> otherKey<span class="token punctuation">,</span> <span class="token class-name">String</span> destKey<span class="token punctuation">)</span> <span class="token punctuation">;</span>

	<span class="token comment">/**
	 *
	 * @param key
	 * @param otherKeys
	 * @param destKey
	 * @return
	 */</span>
	<span class="token keyword">public</span> <span class="token class-name">Long</span> <span class="token function">zUnionAndStore</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">,</span> <span class="token class-name">Collection</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> otherKeys<span class="token punctuation">,</span>
							   <span class="token class-name">String</span> destKey<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">/**
	 * 交集
	 *
	 * @param key
	 * @param otherKey
	 * @param destKey
	 * @return
	 */</span>
	<span class="token keyword">public</span> <span class="token class-name">Long</span> <span class="token function">zIntersectAndStore</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">,</span> <span class="token class-name">String</span> otherKey<span class="token punctuation">,</span>
								   <span class="token class-name">String</span> destKey<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">/**
	 * 交集
	 *
	 * @param key
	 * @param otherKeys
	 * @param destKey
	 * @return
	 */</span>
	<span class="token keyword">public</span> <span class="token class-name">Long</span> <span class="token function">zIntersectAndStore</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">,</span> <span class="token class-name">Collection</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> otherKeys<span class="token punctuation">,</span>
								   <span class="token class-name">String</span> destKey<span class="token punctuation">)</span> <span class="token punctuation">;</span>

	<span class="token comment">/**
	 *
	 * @param key
	 * @param options
	 * @return
	 */</span>
	<span class="token keyword">public</span> <span class="token class-name">Cursor</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">ZSetOperations<span class="token punctuation">.</span>TypedTuple</span><span class="token punctuation">&lt;</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> <span class="token function">zScan</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">,</span> <span class="token class-name">ScanOptions</span> options<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">eval</span><span class="token punctuation">(</span><span class="token keyword">final</span> <span class="token class-name">String</span> script<span class="token punctuation">,</span> <span class="token keyword">final</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> keys<span class="token punctuation">,</span> <span class="token keyword">final</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> args<span class="token punctuation">)</span> <span class="token punctuation">;</span>
	<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">set</span><span class="token punctuation">(</span><span class="token keyword">final</span> <span class="token class-name">String</span> key<span class="token punctuation">,</span> <span class="token keyword">final</span> <span class="token class-name">String</span> value<span class="token punctuation">,</span> <span class="token keyword">final</span> <span class="token class-name">String</span> nx<span class="token punctuation">,</span> <span class="token keyword">final</span> <span class="token class-name">String</span> ex<span class="token punctuation">,</span> <span class="token keyword">final</span> <span class="token keyword">long</span> time<span class="token punctuation">)</span> <span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br><span class="line-number">120</span><br><span class="line-number">121</span><br><span class="line-number">122</span><br><span class="line-number">123</span><br><span class="line-number">124</span><br><span class="line-number">125</span><br><span class="line-number">126</span><br><span class="line-number">127</span><br><span class="line-number">128</span><br><span class="line-number">129</span><br><span class="line-number">130</span><br><span class="line-number">131</span><br><span class="line-number">132</span><br><span class="line-number">133</span><br><span class="line-number">134</span><br><span class="line-number">135</span><br><span class="line-number">136</span><br><span class="line-number">137</span><br><span class="line-number">138</span><br><span class="line-number">139</span><br><span class="line-number">140</span><br><span class="line-number">141</span><br><span class="line-number">142</span><br><span class="line-number">143</span><br><span class="line-number">144</span><br><span class="line-number">145</span><br><span class="line-number">146</span><br><span class="line-number">147</span><br><span class="line-number">148</span><br><span class="line-number">149</span><br><span class="line-number">150</span><br><span class="line-number">151</span><br><span class="line-number">152</span><br><span class="line-number">153</span><br><span class="line-number">154</span><br><span class="line-number">155</span><br><span class="line-number">156</span><br><span class="line-number">157</span><br><span class="line-number">158</span><br><span class="line-number">159</span><br><span class="line-number">160</span><br><span class="line-number">161</span><br><span class="line-number">162</span><br><span class="line-number">163</span><br><span class="line-number">164</span><br><span class="line-number">165</span><br><span class="line-number">166</span><br><span class="line-number">167</span><br><span class="line-number">168</span><br><span class="line-number">169</span><br><span class="line-number">170</span><br><span class="line-number">171</span><br><span class="line-number">172</span><br><span class="line-number">173</span><br><span class="line-number">174</span><br><span class="line-number">175</span><br><span class="line-number">176</span><br><span class="line-number">177</span><br><span class="line-number">178</span><br><span class="line-number">179</span><br><span class="line-number">180</span><br><span class="line-number">181</span><br><span class="line-number">182</span><br><span class="line-number">183</span><br><span class="line-number">184</span><br><span class="line-number">185</span><br><span class="line-number">186</span><br><span class="line-number">187</span><br><span class="line-number">188</span><br><span class="line-number">189</span><br><span class="line-number">190</span><br><span class="line-number">191</span><br><span class="line-number">192</span><br><span class="line-number">193</span><br><span class="line-number">194</span><br><span class="line-number">195</span><br><span class="line-number">196</span><br><span class="line-number">197</span><br><span class="line-number">198</span><br><span class="line-number">199</span><br><span class="line-number">200</span><br><span class="line-number">201</span><br><span class="line-number">202</span><br><span class="line-number">203</span><br><span class="line-number">204</span><br><span class="line-number">205</span><br><span class="line-number">206</span><br><span class="line-number">207</span><br><span class="line-number">208</span><br><span class="line-number">209</span><br><span class="line-number">210</span><br><span class="line-number">211</span><br><span class="line-number">212</span><br><span class="line-number">213</span><br><span class="line-number">214</span><br><span class="line-number">215</span><br><span class="line-number">216</span><br><span class="line-number">217</span><br><span class="line-number">218</span><br><span class="line-number">219</span><br><span class="line-number">220</span><br><span class="line-number">221</span><br><span class="line-number">222</span><br><span class="line-number">223</span><br><span class="line-number">224</span><br><span class="line-number">225</span><br><span class="line-number">226</span><br><span class="line-number">227</span><br><span class="line-number">228</span><br><span class="line-number">229</span><br><span class="line-number">230</span><br><span class="line-number">231</span><br><span class="line-number">232</span><br><span class="line-number">233</span><br><span class="line-number">234</span><br><span class="line-number">235</span><br><span class="line-number">236</span><br><span class="line-number">237</span><br><span class="line-number">238</span><br><span class="line-number">239</span><br><span class="line-number">240</span><br><span class="line-number">241</span><br><span class="line-number">242</span><br><span class="line-number">243</span><br><span class="line-number">244</span><br><span class="line-number">245</span><br><span class="line-number">246</span><br><span class="line-number">247</span><br><span class="line-number">248</span><br><span class="line-number">249</span><br><span class="line-number">250</span><br><span class="line-number">251</span><br><span class="line-number">252</span><br><span class="line-number">253</span><br><span class="line-number">254</span><br><span class="line-number">255</span><br><span class="line-number">256</span><br><span class="line-number">257</span><br><span class="line-number">258</span><br><span class="line-number">259</span><br><span class="line-number">260</span><br><span class="line-number">261</span><br><span class="line-number">262</span><br><span class="line-number">263</span><br><span class="line-number">264</span><br><span class="line-number">265</span><br><span class="line-number">266</span><br><span class="line-number">267</span><br><span class="line-number">268</span><br><span class="line-number">269</span><br><span class="line-number">270</span><br><span class="line-number">271</span><br><span class="line-number">272</span><br><span class="line-number">273</span><br><span class="line-number">274</span><br><span class="line-number">275</span><br><span class="line-number">276</span><br><span class="line-number">277</span><br><span class="line-number">278</span><br><span class="line-number">279</span><br><span class="line-number">280</span><br><span class="line-number">281</span><br><span class="line-number">282</span><br><span class="line-number">283</span><br><span class="line-number">284</span><br><span class="line-number">285</span><br><span class="line-number">286</span><br><span class="line-number">287</span><br><span class="line-number">288</span><br><span class="line-number">289</span><br><span class="line-number">290</span><br><span class="line-number">291</span><br><span class="line-number">292</span><br><span class="line-number">293</span><br><span class="line-number">294</span><br><span class="line-number">295</span><br><span class="line-number">296</span><br><span class="line-number">297</span><br><span class="line-number">298</span><br><span class="line-number">299</span><br><span class="line-number">300</span><br><span class="line-number">301</span><br><span class="line-number">302</span><br><span class="line-number">303</span><br><span class="line-number">304</span><br><span class="line-number">305</span><br><span class="line-number">306</span><br><span class="line-number">307</span><br><span class="line-number">308</span><br><span class="line-number">309</span><br><span class="line-number">310</span><br><span class="line-number">311</span><br><span class="line-number">312</span><br><span class="line-number">313</span><br><span class="line-number">314</span><br><span class="line-number">315</span><br><span class="line-number">316</span><br><span class="line-number">317</span><br><span class="line-number">318</span><br><span class="line-number">319</span><br><span class="line-number">320</span><br><span class="line-number">321</span><br><span class="line-number">322</span><br><span class="line-number">323</span><br><span class="line-number">324</span><br><span class="line-number">325</span><br><span class="line-number">326</span><br><span class="line-number">327</span><br><span class="line-number">328</span><br><span class="line-number">329</span><br><span class="line-number">330</span><br><span class="line-number">331</span><br><span class="line-number">332</span><br><span class="line-number">333</span><br><span class="line-number">334</span><br><span class="line-number">335</span><br><span class="line-number">336</span><br><span class="line-number">337</span><br><span class="line-number">338</span><br><span class="line-number">339</span><br><span class="line-number">340</span><br><span class="line-number">341</span><br><span class="line-number">342</span><br><span class="line-number">343</span><br><span class="line-number">344</span><br><span class="line-number">345</span><br><span class="line-number">346</span><br><span class="line-number">347</span><br><span class="line-number">348</span><br><span class="line-number">349</span><br><span class="line-number">350</span><br><span class="line-number">351</span><br><span class="line-number">352</span><br><span class="line-number">353</span><br><span class="line-number">354</span><br><span class="line-number">355</span><br><span class="line-number">356</span><br><span class="line-number">357</span><br><span class="line-number">358</span><br><span class="line-number">359</span><br><span class="line-number">360</span><br><span class="line-number">361</span><br><span class="line-number">362</span><br><span class="line-number">363</span><br><span class="line-number">364</span><br><span class="line-number">365</span><br><span class="line-number">366</span><br><span class="line-number">367</span><br><span class="line-number">368</span><br><span class="line-number">369</span><br><span class="line-number">370</span><br><span class="line-number">371</span><br><span class="line-number">372</span><br><span class="line-number">373</span><br><span class="line-number">374</span><br><span class="line-number">375</span><br><span class="line-number">376</span><br><span class="line-number">377</span><br><span class="line-number">378</span><br><span class="line-number">379</span><br><span class="line-number">380</span><br><span class="line-number">381</span><br><span class="line-number">382</span><br><span class="line-number">383</span><br><span class="line-number">384</span><br><span class="line-number">385</span><br><span class="line-number">386</span><br><span class="line-number">387</span><br><span class="line-number">388</span><br><span class="line-number">389</span><br><span class="line-number">390</span><br><span class="line-number">391</span><br><span class="line-number">392</span><br><span class="line-number">393</span><br><span class="line-number">394</span><br><span class="line-number">395</span><br><span class="line-number">396</span><br><span class="line-number">397</span><br><span class="line-number">398</span><br><span class="line-number">399</span><br><span class="line-number">400</span><br><span class="line-number">401</span><br><span class="line-number">402</span><br><span class="line-number">403</span><br><span class="line-number">404</span><br><span class="line-number">405</span><br><span class="line-number">406</span><br><span class="line-number">407</span><br><span class="line-number">408</span><br><span class="line-number">409</span><br><span class="line-number">410</span><br><span class="line-number">411</span><br><span class="line-number">412</span><br><span class="line-number">413</span><br><span class="line-number">414</span><br><span class="line-number">415</span><br><span class="line-number">416</span><br><span class="line-number">417</span><br><span class="line-number">418</span><br><span class="line-number">419</span><br><span class="line-number">420</span><br><span class="line-number">421</span><br><span class="line-number">422</span><br><span class="line-number">423</span><br><span class="line-number">424</span><br><span class="line-number">425</span><br><span class="line-number">426</span><br><span class="line-number">427</span><br><span class="line-number">428</span><br><span class="line-number">429</span><br><span class="line-number">430</span><br><span class="line-number">431</span><br><span class="line-number">432</span><br><span class="line-number">433</span><br><span class="line-number">434</span><br><span class="line-number">435</span><br><span class="line-number">436</span><br><span class="line-number">437</span><br><span class="line-number">438</span><br><span class="line-number">439</span><br><span class="line-number">440</span><br><span class="line-number">441</span><br><span class="line-number">442</span><br><span class="line-number">443</span><br><span class="line-number">444</span><br><span class="line-number">445</span><br><span class="line-number">446</span><br><span class="line-number">447</span><br><span class="line-number">448</span><br><span class="line-number">449</span><br><span class="line-number">450</span><br><span class="line-number">451</span><br><span class="line-number">452</span><br><span class="line-number">453</span><br><span class="line-number">454</span><br><span class="line-number">455</span><br><span class="line-number">456</span><br><span class="line-number">457</span><br><span class="line-number">458</span><br><span class="line-number">459</span><br><span class="line-number">460</span><br><span class="line-number">461</span><br><span class="line-number">462</span><br><span class="line-number">463</span><br><span class="line-number">464</span><br><span class="line-number">465</span><br><span class="line-number">466</span><br><span class="line-number">467</span><br><span class="line-number">468</span><br><span class="line-number">469</span><br><span class="line-number">470</span><br><span class="line-number">471</span><br><span class="line-number">472</span><br><span class="line-number">473</span><br><span class="line-number">474</span><br><span class="line-number">475</span><br><span class="line-number">476</span><br><span class="line-number">477</span><br><span class="line-number">478</span><br><span class="line-number">479</span><br><span class="line-number">480</span><br><span class="line-number">481</span><br><span class="line-number">482</span><br><span class="line-number">483</span><br><span class="line-number">484</span><br><span class="line-number">485</span><br><span class="line-number">486</span><br><span class="line-number">487</span><br><span class="line-number">488</span><br><span class="line-number">489</span><br><span class="line-number">490</span><br><span class="line-number">491</span><br><span class="line-number">492</span><br><span class="line-number">493</span><br><span class="line-number">494</span><br><span class="line-number">495</span><br><span class="line-number">496</span><br><span class="line-number">497</span><br><span class="line-number">498</span><br><span class="line-number">499</span><br><span class="line-number">500</span><br><span class="line-number">501</span><br><span class="line-number">502</span><br><span class="line-number">503</span><br><span class="line-number">504</span><br><span class="line-number">505</span><br><span class="line-number">506</span><br><span class="line-number">507</span><br><span class="line-number">508</span><br><span class="line-number">509</span><br><span class="line-number">510</span><br><span class="line-number">511</span><br><span class="line-number">512</span><br><span class="line-number">513</span><br><span class="line-number">514</span><br><span class="line-number">515</span><br><span class="line-number">516</span><br><span class="line-number">517</span><br><span class="line-number">518</span><br><span class="line-number">519</span><br><span class="line-number">520</span><br><span class="line-number">521</span><br><span class="line-number">522</span><br><span class="line-number">523</span><br><span class="line-number">524</span><br><span class="line-number">525</span><br><span class="line-number">526</span><br><span class="line-number">527</span><br><span class="line-number">528</span><br><span class="line-number">529</span><br><span class="line-number">530</span><br><span class="line-number">531</span><br><span class="line-number">532</span><br><span class="line-number">533</span><br><span class="line-number">534</span><br><span class="line-number">535</span><br><span class="line-number">536</span><br><span class="line-number">537</span><br><span class="line-number">538</span><br><span class="line-number">539</span><br><span class="line-number">540</span><br><span class="line-number">541</span><br><span class="line-number">542</span><br><span class="line-number">543</span><br><span class="line-number">544</span><br><span class="line-number">545</span><br><span class="line-number">546</span><br><span class="line-number">547</span><br><span class="line-number">548</span><br><span class="line-number">549</span><br><span class="line-number">550</span><br><span class="line-number">551</span><br><span class="line-number">552</span><br><span class="line-number">553</span><br><span class="line-number">554</span><br><span class="line-number">555</span><br><span class="line-number">556</span><br><span class="line-number">557</span><br><span class="line-number">558</span><br><span class="line-number">559</span><br><span class="line-number">560</span><br><span class="line-number">561</span><br><span class="line-number">562</span><br><span class="line-number">563</span><br><span class="line-number">564</span><br><span class="line-number">565</span><br><span class="line-number">566</span><br><span class="line-number">567</span><br><span class="line-number">568</span><br><span class="line-number">569</span><br><span class="line-number">570</span><br><span class="line-number">571</span><br><span class="line-number">572</span><br><span class="line-number">573</span><br><span class="line-number">574</span><br><span class="line-number">575</span><br><span class="line-number">576</span><br><span class="line-number">577</span><br><span class="line-number">578</span><br><span class="line-number">579</span><br><span class="line-number">580</span><br><span class="line-number">581</span><br><span class="line-number">582</span><br><span class="line-number">583</span><br><span class="line-number">584</span><br><span class="line-number">585</span><br><span class="line-number">586</span><br><span class="line-number">587</span><br><span class="line-number">588</span><br><span class="line-number">589</span><br><span class="line-number">590</span><br><span class="line-number">591</span><br><span class="line-number">592</span><br><span class="line-number">593</span><br><span class="line-number">594</span><br><span class="line-number">595</span><br><span class="line-number">596</span><br><span class="line-number">597</span><br><span class="line-number">598</span><br><span class="line-number">599</span><br><span class="line-number">600</span><br><span class="line-number">601</span><br><span class="line-number">602</span><br><span class="line-number">603</span><br><span class="line-number">604</span><br><span class="line-number">605</span><br><span class="line-number">606</span><br><span class="line-number">607</span><br><span class="line-number">608</span><br><span class="line-number">609</span><br><span class="line-number">610</span><br><span class="line-number">611</span><br><span class="line-number">612</span><br><span class="line-number">613</span><br><span class="line-number">614</span><br><span class="line-number">615</span><br><span class="line-number">616</span><br><span class="line-number">617</span><br><span class="line-number">618</span><br><span class="line-number">619</span><br><span class="line-number">620</span><br><span class="line-number">621</span><br><span class="line-number">622</span><br><span class="line-number">623</span><br><span class="line-number">624</span><br><span class="line-number">625</span><br><span class="line-number">626</span><br><span class="line-number">627</span><br><span class="line-number">628</span><br><span class="line-number">629</span><br><span class="line-number">630</span><br><span class="line-number">631</span><br><span class="line-number">632</span><br><span class="line-number">633</span><br><span class="line-number">634</span><br><span class="line-number">635</span><br><span class="line-number">636</span><br><span class="line-number">637</span><br><span class="line-number">638</span><br><span class="line-number">639</span><br><span class="line-number">640</span><br><span class="line-number">641</span><br><span class="line-number">642</span><br><span class="line-number">643</span><br><span class="line-number">644</span><br><span class="line-number">645</span><br><span class="line-number">646</span><br><span class="line-number">647</span><br><span class="line-number">648</span><br><span class="line-number">649</span><br><span class="line-number">650</span><br><span class="line-number">651</span><br><span class="line-number">652</span><br><span class="line-number">653</span><br><span class="line-number">654</span><br><span class="line-number">655</span><br><span class="line-number">656</span><br><span class="line-number">657</span><br><span class="line-number">658</span><br><span class="line-number">659</span><br><span class="line-number">660</span><br><span class="line-number">661</span><br><span class="line-number">662</span><br><span class="line-number">663</span><br><span class="line-number">664</span><br><span class="line-number">665</span><br><span class="line-number">666</span><br><span class="line-number">667</span><br><span class="line-number">668</span><br><span class="line-number">669</span><br><span class="line-number">670</span><br><span class="line-number">671</span><br><span class="line-number">672</span><br><span class="line-number">673</span><br><span class="line-number">674</span><br><span class="line-number">675</span><br><span class="line-number">676</span><br><span class="line-number">677</span><br><span class="line-number">678</span><br><span class="line-number">679</span><br><span class="line-number">680</span><br><span class="line-number">681</span><br><span class="line-number">682</span><br><span class="line-number">683</span><br><span class="line-number">684</span><br><span class="line-number">685</span><br><span class="line-number">686</span><br><span class="line-number">687</span><br><span class="line-number">688</span><br><span class="line-number">689</span><br><span class="line-number">690</span><br><span class="line-number">691</span><br><span class="line-number">692</span><br><span class="line-number">693</span><br><span class="line-number">694</span><br><span class="line-number">695</span><br><span class="line-number">696</span><br><span class="line-number">697</span><br><span class="line-number">698</span><br><span class="line-number">699</span><br><span class="line-number">700</span><br><span class="line-number">701</span><br><span class="line-number">702</span><br><span class="line-number">703</span><br><span class="line-number">704</span><br><span class="line-number">705</span><br><span class="line-number">706</span><br><span class="line-number">707</span><br><span class="line-number">708</span><br><span class="line-number">709</span><br><span class="line-number">710</span><br><span class="line-number">711</span><br><span class="line-number">712</span><br><span class="line-number">713</span><br><span class="line-number">714</span><br><span class="line-number">715</span><br><span class="line-number">716</span><br><span class="line-number">717</span><br><span class="line-number">718</span><br><span class="line-number">719</span><br><span class="line-number">720</span><br><span class="line-number">721</span><br><span class="line-number">722</span><br><span class="line-number">723</span><br><span class="line-number">724</span><br><span class="line-number">725</span><br><span class="line-number">726</span><br><span class="line-number">727</span><br><span class="line-number">728</span><br><span class="line-number">729</span><br><span class="line-number">730</span><br><span class="line-number">731</span><br><span class="line-number">732</span><br><span class="line-number">733</span><br><span class="line-number">734</span><br><span class="line-number">735</span><br><span class="line-number">736</span><br><span class="line-number">737</span><br><span class="line-number">738</span><br><span class="line-number">739</span><br><span class="line-number">740</span><br><span class="line-number">741</span><br><span class="line-number">742</span><br><span class="line-number">743</span><br><span class="line-number">744</span><br><span class="line-number">745</span><br><span class="line-number">746</span><br><span class="line-number">747</span><br><span class="line-number">748</span><br><span class="line-number">749</span><br><span class="line-number">750</span><br><span class="line-number">751</span><br><span class="line-number">752</span><br><span class="line-number">753</span><br><span class="line-number">754</span><br><span class="line-number">755</span><br><span class="line-number">756</span><br><span class="line-number">757</span><br><span class="line-number">758</span><br><span class="line-number">759</span><br><span class="line-number">760</span><br><span class="line-number">761</span><br><span class="line-number">762</span><br><span class="line-number">763</span><br><span class="line-number">764</span><br><span class="line-number">765</span><br><span class="line-number">766</span><br><span class="line-number">767</span><br><span class="line-number">768</span><br><span class="line-number">769</span><br><span class="line-number">770</span><br><span class="line-number">771</span><br><span class="line-number">772</span><br><span class="line-number">773</span><br><span class="line-number">774</span><br><span class="line-number">775</span><br><span class="line-number">776</span><br><span class="line-number">777</span><br><span class="line-number">778</span><br><span class="line-number">779</span><br><span class="line-number">780</span><br><span class="line-number">781</span><br><span class="line-number">782</span><br><span class="line-number">783</span><br><span class="line-number">784</span><br><span class="line-number">785</span><br><span class="line-number">786</span><br><span class="line-number">787</span><br><span class="line-number">788</span><br><span class="line-number">789</span><br><span class="line-number">790</span><br><span class="line-number">791</span><br><span class="line-number">792</span><br><span class="line-number">793</span><br><span class="line-number">794</span><br><span class="line-number">795</span><br><span class="line-number">796</span><br><span class="line-number">797</span><br><span class="line-number">798</span><br><span class="line-number">799</span><br><span class="line-number">800</span><br><span class="line-number">801</span><br><span class="line-number">802</span><br><span class="line-number">803</span><br><span class="line-number">804</span><br><span class="line-number">805</span><br><span class="line-number">806</span><br><span class="line-number">807</span><br><span class="line-number">808</span><br><span class="line-number">809</span><br><span class="line-number">810</span><br><span class="line-number">811</span><br><span class="line-number">812</span><br><span class="line-number">813</span><br><span class="line-number">814</span><br><span class="line-number">815</span><br><span class="line-number">816</span><br><span class="line-number">817</span><br><span class="line-number">818</span><br><span class="line-number">819</span><br><span class="line-number">820</span><br><span class="line-number">821</span><br><span class="line-number">822</span><br><span class="line-number">823</span><br><span class="line-number">824</span><br><span class="line-number">825</span><br><span class="line-number">826</span><br><span class="line-number">827</span><br><span class="line-number">828</span><br><span class="line-number">829</span><br><span class="line-number">830</span><br><span class="line-number">831</span><br><span class="line-number">832</span><br><span class="line-number">833</span><br><span class="line-number">834</span><br><span class="line-number">835</span><br><span class="line-number">836</span><br><span class="line-number">837</span><br><span class="line-number">838</span><br><span class="line-number">839</span><br><span class="line-number">840</span><br><span class="line-number">841</span><br><span class="line-number">842</span><br><span class="line-number">843</span><br><span class="line-number">844</span><br><span class="line-number">845</span><br><span class="line-number">846</span><br><span class="line-number">847</span><br><span class="line-number">848</span><br><span class="line-number">849</span><br><span class="line-number">850</span><br><span class="line-number">851</span><br><span class="line-number">852</span><br><span class="line-number">853</span><br><span class="line-number">854</span><br><span class="line-number">855</span><br><span class="line-number">856</span><br><span class="line-number">857</span><br><span class="line-number">858</span><br><span class="line-number">859</span><br><span class="line-number">860</span><br><span class="line-number">861</span><br><span class="line-number">862</span><br><span class="line-number">863</span><br><span class="line-number">864</span><br><span class="line-number">865</span><br><span class="line-number">866</span><br><span class="line-number">867</span><br><span class="line-number">868</span><br><span class="line-number">869</span><br><span class="line-number">870</span><br><span class="line-number">871</span><br><span class="line-number">872</span><br><span class="line-number">873</span><br><span class="line-number">874</span><br><span class="line-number">875</span><br><span class="line-number">876</span><br><span class="line-number">877</span><br><span class="line-number">878</span><br><span class="line-number">879</span><br><span class="line-number">880</span><br><span class="line-number">881</span><br><span class="line-number">882</span><br><span class="line-number">883</span><br><span class="line-number">884</span><br><span class="line-number">885</span><br><span class="line-number">886</span><br><span class="line-number">887</span><br><span class="line-number">888</span><br><span class="line-number">889</span><br><span class="line-number">890</span><br><span class="line-number">891</span><br><span class="line-number">892</span><br><span class="line-number">893</span><br><span class="line-number">894</span><br><span class="line-number">895</span><br><span class="line-number">896</span><br><span class="line-number">897</span><br><span class="line-number">898</span><br><span class="line-number">899</span><br><span class="line-number">900</span><br><span class="line-number">901</span><br><span class="line-number">902</span><br><span class="line-number">903</span><br><span class="line-number">904</span><br><span class="line-number">905</span><br><span class="line-number">906</span><br><span class="line-number">907</span><br><span class="line-number">908</span><br><span class="line-number">909</span><br><span class="line-number">910</span><br><span class="line-number">911</span><br><span class="line-number">912</span><br><span class="line-number">913</span><br><span class="line-number">914</span><br><span class="line-number">915</span><br><span class="line-number">916</span><br><span class="line-number">917</span><br><span class="line-number">918</span><br><span class="line-number">919</span><br><span class="line-number">920</span><br><span class="line-number">921</span><br><span class="line-number">922</span><br><span class="line-number">923</span><br><span class="line-number">924</span><br><span class="line-number">925</span><br><span class="line-number">926</span><br><span class="line-number">927</span><br><span class="line-number">928</span><br><span class="line-number">929</span><br><span class="line-number">930</span><br><span class="line-number">931</span><br><span class="line-number">932</span><br><span class="line-number">933</span><br><span class="line-number">934</span><br><span class="line-number">935</span><br><span class="line-number">936</span><br><span class="line-number">937</span><br><span class="line-number">938</span><br><span class="line-number">939</span><br><span class="line-number">940</span><br><span class="line-number">941</span><br><span class="line-number">942</span><br><span class="line-number">943</span><br><span class="line-number">944</span><br><span class="line-number">945</span><br><span class="line-number">946</span><br><span class="line-number">947</span><br><span class="line-number">948</span><br><span class="line-number">949</span><br><span class="line-number">950</span><br><span class="line-number">951</span><br><span class="line-number">952</span><br><span class="line-number">953</span><br><span class="line-number">954</span><br><span class="line-number">955</span><br><span class="line-number">956</span><br><span class="line-number">957</span><br><span class="line-number">958</span><br><span class="line-number">959</span><br><span class="line-number">960</span><br><span class="line-number">961</span><br><span class="line-number">962</span><br><span class="line-number">963</span><br><span class="line-number">964</span><br><span class="line-number">965</span><br><span class="line-number">966</span><br><span class="line-number">967</span><br><span class="line-number">968</span><br><span class="line-number">969</span><br><span class="line-number">970</span><br><span class="line-number">971</span><br><span class="line-number">972</span><br><span class="line-number">973</span><br><span class="line-number">974</span><br><span class="line-number">975</span><br><span class="line-number">976</span><br><span class="line-number">977</span><br><span class="line-number">978</span><br><span class="line-number">979</span><br><span class="line-number">980</span><br><span class="line-number">981</span><br><span class="line-number">982</span><br><span class="line-number">983</span><br><span class="line-number">984</span><br><span class="line-number">985</span><br><span class="line-number">986</span><br><span class="line-number">987</span><br><span class="line-number">988</span><br><span class="line-number">989</span><br><span class="line-number">990</span><br><span class="line-number">991</span><br><span class="line-number">992</span><br><span class="line-number">993</span><br><span class="line-number">994</span><br><span class="line-number">995</span><br><span class="line-number">996</span><br><span class="line-number">997</span><br><span class="line-number">998</span><br><span class="line-number">999</span><br><span class="line-number">1000</span><br><span class="line-number">1001</span><br><span class="line-number">1002</span><br><span class="line-number">1003</span><br><span class="line-number">1004</span><br><span class="line-number">1005</span><br><span class="line-number">1006</span><br><span class="line-number">1007</span><br><span class="line-number">1008</span><br><span class="line-number">1009</span><br><span class="line-number">1010</span><br><span class="line-number">1011</span><br><span class="line-number">1012</span><br><span class="line-number">1013</span><br><span class="line-number">1014</span><br><span class="line-number">1015</span><br><span class="line-number">1016</span><br><span class="line-number">1017</span><br><span class="line-number">1018</span><br><span class="line-number">1019</span><br><span class="line-number">1020</span><br><span class="line-number">1021</span><br><span class="line-number">1022</span><br><span class="line-number">1023</span><br><span class="line-number">1024</span><br><span class="line-number">1025</span><br><span class="line-number">1026</span><br><span class="line-number">1027</span><br><span class="line-number">1028</span><br><span class="line-number">1029</span><br><span class="line-number">1030</span><br><span class="line-number">1031</span><br><span class="line-number">1032</span><br><span class="line-number">1033</span><br><span class="line-number">1034</span><br><span class="line-number">1035</span><br><span class="line-number">1036</span><br></div></div><h4 id="_2-5-3-缓存防并发"><a href="#_2-5-3-缓存防并发" class="header-anchor">#</a> 2.5.3 缓存防并发</h4> <p>我们开发经常会碰到表单点击重复提交场及相同资源并发，导致数据错误的问题。一般我们使用数据库的乐观锁(只能降低并发率)、悲观锁、唯一索引、Java 的单服务器的同步机制，Redis 锁，处理该问题。本文以接触网工作票上面开分工单为例，我们经常碰到前端分工单重复提交，导致后台 get 时找到多条的异常。</p> <p><strong>1.乐观锁</strong>。我们可以给工作票模型增加一个分工单版本号的属性，后台在处理分工单时，先 select id,版本号 from jcw_work_ticket。在保存时,update jcw_work_ticket 版本号=版本号+1 where id=id and 版本号=当前版本号。在 update 返回结果大于 0 时，再执行插入操作，可降低并发带来的问题，但是规避不了。</p> <p>**2.悲观锁。**我们可以使用悲观锁 中共享锁，锁住工作票，先根据 ID 去锁住该工作票，再执行分工单判重操作，最后根据重复结果执行插入操作。</p> <p>**3.唯一索引。**分工单建模时，添加唯一索引，工作票字段添加唯一索引。把这类并发抛给数据库层面处理，然后由 Advice 捕捉，提示异常给前端。</p> <p>**4.同步关键字、对象锁。**使用 JAVA 的同步关键字、对象锁等机制可以解决并发的问题，但是解决不了分布式系统并发的问题。只能解决单服务器问题，建议不要使用。</p> <p><img src="/vuepress-demo/assets/img/image-20200410131342960.7401281c.png" alt="image-20200410131342960"></p> <p>**5.Redis 分布式锁。**我们可以使用工作票 ID 为 KEY,保存到 Redis 上并锁住一定时间，当对同一分工单提交插入操作时，上次操作未释放，这次操作拿不到锁，即可给前端提示。</p> <p><strong>RedisLockService</strong>,方法定义如下，使用时@Autowird 注入即可</p> <div class="language-Java line-numbers-mode"><pre class="language-java"><code><span class="token comment">/***
*
*锁住，成功锁住即返回true。超时自动释放
*
*/</span>
<span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">tryLock</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">,</span> <span class="token class-name">String</span> requestId<span class="token punctuation">,</span> <span class="token keyword">long</span> expired<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><div class="language-Java line-numbers-mode"><pre class="language-java"><code><span class="token comment">/***
*
*释放锁
*
*/</span>
<span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">unlock</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">,</span> <span class="token class-name">String</span> requestId<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><strong>以南昌局电力停电工作票为例，工作票号、计划号生成</strong></p> <p><img src="/vuepress-demo/assets/img/image-20200410133552068.cb60faac.png" alt="image-20200410133552068"></p> <p><img src="/vuepress-demo/assets/img/image-20200410133158287.1f965ac6.png" alt="image-20200410133158287"></p> <p><img src="/vuepress-demo/assets/img/image-20200410133433546.3b64cc0f.png" alt="image-20200410133433546"></p> <h4 id="_2-5-4-单据号"><a href="#_2-5-4-单据号" class="header-anchor">#</a> 2.5.4 单据号</h4> <p>2.5.3 实现的防并发会出现并发提示，导致提交不成功，对于票据号的产生，目前我们系统的产生有两种方式 1)基于数据库产生，使用共享锁或者排它锁产生 ，在各种专业模块中有应用。2)基于 Redis 的自增产生。对于票据的实现我们设计了 OrderFormNo(票据规则接口类)、IOrderFormNoService(票据接口)、OrderFormNoService。使用时可直接注入@Autowired IOrderFormNoService</p> <p><strong>票据接口</strong></p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">/** *产生单号(全局产生)
* @param orderFormNo
* @return */</span>
<span class="token class-name">String</span> <span class="token function">generateFormNo</span><span class="token punctuation">(</span><span class="token class-name">OrderFormNo</span> orderFormNo<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">/*** 产生单号，业务指，（局部，按照部门产生）
* @param  businessKey * @param orderFormNo
* @return */</span>
<span class="token class-name">String</span> <span class="token function">generateFormNo</span><span class="token punctuation">(</span><span class="token class-name">String</span>  businessKey<span class="token punctuation">,</span><span class="token class-name">OrderFormNo</span> orderFormNo<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">/**
* 删除的数据单号回收（单个回收）
* @param orderFormNo
* @param recoveryFormNo
*/</span>
<span class="token keyword">void</span> <span class="token function">recoveryData</span><span class="token punctuation">(</span><span class="token class-name">OrderFormNo</span> orderFormNo<span class="token punctuation">,</span> <span class="token class-name">String</span> recoveryFormNo<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p><strong>OrderFormNo 票据规则接口</strong></p> <table><thead><tr><th>序号</th> <th>属性</th> <th>类型</th> <th>备注</th></tr></thead> <tbody><tr><td>1</td> <td>getPrefix();</td> <td>String</td> <td>单据号前缀</td></tr> <tr><td>2</td> <td>getDatePattern()</td> <td>String</td> <td>日期格式，支持年、年月、年月日</td></tr> <tr><td>3</td> <td>getSerialLength()</td> <td>int</td> <td>流水号长度</td></tr> <tr><td>4</td> <td>getRandomLength()</td> <td>int</td> <td>随机数长度，不使用可以默认 0</td></tr> <tr><td>5</td> <td>getTotalLength()</td> <td>int</td> <td>总长度=单据号前缀+日期+流水号+随机数长度</td></tr> <tr><td>6</td> <td>getCacheDays()</td> <td>int</td> <td>缓存失效天数。注意失效天数，要设置合理。要不会导致 KEY 不存在，导致产生单号重复</td></tr> <tr><td>7</td> <td>getInitValue()</td> <td>long</td> <td>生成单号的初始值；默认0（生成后的值=初始值+1）</td></tr> <tr><td>8</td> <td>getIsRecovery()</td> <td>Boolean</td> <td>是否回收；默认false</td></tr></tbody></table> <p><strong>业务使用规则实现定义</strong></p> <p><img src="/vuepress-demo/assets/img/12345.c84917c9.png" alt="img"></p> <h3 id="_2-6-权限及相关注解"><a href="#_2-6-权限及相关注解" class="header-anchor">#</a> 2.6 权限及相关注解</h3> <p>系统权限分为功能权限、数据权限。功能权限主要表现级别为 BUTTON 的操作，例如增加、删除、修改、审核级别的按钮权限，数据权限指的是查看数据的范围，系统包括部门、部门及下属部门、全段、全局四种数据权限。系统的权限设计比较典型，主要的模型包括功能、角色、功能与角色、用户与角色。</p> <p>功能权限在前端控制，登录时，取的用户在所有模块的功能权限，我们会对每一个功能权限进行唯一编码控制，前端利用按钮编码确定用户是否有 BUTTON 级别权限。</p> <p>数据权限则由后台控制，前端或者第三方系统请求数据时，经过 API 网关进行登录校验或者白名单校验，校验通过则放行，进入业务微服务，业务服务通过数据权限编码，进行访问切入，处理部门属性字段。</p> <h4 id="_2-6-1-userdatascope"><a href="#_2-6-1-userdatascope" class="header-anchor">#</a> 2.6.1 UserDataScope</h4> <p>部门数据权限切面，属性如下，通过该注解，切面会完成业务查询条件的段别、部门属性字段的封装，部门属性业务在书写 dao 层时注意是逗号拼接的多个部门，段别在启用 section 时，也会存在多个。业务部分需要注意下</p> <table><thead><tr><th>序号</th> <th>属性</th> <th>描述</th></tr></thead> <tbody><tr><td>1</td> <td>authCode</td> <td>数据权限编码，一般由前端传入。如果没有传，则取该属性配置只，default &quot;&quot;</td></tr> <tr><td>2</td> <td>deptField</td> <td>业务部门字段，业务统一使用 deptId 属性，default &quot;deptId&quot;</td></tr> <tr><td>3</td> <td>operationMode</td> <td>获取部门方式，有 service、remote、in 三种，注意 service/remote 等同,default &quot;service&quot;</td></tr> <tr><td>4</td> <td>section</td> <td>全局权限时，是否聚合段别，聚合段别是用多个段别用,拼接。default false</td></tr></tbody></table> <h4 id="_2-6-2-datacontrolsectionput"><a href="#_2-6-2-datacontrolsectionput" class="header-anchor">#</a> 2.6.2 DataControlSectionPut</h4> <p>该注解使用在无部门字段业务，完成段别属性的注入</p> <table><thead><tr><th>序号</th> <th>属性</th> <th>描述</th></tr></thead> <tbody><tr><td>1</td> <td>authCode</td> <td>数据权限编码，一般由前端传入。如果没有传，则取该属性配置，default &quot;&quot;</td></tr></tbody></table> <h4 id="_2-6-3-deletedataput"><a href="#_2-6-3-deletedataput" class="header-anchor">#</a> 2.6.3 DeleteDataPut</h4> <p>该注解使用在删除方法的控制器上面，完成删除数据时删除人、删除事件、删除 IP 等属性维护</p> <h4 id="_2-6-4-adddataput"><a href="#_2-6-4-adddataput" class="header-anchor">#</a> 2.6.4 AddDataPut</h4> <p>该注解使用在新增、修改方法的控制器上面，完成创建人、创建时间、创建 IP、修改人、修改时间、修改 IP 属性维护</p> <h4 id="_2-6-5-框架使用"><a href="#_2-6-5-框架使用" class="header-anchor">#</a> 2.6.5 框架使用</h4> <p><strong>依赖</strong></p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code>		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.togest<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>togest-authority<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
		  	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>0.0.1-SNAPSHOT<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><strong>注解</strong></p> <p><img src="/vuepress-demo/assets/img/image-20200407151119789.f10c0339.png" alt="image-20200407151119789"></p> <p><img src="/vuepress-demo/assets/img/image-20200407151202788.88a008b3.png" alt="image-20200407151202788"></p> <p><img src="/vuepress-demo/assets/img/image-20200407151449377.cbf93ae2.png" alt="image-20200407151449377"></p> <h3 id="_2-7-流程引擎"><a href="#_2-7-流程引擎" class="header-anchor">#</a> 2.7 流程引擎</h3> <h4 id="_2-7-1-引擎设计"><a href="#_2-7-1-引擎设计" class="header-anchor">#</a> 2.7.1 引擎设计</h4> <p>流程引擎数据模型类图如下：</p> <p><img src="/vuepress-demo/assets/img/image-20200402142126746.933c6be6.png" alt="image-20200402142126746"></p> <table><thead><tr><th>序号</th> <th>类名</th> <th>表名</th> <th>说明</th></tr></thead> <tbody><tr><td>1</td> <td>StatusProcess</td> <td>sys_status_process</td> <td>流程定义</td></tr> <tr><td>2</td> <td>StatusNode</td> <td>sys_status_node</td> <td>流程节点定义</td></tr> <tr><td>3</td> <td>StatusAudit</td> <td>sys_status_audit</td> <td>流程审核权限</td></tr> <tr><td>4</td> <td>StatusOrder</td> <td>sys_status_order</td> <td>当前流程实例</td></tr> <tr><td>5</td> <td>StatusHisOrder</td> <td>sys_status_his_order</td> <td>历史流程实例</td></tr> <tr><td>6</td> <td>StatusRunTask</td> <td>sys_status_run_task</td> <td>当前任务</td></tr> <tr><td>7</td> <td>StatusHisTask</td> <td>sys_status_his_task</td> <td>历史任务</td></tr> <tr><td>8</td> <td>StatusTaskActor</td> <td>sys_status_task_actor</td> <td>当前任务干系人</td></tr> <tr><td>9</td> <td>StatusHisActor</td> <td>sys_status_his_task_actor</td> <td>历史任务干系人</td></tr></tbody></table> <p>流程引擎数据模型 SQL 如下：</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> <span class="token punctuation">`</span>sys_status_process<span class="token punctuation">`</span> <span class="token punctuation">(</span>
  <span class="token punctuation">`</span>id<span class="token punctuation">`</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">64</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'主键'</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>process_key<span class="token punctuation">`</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'流程KEY'</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>name<span class="token punctuation">`</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'流程名称'</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>business_field<span class="token punctuation">`</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'业务状态字段'</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>business_dict<span class="token punctuation">`</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'业务状态字典'</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>sort<span class="token punctuation">`</span> <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">AUTO_INCREMENT</span> <span class="token keyword">COMMENT</span> <span class="token string">'顺序号'</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>table_name<span class="token punctuation">`</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">60</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'表名'</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>category_id<span class="token punctuation">`</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'分类id'</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>service_gateway<span class="token punctuation">`</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'服务网关'</span><span class="token punctuation">,</span>
  <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span><span class="token punctuation">`</span>id<span class="token punctuation">`</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token keyword">KEY</span> <span class="token punctuation">`</span>sort<span class="token punctuation">`</span> <span class="token punctuation">(</span><span class="token punctuation">`</span>sort<span class="token punctuation">`</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span> <span class="token keyword">ENGINE</span><span class="token operator">=</span>MyISAM <span class="token keyword">AUTO_INCREMENT</span><span class="token operator">=</span><span class="token number">32</span> <span class="token keyword">DEFAULT</span> <span class="token keyword">CHARSET</span><span class="token operator">=</span>utf8 ROW_FORMAT<span class="token operator">=</span>DYNAMIC <span class="token keyword">COMMENT</span><span class="token operator">=</span><span class="token string">'流程定义'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> <span class="token punctuation">`</span>sys_status_node<span class="token punctuation">`</span> <span class="token punctuation">(</span>
  <span class="token punctuation">`</span>id<span class="token punctuation">`</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'主键'</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>business_code<span class="token punctuation">`</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'业务字典值'</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>business_name<span class="token punctuation">`</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'业务字典描述'</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>task_node<span class="token punctuation">`</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'任务节点'</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>task_name<span class="token punctuation">`</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'任务名称'</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>task_type<span class="token punctuation">`</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'任务类型 Start,Task,End'</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>order_no<span class="token punctuation">`</span> <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">AUTO_INCREMENT</span> <span class="token keyword">COMMENT</span> <span class="token string">'顺序号'</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>page_route<span class="token punctuation">`</span> <span class="token keyword">text</span> <span class="token keyword">COMMENT</span> <span class="token string">'页面办理路由'</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>commit_api<span class="token punctuation">`</span> <span class="token keyword">text</span> <span class="token keyword">COMMENT</span> <span class="token string">'提交API'</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>is_back<span class="token punctuation">`</span> <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'是否能驳回'</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>back_route<span class="token punctuation">`</span> <span class="token keyword">text</span> <span class="token keyword">COMMENT</span> <span class="token string">'驳回路由'</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>back_commit_api<span class="token punctuation">`</span> <span class="token keyword">text</span> <span class="token keyword">COMMENT</span> <span class="token string">'驳回提交API'</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>expr<span class="token punctuation">`</span> <span class="token keyword">text</span> <span class="token keyword">COMMENT</span> <span class="token string">'表达式'</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>decision<span class="token punctuation">`</span> <span class="token keyword">text</span> <span class="token keyword">COMMENT</span> <span class="token string">'决策'</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>process_id<span class="token punctuation">`</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">64</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'流程定义ID'</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>variable_name<span class="token punctuation">`</span> <span class="token keyword">text</span> <span class="token keyword">COMMENT</span> <span class="token string">'变量名称'</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>form_key<span class="token punctuation">`</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'表单key'</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>variable_api<span class="token punctuation">`</span> <span class="token keyword">text</span> <span class="token keyword">COMMENT</span> <span class="token string">'变量路由'</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>perform_type<span class="token punctuation">`</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'实现类型'</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>track_route<span class="token punctuation">`</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'路由'</span><span class="token punctuation">,</span>
  <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span><span class="token punctuation">`</span>id<span class="token punctuation">`</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token keyword">KEY</span> <span class="token punctuation">`</span>sort<span class="token punctuation">`</span> <span class="token punctuation">(</span><span class="token punctuation">`</span>order_no<span class="token punctuation">`</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span> <span class="token keyword">ENGINE</span><span class="token operator">=</span>MyISAM <span class="token keyword">AUTO_INCREMENT</span><span class="token operator">=</span><span class="token number">14</span> <span class="token keyword">DEFAULT</span> <span class="token keyword">CHARSET</span><span class="token operator">=</span>utf8 ROW_FORMAT<span class="token operator">=</span>DYNAMIC <span class="token keyword">COMMENT</span><span class="token operator">=</span><span class="token string">'状态节点定义'</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> <span class="token punctuation">`</span>sys_status_audit<span class="token punctuation">`</span> <span class="token punctuation">(</span>
  <span class="token punctuation">`</span>id<span class="token punctuation">`</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>key_id<span class="token punctuation">`</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>process_def_id<span class="token punctuation">`</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>node<span class="token punctuation">`</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>description<span class="token punctuation">`</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>section_id<span class="token punctuation">`</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>user_ids<span class="token punctuation">`</span> <span class="token keyword">text</span> <span class="token keyword">COMMENT</span> <span class="token string">'人员'</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>dept_ids<span class="token punctuation">`</span> <span class="token keyword">text</span> <span class="token keyword">COMMENT</span> <span class="token string">'部门'</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>positions<span class="token punctuation">`</span> <span class="token keyword">text</span> <span class="token keyword">COMMENT</span> <span class="token string">'岗位'</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>group_ids<span class="token punctuation">`</span> <span class="token keyword">text</span> <span class="token keyword">COMMENT</span> <span class="token string">'群组'</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>variable<span class="token punctuation">`</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'变量'</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span><span class="token keyword">rule</span><span class="token punctuation">`</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'规则'</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>sort<span class="token punctuation">`</span> <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span> <span class="token keyword">unsigned</span> zerofill <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">AUTO_INCREMENT</span> <span class="token keyword">COMMENT</span> <span class="token string">'排序'</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>del_flag<span class="token punctuation">`</span> <span class="token keyword">smallint</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token string">'0'</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>create_ip<span class="token punctuation">`</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>create_by<span class="token punctuation">`</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>create_date<span class="token punctuation">`</span> <span class="token keyword">datetime</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>update_ip<span class="token punctuation">`</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>update_by<span class="token punctuation">`</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>update_date<span class="token punctuation">`</span> <span class="token keyword">datetime</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>delete_ip<span class="token punctuation">`</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>delete_by<span class="token punctuation">`</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>delete_date<span class="token punctuation">`</span> <span class="token keyword">datetime</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>personal_type<span class="token punctuation">`</span> <span class="token keyword">text</span> <span class="token keyword">COMMENT</span> <span class="token string">'人员类型'</span><span class="token punctuation">,</span>
  <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span><span class="token punctuation">`</span>id<span class="token punctuation">`</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token keyword">KEY</span> <span class="token punctuation">`</span>sort<span class="token punctuation">`</span> <span class="token punctuation">(</span><span class="token punctuation">`</span>sort<span class="token punctuation">`</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token keyword">KEY</span> <span class="token punctuation">`</span>del_flag<span class="token punctuation">`</span> <span class="token punctuation">(</span><span class="token punctuation">`</span>del_flag<span class="token punctuation">`</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span> <span class="token keyword">ENGINE</span><span class="token operator">=</span><span class="token keyword">InnoDB</span> <span class="token keyword">AUTO_INCREMENT</span><span class="token operator">=</span><span class="token number">234</span> <span class="token keyword">DEFAULT</span> <span class="token keyword">CHARSET</span><span class="token operator">=</span>utf8 <span class="token keyword">COMMENT</span><span class="token operator">=</span><span class="token string">'流程审核'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div><div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> <span class="token punctuation">`</span>sys_status_order<span class="token punctuation">`</span> <span class="token punctuation">(</span>
  <span class="token punctuation">`</span>id<span class="token punctuation">`</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'任务ID'</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>task_node<span class="token punctuation">`</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'任务编号'</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>task_name<span class="token punctuation">`</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'任务名称'</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>create_time<span class="token punctuation">`</span> <span class="token keyword">datetime</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'创建时间'</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>process_id<span class="token punctuation">`</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">64</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'流程定义ID'</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>process_name<span class="token punctuation">`</span> <span class="token keyword">text</span> <span class="token keyword">COMMENT</span> <span class="token string">'流程名称'</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>creator<span class="token punctuation">`</span> <span class="token keyword">text</span> <span class="token keyword">COMMENT</span> <span class="token string">'创建人'</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>section_id<span class="token punctuation">`</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'段别'</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>actor_id<span class="token punctuation">`</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'分配人'</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>business_key<span class="token punctuation">`</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'业务主键'</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>expire_time<span class="token punctuation">`</span> <span class="token keyword">date</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'到期日期'</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>process_key<span class="token punctuation">`</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'流程定义KEY'</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>variable<span class="token punctuation">`</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'变量'</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>sort<span class="token punctuation">`</span> <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">AUTO_INCREMENT</span><span class="token punctuation">,</span>
  <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span><span class="token punctuation">`</span>id<span class="token punctuation">`</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token keyword">KEY</span> <span class="token punctuation">`</span>sort<span class="token punctuation">`</span> <span class="token punctuation">(</span><span class="token punctuation">`</span>sort<span class="token punctuation">`</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span> <span class="token keyword">ENGINE</span><span class="token operator">=</span><span class="token keyword">InnoDB</span> <span class="token keyword">AUTO_INCREMENT</span><span class="token operator">=</span><span class="token number">235859</span> <span class="token keyword">DEFAULT</span> <span class="token keyword">CHARSET</span><span class="token operator">=</span>utf8 ROW_FORMAT<span class="token operator">=</span>DYNAMIC <span class="token keyword">COMMENT</span><span class="token operator">=</span><span class="token string">'状态实例'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> <span class="token punctuation">`</span>sys_status_his_order<span class="token punctuation">`</span> <span class="token punctuation">(</span>
  <span class="token punctuation">`</span>id<span class="token punctuation">`</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'任务ID'</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>task_node<span class="token punctuation">`</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'任务编号'</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>task_name<span class="token punctuation">`</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'任务名称'</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>create_time<span class="token punctuation">`</span> <span class="token keyword">datetime</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'创建时间'</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>process_id<span class="token punctuation">`</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">64</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'流程定义ID'</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>state<span class="token punctuation">`</span> <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'状态'</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>end_time<span class="token punctuation">`</span> <span class="token keyword">date</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'到期日期'</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>process_name<span class="token punctuation">`</span> <span class="token keyword">text</span> <span class="token keyword">COMMENT</span> <span class="token string">'流程名称'</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>creator<span class="token punctuation">`</span> <span class="token keyword">text</span> <span class="token keyword">COMMENT</span> <span class="token string">'创建人'</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>section_id<span class="token punctuation">`</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'段别'</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>actor_id<span class="token punctuation">`</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'分配人'</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>business_key<span class="token punctuation">`</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'业务主键'</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>expire_time<span class="token punctuation">`</span> <span class="token keyword">date</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'到期日期'</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>process_key<span class="token punctuation">`</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'流程定义KEY'</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>variable<span class="token punctuation">`</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'变量'</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>sort<span class="token punctuation">`</span> <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">AUTO_INCREMENT</span><span class="token punctuation">,</span>
  <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span><span class="token punctuation">`</span>id<span class="token punctuation">`</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token keyword">KEY</span> <span class="token punctuation">`</span>sort<span class="token punctuation">`</span> <span class="token punctuation">(</span><span class="token punctuation">`</span>sort<span class="token punctuation">`</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span> <span class="token keyword">ENGINE</span><span class="token operator">=</span><span class="token keyword">InnoDB</span> <span class="token keyword">AUTO_INCREMENT</span><span class="token operator">=</span><span class="token number">244643</span> <span class="token keyword">DEFAULT</span> <span class="token keyword">CHARSET</span><span class="token operator">=</span>utf8 ROW_FORMAT<span class="token operator">=</span>DYNAMIC <span class="token keyword">COMMENT</span><span class="token operator">=</span><span class="token string">'历史实例'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> <span class="token punctuation">`</span>sys_status_run_task<span class="token punctuation">`</span> <span class="token punctuation">(</span>
  <span class="token punctuation">`</span>id<span class="token punctuation">`</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'任务ID'</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>task_node<span class="token punctuation">`</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'任务编号'</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>task_name<span class="token punctuation">`</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'任务名称'</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>order_id<span class="token punctuation">`</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'实例ID'</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>section_id<span class="token punctuation">`</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'段别'</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>actor_id<span class="token punctuation">`</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'分配人'</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>state<span class="token punctuation">`</span> <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'状态'</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>business_key<span class="token punctuation">`</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'业务主键'</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>create_time<span class="token punctuation">`</span> <span class="token keyword">datetime</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'创建时间'</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>expire_time<span class="token punctuation">`</span> <span class="token keyword">date</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'到期日期'</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>process_key<span class="token punctuation">`</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'流程定义KEY'</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>process_id<span class="token punctuation">`</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">64</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'流程定义ID'</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>variable<span class="token punctuation">`</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'变量'</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>sort<span class="token punctuation">`</span> <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">AUTO_INCREMENT</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>parent_id<span class="token punctuation">`</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'上级任务id'</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>form_key<span class="token punctuation">`</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'表单key'</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>suspend<span class="token punctuation">`</span> <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token string">'0'</span> <span class="token keyword">COMMENT</span> <span class="token string">'挂起:默认0未挂起;1挂起'</span><span class="token punctuation">,</span>
  <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span><span class="token punctuation">`</span>id<span class="token punctuation">`</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token keyword">KEY</span> <span class="token punctuation">`</span>sort<span class="token punctuation">`</span> <span class="token punctuation">(</span><span class="token punctuation">`</span>sort<span class="token punctuation">`</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token keyword">KEY</span> <span class="token punctuation">`</span><span class="token keyword">order</span><span class="token punctuation">`</span> <span class="token punctuation">(</span><span class="token punctuation">`</span>order_id<span class="token punctuation">`</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span> <span class="token keyword">ENGINE</span><span class="token operator">=</span><span class="token keyword">InnoDB</span> <span class="token keyword">AUTO_INCREMENT</span><span class="token operator">=</span><span class="token number">352731</span> <span class="token keyword">DEFAULT</span> <span class="token keyword">CHARSET</span><span class="token operator">=</span>utf8 ROW_FORMAT<span class="token operator">=</span>DYNAMIC <span class="token keyword">COMMENT</span><span class="token operator">=</span><span class="token string">'当前任务'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> <span class="token punctuation">`</span>sys_status_his_task<span class="token punctuation">`</span> <span class="token punctuation">(</span>
  <span class="token punctuation">`</span>id<span class="token punctuation">`</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'任务ID'</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>task_node<span class="token punctuation">`</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'任务编号'</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>task_name<span class="token punctuation">`</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'任务名称'</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>order_id<span class="token punctuation">`</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'实例ID'</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>section_id<span class="token punctuation">`</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'段别'</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>actor_id<span class="token punctuation">`</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'分配人'</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>state<span class="token punctuation">`</span> <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'状态'</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>business_key<span class="token punctuation">`</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'业务主键'</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>create_time<span class="token punctuation">`</span> <span class="token keyword">datetime</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'创建时间'</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>expire_time<span class="token punctuation">`</span> <span class="token keyword">date</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'到期日期'</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>process_key<span class="token punctuation">`</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'流程定义KEY'</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>process_id<span class="token punctuation">`</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">64</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'流程定义ID'</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>variable<span class="token punctuation">`</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'变量'</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>end_time<span class="token punctuation">`</span> <span class="token keyword">datetime</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'结束时间'</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>operator<span class="token punctuation">`</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'办理人'</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span><span class="token keyword">comment</span><span class="token punctuation">`</span> <span class="token keyword">text</span> <span class="token keyword">COMMENT</span> <span class="token string">'办理意见'</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>sort<span class="token punctuation">`</span> <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">AUTO_INCREMENT</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>parent_id<span class="token punctuation">`</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'上级任务id'</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>suspend<span class="token punctuation">`</span> <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token string">'0'</span> <span class="token keyword">COMMENT</span> <span class="token string">'挂起:默认0未挂起;1挂起'</span><span class="token punctuation">,</span>
  <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span><span class="token punctuation">`</span>id<span class="token punctuation">`</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token keyword">KEY</span> <span class="token punctuation">`</span>sort<span class="token punctuation">`</span> <span class="token punctuation">(</span><span class="token punctuation">`</span>sort<span class="token punctuation">`</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token keyword">KEY</span> <span class="token punctuation">`</span>orderId<span class="token punctuation">`</span> <span class="token punctuation">(</span><span class="token punctuation">`</span>order_id<span class="token punctuation">`</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span> <span class="token keyword">ENGINE</span><span class="token operator">=</span><span class="token keyword">InnoDB</span> <span class="token keyword">AUTO_INCREMENT</span><span class="token operator">=</span><span class="token number">1103469</span> <span class="token keyword">DEFAULT</span> <span class="token keyword">CHARSET</span><span class="token operator">=</span>utf8 ROW_FORMAT<span class="token operator">=</span>DYNAMIC <span class="token keyword">COMMENT</span><span class="token operator">=</span><span class="token string">'历史任务'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> <span class="token punctuation">`</span>sys_status_task_actor<span class="token punctuation">`</span> <span class="token punctuation">(</span>
  <span class="token punctuation">`</span>id<span class="token punctuation">`</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'任务ID'</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>order_id<span class="token punctuation">`</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'流程实例ID'</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>task_id<span class="token punctuation">`</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'任务编号'</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>actor_id<span class="token punctuation">`</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'任务名称'</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>section_id<span class="token punctuation">`</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'段别'</span><span class="token punctuation">,</span>
  <span class="token keyword">KEY</span> <span class="token punctuation">`</span>actorId<span class="token punctuation">`</span> <span class="token punctuation">(</span><span class="token punctuation">`</span>actor_id<span class="token punctuation">`</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token keyword">KEY</span> <span class="token punctuation">`</span>taskId<span class="token punctuation">`</span> <span class="token punctuation">(</span><span class="token punctuation">`</span>task_id<span class="token punctuation">`</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token keyword">KEY</span> <span class="token punctuation">`</span>orderId<span class="token punctuation">`</span> <span class="token punctuation">(</span><span class="token punctuation">`</span>order_id<span class="token punctuation">`</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span> <span class="token keyword">ENGINE</span><span class="token operator">=</span><span class="token keyword">InnoDB</span> <span class="token keyword">DEFAULT</span> <span class="token keyword">CHARSET</span><span class="token operator">=</span>utf8 ROW_FORMAT<span class="token operator">=</span>DYNAMIC <span class="token keyword">COMMENT</span><span class="token operator">=</span><span class="token string">'任务参与者'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> <span class="token punctuation">`</span>sys_status_his_task_actor<span class="token punctuation">`</span> <span class="token punctuation">(</span>
  <span class="token punctuation">`</span>id<span class="token punctuation">`</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'任务ID'</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>order_id<span class="token punctuation">`</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'流程实例ID'</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>task_id<span class="token punctuation">`</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'任务编号'</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>actor_id<span class="token punctuation">`</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'任务名称'</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>section_id<span class="token punctuation">`</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'段别'</span><span class="token punctuation">,</span>
  <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span><span class="token punctuation">`</span>id<span class="token punctuation">`</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token keyword">KEY</span> <span class="token punctuation">`</span>taskId<span class="token punctuation">`</span> <span class="token punctuation">(</span><span class="token punctuation">`</span>task_id<span class="token punctuation">`</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token keyword">KEY</span> <span class="token punctuation">`</span>orderId<span class="token punctuation">`</span> <span class="token punctuation">(</span><span class="token punctuation">`</span>order_id<span class="token punctuation">`</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span> <span class="token keyword">ENGINE</span><span class="token operator">=</span><span class="token keyword">InnoDB</span> <span class="token keyword">DEFAULT</span> <span class="token keyword">CHARSET</span><span class="token operator">=</span>utf8 ROW_FORMAT<span class="token operator">=</span>DYNAMIC <span class="token keyword">COMMENT</span><span class="token operator">=</span><span class="token string">'任务参与者'</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>流程引擎核心接口类图如下：</p> <p><img src="data:image/png;base64,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" alt="image-20200402132739457"></p> <table><thead><tr><th>序号</th> <th>类名</th> <th>描述</th></tr></thead> <tbody><tr><td>1</td> <td>IStatusFlowEngine</td> <td>引擎接口类</td></tr> <tr><td>2</td> <td>AbstractStatusFlowEngine</td> <td>抽象流程引擎实现类</td></tr> <tr><td>3</td> <td>StatusFlowEngine</td> <td>流程引擎实现类。</td></tr> <tr><td>4</td> <td>SimpleStatusFlowEngine</td> <td>简单流程引擎实现类。流程引擎只使用当前任务、历史任务表</td></tr></tbody></table> <p>流程引擎核心类依赖的流程处理类图如下：</p> <p><img src="/vuepress-demo/assets/img/image-20200402135519432.fa844e09.png" alt="image-20200402135519432"></p> <table><thead><tr><th>序号</th> <th>接口/类名</th> <th>说明</th></tr></thead> <tbody><tr><td>1</td> <td>IStatusOrderService</td> <td>当前流程实例接口</td></tr> <tr><td>2</td> <td>StatusOrderService</td> <td>历史流程实例实现类</td></tr> <tr><td>3</td> <td>IStatusHisOrderService</td> <td>历史流程实例接口</td></tr> <tr><td>4</td> <td>StatusHisOrderService</td> <td>历史流程实例实现类</td></tr> <tr><td>5</td> <td>IStatusRunTaskService</td> <td>当前任务接口</td></tr> <tr><td>6</td> <td>StatusRunTaskService</td> <td>当前任务实现</td></tr> <tr><td>7</td> <td>IStatusHisTaskService</td> <td>历史任务接口</td></tr> <tr><td>8</td> <td>StatusHisTaskService</td> <td>历史任务实现</td></tr> <tr><td>9</td> <td>IStatusTaskActorService</td> <td>当前任务干系人接口</td></tr> <tr><td>10</td> <td>StatusTaskActorService</td> <td>当前任务实现</td></tr> <tr><td>11</td> <td>IStatusHisActorService</td> <td>历史干系人接口</td></tr> <tr><td>12</td> <td>StatusHisActorService</td> <td>历史干系人实现</td></tr> <tr><td>13</td> <td>IBusinessService</td> <td>业务操作接口</td></tr> <tr><td>14</td> <td>BusinessService</td> <td>业务操作实现</td></tr> <tr><td>15</td> <td>StatusFlowListener</td> <td>流程监听器接口</td></tr> <tr><td>16</td> <td>GlobalStatusFlowListener</td> <td>全局流程监听器实现类</td></tr> <tr><td>17</td> <td>StatusFlowMQService</td> <td>流程消息推送类</td></tr></tbody></table> <p>流程引擎核心类依赖的流程配置相关的类图如下：</p> <p><img src="/vuepress-demo/assets/img/image-20200402140027367.b62b385e.png" alt="image-20200402140027367"></p> <table><thead><tr><th>序号</th> <th>接口/实现</th> <th>说明</th></tr></thead> <tbody><tr><td>1</td> <td>IStatusProcessService</td> <td>流程定义接口</td></tr> <tr><td>2</td> <td>StatusProcessService</td> <td>流程定义实现</td></tr> <tr><td>3</td> <td>IStatusNodeService</td> <td>流程节点接口</td></tr> <tr><td>4</td> <td>StatusNodeService</td> <td>流程节点实现类</td></tr> <tr><td>5</td> <td>IStatusAuditService</td> <td>流程审批接口</td></tr> <tr><td>6</td> <td>StatusAuditService</td> <td>流程审批实现</td></tr> <tr><td>7</td> <td>StatusFlowEngineConfiguration</td> <td>流程引擎配置类</td></tr></tbody></table> <h4 id="_2-7-2-api-介绍"><a href="#_2-7-2-api-介绍" class="header-anchor">#</a> 2.7.2 API 介绍</h4> <p>流程引擎目前支持单个发起、批量发起、单个驳回、批量驳回、单个办理、批量办理、单个召回、批量挂起功能。任务支持 Any 或者 All，All 为会签。流程引擎项目分为 togest-cms-statusflow-engine、togest-cms-statusflow-engine-web 两个模块。如果是 WEB 项目直接引用 togest-cms-statusflow-engine-web</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code>		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.togest<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>togest-cms-statusflow-engine-web<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>0.0.1-SNAPSHOT<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>如果是 Service 项目直接引用 togest-cms-statusflow-engine</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code>		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.togest<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>togest-cms-statusflow-engine<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>0.0.1-SNAPSHOT<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h5 id="_2-7-2-1-流程引擎核心"><a href="#_2-7-2-1-流程引擎核心" class="header-anchor">#</a> 2.7.2.1 流程引擎核心</h5> <p>AbstractStatusFlowEngine 核心流程包括的方法如下：</p> <table><thead><tr><th>方法名称</th> <th>输入</th> <th>输出</th> <th>功能描述</th></tr></thead> <tbody><tr><td>startProcessAndFinish</td> <td>StartModel</td> <td>TaskModel</td> <td>单个流程启动</td></tr> <tr><td>startProcessAndFinish</td> <td><code>List&lt;StartModel&gt;</code></td> <td><code>List&lt;TaskModel&gt;</code></td> <td>批量流程启动</td></tr> <tr><td>completeTask</td> <td>BatchCompleteModel</td> <td><code>List&lt;TaskModel&gt;</code></td> <td>批量办理</td></tr> <tr><td>rejectTask</td> <td>BatchRejectModel</td> <td><code>List&lt;TaskModel&gt;</code></td> <td>批量驳回任务</td></tr> <tr><td>callBackTask</td> <td>CallBackModel</td> <td><code>List&lt;TaskModel&gt;</code></td> <td>单个召回</td></tr> <tr><td>suspendTask</td> <td>BatchSuspendModel</td> <td>int</td> <td>批量挂起</td></tr> <tr><td>checkTaskIfExistByTaskId</td> <td>TaskQueryModel</td> <td>boolean</td> <td>检查任务是否存在.输入属性：taskId、processKey</td></tr> <tr><td>getRejectNode</td> <td>TaskModel</td> <td><code>List&lt;RejectNodeModel&gt;</code></td> <td>查询可驳回的节点。输入属性 orderId、processKey</td></tr> <tr><td>delete</td> <td><code>List&lt;StatusOrder&gt;</code></td> <td>int</td> <td>批量删除流程实例。输入属性 id、processKey</td></tr> <tr><td>getProcessProgress</td> <td>StatusOrder</td> <td><code>List&lt;ProcessProgress&gt;</code></td> <td>查询流程进度.输入属性：id、processKey</td></tr> <tr><td>getHisTask</td> <td>StatusHisTask</td> <td><code>List&lt;StautsHisTask&gt;</code></td> <td>查询流程实例历史。输入属性：orderId、processKey</td></tr> <tr><td>getActorVariable</td> <td>BusinessActorModel</td> <td>String</td> <td>查询业务中部门后者人员字段数据。输入属性：processKey、variable、businessKey</td></tr> <tr><td>getNextNodeByGateway</td> <td>GatewayModel</td> <td>StatusNode</td> <td>查询下一个节点。输入属性包括：processKey、srcTaskNode、variable</td></tr> <tr><td>getTask</td> <td>Page，TaskQueryModel</td> <td><code>Page&lt;MyTask&gt;</code></td> <td>查询我的待办。一般查询条件输入属性：actorId(支持逗号拼接)，queryMethod（可选）、suffix(可选)</td></tr> <tr><td>getOnLineMessage</td> <td>TaskQueryModel</td> <td>OnLineModel</td> <td>推送最新待办。输入属性：actorId、maxSort、queryMethod（可选）、suffix(可选)</td></tr></tbody></table> <p>StatusFlowEngine 方法如下：</p> <table><thead><tr><th>序号</th> <th>方法名</th> <th>输入</th> <th>输出</th> <th>功能描述</th></tr></thead> <tbody><tr><td>1</td> <td>getProcessProgress</td> <td>StatusOrder</td> <td><code>List&lt;ProcessProgress&gt;</code></td> <td>获取流程进度</td></tr> <tr><td>2</td> <td>getOrderService</td> <td></td> <td>IStatusOrderService</td> <td></td></tr> <tr><td>3</td> <td>getHisOrderService</td> <td></td> <td>IStatusHisOrderService</td> <td></td></tr></tbody></table> <h5 id="_2-7-2-2-restful-api"><a href="#_2-7-2-2-restful-api" class="header-anchor">#</a> 2.7.2.2 restful API</h5> <p>StatusFlowEngineResource API 如下：</p> <table><thead><tr><th>序号</th> <th>API</th> <th>功能</th> <th>METHOD</th></tr></thead> <tbody><tr><td>1</td> <td>statusFlowEngine/start</td> <td>单个流程启动</td> <td>post</td></tr> <tr><td>2</td> <td>statusFlowEngine/starts</td> <td>批量流程启动</td> <td>post</td></tr> <tr><td>3</td> <td>statusFlowEngine/complete</td> <td>批量办理</td> <td>post</td></tr> <tr><td>4</td> <td>statusFlowEngine/reject</td> <td>批量驳回</td> <td>post</td></tr> <tr><td>5</td> <td>statusFlowEngine/callBack</td> <td>单个召回，</td> <td>post</td></tr> <tr><td>6</td> <td>statusFlowEngine/suspend</td> <td>批量挂起</td> <td>post</td></tr> <tr><td>7</td> <td>statusFlowEngine/checkTaskIfExistByTaskId</td> <td>检测任务</td> <td>get</td></tr> <tr><td>8</td> <td>statusFlowEngine/getRejectNode</td> <td>获取可驳回节点</td> <td>get</td></tr> <tr><td>9</td> <td>statusFlowEngine/delete</td> <td>批量删除</td> <td>post</td></tr> <tr><td>10</td> <td>statusFlowEngine/getProcessProgress</td> <td>获取某流程实例进度</td> <td>get</td></tr> <tr><td>11</td> <td>statusFlowEngine/getHisTask</td> <td>获取流程实例的历史任务</td> <td>get</td></tr> <tr><td>12</td> <td>statusFlowEngine/getBusinessActor</td> <td>获取业务中办理人</td> <td>get</td></tr> <tr><td>13</td> <td>statusFlowEngine/getPageTask</td> <td>获取待办</td> <td>get</td></tr> <tr><td>14</td> <td>statusFlowEngine/getOnLineMessage</td> <td>获取在线消息</td> <td>get</td></tr></tbody></table> <ol><li><strong>statusFlowEngine/start</strong></li></ol> <p><strong>输入：</strong></p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;actorId&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;actorType&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;businessKey&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;creator&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;expireTime&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2020-04-03T05:48:47.673Z&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;processKey&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;processName&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;sectionId&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;variable&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p><strong>输出：</strong></p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;data&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;actorId&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;actorType&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;businessKey&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;createTime&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2020-04-03T05:48:47.671Z&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;expireTime&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2020-04-03T05:48:47.671Z&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;formKey&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;orderId&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;parentId&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;processId&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;processKey&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;sectionId&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;sort&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token property">&quot;state&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token property">&quot;suspend&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token property">&quot;taskName&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;taskNode&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;variable&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;errorCode&quot;</span><span class="token operator">:</span> <span class="token number">10000</span><span class="token punctuation">,</span>
  <span class="token property">&quot;msg&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><p><strong>2.statusFlowEngine/starts</strong></p> <p><strong>输入：</strong></p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    <span class="token property">&quot;actorId&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;actorType&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;businessKey&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;creator&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;expireTime&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2020-04-03T05:48:47.673Z&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;processKey&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;processName&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;sectionId&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;variable&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p><strong>输出：</strong></p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;data&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;actorId&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;actorType&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;businessKey&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;createTime&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2020-04-03T05:48:47.671Z&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;expireTime&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2020-04-03T05:48:47.671Z&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;formKey&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;orderId&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;parentId&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;processId&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;processKey&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;sectionId&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;sort&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token property">&quot;state&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token property">&quot;suspend&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token property">&quot;taskName&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;taskNode&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;variable&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;errorCode&quot;</span><span class="token operator">:</span> <span class="token number">10000</span><span class="token punctuation">,</span>
  <span class="token property">&quot;msg&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><p>**3.statusFlowEngine/complete **</p> <p><strong>输入：</strong></p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;actorType&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;comment&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;operator&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;processKey&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;srcTaskNode&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;tasks&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;orderId&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;sectionId&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;actorId&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;comment&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;businessKey&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">&quot;variable&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p><strong>输出：</strong></p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;data&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;actorId&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;actorType&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;businessKey&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;createTime&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2020-04-03T05:48:47.671Z&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;expireTime&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2020-04-03T05:48:47.671Z&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;formKey&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;orderId&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;parentId&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;processId&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;processKey&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;sectionId&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;sort&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token property">&quot;state&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token property">&quot;suspend&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token property">&quot;taskName&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;taskNode&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;variable&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;errorCode&quot;</span><span class="token operator">:</span> <span class="token number">10000</span><span class="token punctuation">,</span>
  <span class="token property">&quot;msg&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><p>**4.statusFlowEngine/reject **</p> <p><strong>输入：</strong></p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;comment&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;operator&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;processKey&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;srcNode&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;targetNode&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;tasks&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;actorId&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;actorType&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;businessKey&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;orderId&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;sectionId&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p><strong>输出：</strong></p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;data&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;actorId&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;actorType&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;businessKey&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;createTime&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2020-04-03T05:48:47.671Z&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;expireTime&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2020-04-03T05:48:47.671Z&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;formKey&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;orderId&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;parentId&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;processId&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;processKey&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;sectionId&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;sort&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token property">&quot;state&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token property">&quot;suspend&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token property">&quot;taskName&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;taskNode&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;variable&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;errorCode&quot;</span><span class="token operator">:</span> <span class="token number">10000</span><span class="token punctuation">,</span>
  <span class="token property">&quot;msg&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><p><strong>5.statusFlowEngine/callBack</strong></p> <p><strong>输入：</strong></p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;actorId&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;processKey&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;businessKey&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;orderId&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;sectionId&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p><strong>输出：</strong></p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;data&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;actorId&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;actorType&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;businessKey&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;createTime&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2020-04-03T05:48:47.671Z&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;expireTime&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2020-04-03T05:48:47.671Z&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;formKey&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;orderId&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;parentId&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;processId&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;processKey&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;sectionId&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;sort&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token property">&quot;state&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token property">&quot;suspend&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token property">&quot;taskName&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;taskNode&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;variable&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;errorCode&quot;</span><span class="token operator">:</span> <span class="token number">10000</span><span class="token punctuation">,</span>
  <span class="token property">&quot;msg&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><p><strong>6.statusFlowEngine/suspend</strong></p> <p><strong>输入：</strong></p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;comment&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;operator&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;processKey&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;suspend&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  <span class="token property">&quot;tasks&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;businessKey&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;orderId&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;sectionId&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p><strong>输出：</strong></p> <div class="language-json line-numbers-mode"><pre class="language-json"><code>   <span class="token punctuation">{</span>
  <span class="token property">&quot;data&quot;</span><span class="token operator">:</span> <span class="token number">0</span>
  <span class="token property">&quot;errorCode&quot;</span><span class="token operator">:</span> <span class="token number">10000</span><span class="token punctuation">,</span>
  <span class="token property">&quot;msg&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><strong>7.statusFlowEngine/checkTaskIfExistByTaskId</strong></p> <p><strong>输入：</strong></p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>

    <span class="token property">&quot;taskId&quot;</span><span class="token operator">:</span><span class="token string">&quot;string&quot;</span>
    <span class="token property">&quot;processKey&quot;</span><span class="token operator">:</span><span class="token string">&quot;string&quot;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><strong>输出：</strong></p> <div class="language-json line-numbers-mode"><pre class="language-json"><code>   <span class="token punctuation">{</span>
  <span class="token property">&quot;data&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span>
  <span class="token property">&quot;errorCode&quot;</span><span class="token operator">:</span> <span class="token number">10000</span><span class="token punctuation">,</span>
  <span class="token property">&quot;msg&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><strong>8.statusFlowEngine/getRejectNode</strong></p> <p><strong>输入：</strong></p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;orderId&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span> <span class="token comment">//tod必填</span>
  <span class="token property">&quot;processKey&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><strong>输出：</strong></p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;data&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;orderNo&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
      <span class="token property">&quot;taskName&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;taskNode&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">&quot;errorCode&quot;</span><span class="token operator">:</span> <span class="token number">10000</span><span class="token punctuation">,</span>
  <span class="token property">&quot;msg&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p><strong>9.statusFlowEngine/delete</strong></p> <p><strong>输入：</strong></p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;processKey&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><strong>输出：</strong></p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;data&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  <span class="token property">&quot;errorCode&quot;</span><span class="token operator">:</span> <span class="token number">10000</span><span class="token punctuation">,</span>
  <span class="token property">&quot;msg&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><strong>10.statusFlowEngine/getProcessProgress</strong></p> <p><strong>输入：</strong></p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;processKey&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><strong>输出：</strong></p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;data&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;progress&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
      <span class="token property">&quot;suspend&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
      <span class="token property">&quot;taskName&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;taskNode&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;taskType&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">&quot;errorCode&quot;</span><span class="token operator">:</span> <span class="token number">10000</span><span class="token punctuation">,</span>
  <span class="token property">&quot;msg&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p><strong>11.statusFlowEngine/getHisTask</strong></p> <p><strong>输入：</strong></p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    <span class="token property">&quot;orderId&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;processKey&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><strong>输出：</strong></p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;data&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;actorId&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;actorType&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;businessKey&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;comment&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;createTime&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2020-04-03T05:48:47.588Z&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;dueTime&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;endTime&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2020-04-03T05:48:47.588Z&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;expireTime&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2020-04-03T05:48:47.588Z&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;formKey&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;operator&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;operatorName&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;orderId&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;parentId&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;processId&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;processKey&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;reject&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token property">&quot;sectionId&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;sort&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
      <span class="token property">&quot;state&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
      <span class="token property">&quot;suspend&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
      <span class="token property">&quot;taskName&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;taskNode&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;variable&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">&quot;errorCode&quot;</span><span class="token operator">:</span> <span class="token number">10000</span><span class="token punctuation">,</span>
  <span class="token property">&quot;msg&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br></div></div><p><strong>12.statusFlowEngine/getBusinessActor</strong></p> <p><strong>输入：</strong></p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    <span class="token property">&quot;businessKey&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;processKey&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;variable&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p><strong>输出：</strong></p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;data&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;errorCode&quot;</span><span class="token operator">:</span> <span class="token number">10000</span><span class="token punctuation">,</span>
  <span class="token property">&quot;msg&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><strong>13.statusFlowEngine/getPageTask</strong></p> <p><strong>输入：</strong></p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;actorId&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;queryMethod&quot;</span><span class="token operator">:</span> <span class="token string">&quot;int&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 0:公共 1：段别 2：模块</span>
  <span class="token property">&quot;suffix&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span> <span class="token comment">// 针对查询方式2有效</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><strong>输出：</strong></p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;data&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;autoCount&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token property">&quot;hasNext&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token property">&quot;hasPre&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token property">&quot;nextPage&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token property">&quot;orderBy&quot;</span><span class="token operator">:</span> <span class="token string">&quot;CREATE_TIME DESC&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;orderBySetted&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token property">&quot;pageNo&quot;</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
    <span class="token property">&quot;pageSize&quot;</span><span class="token operator">:</span> <span class="token number">30</span><span class="token punctuation">,</span>
    <span class="token property">&quot;prePage&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token property">&quot;rows&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token property">&quot;actorId&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;actorName&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;businessKey&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;categoryId&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;categoryModelCode&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;categoryName&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;createTime&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2020-04-03T05:48:47.618Z&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;creator&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;creatorName&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;dueTime&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;endTime&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2020-04-03T05:48:47.618Z&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;flag&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
        <span class="token property">&quot;formKey&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;orderId&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;processId&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;processKey&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;processName&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;sort&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
        <span class="token property">&quot;taskId&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;taskName&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;taskNode&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;variable&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token property">&quot;total&quot;</span><span class="token operator">:</span> <span class="token number">81</span><span class="token punctuation">,</span>
    <span class="token property">&quot;totoalPage&quot;</span><span class="token operator">:</span> <span class="token number">3</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;errorCode&quot;</span><span class="token operator">:</span> <span class="token number">10000</span><span class="token punctuation">,</span>
  <span class="token property">&quot;msg&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br></div></div><p><strong>14.statusFlowEngine/getOnLineMessage</strong></p> <p><strong>输入：</strong></p> <div class="language-json line-numbers-mode"><pre class="language-json"><code>  <span class="token punctuation">{</span>
    <span class="token property">&quot;actorId&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;maxSort&quot;</span><span class="token operator">:</span> <span class="token string">&quot;long&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;queryMethod&quot;</span><span class="token operator">:</span> <span class="token string">&quot;int&quot;</span><span class="token comment">// 0:公共 1：段别 2：模块</span>
    <span class="token property">&quot;suffix&quot;</span><span class="token operator">:</span><span class="token string">&quot;string&quot;</span> <span class="token comment">// 针对查询方式2有效</span>
  <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><strong>输出：</strong></p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;data&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;count&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token property">&quot;maxSort&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token property">&quot;newCount&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token property">&quot;newTasks&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token property">&quot;actorId&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;actorName&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;businessKey&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;categoryId&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;categoryModelCode&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;categoryName&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;createTime&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2020-04-03T05:48:47.606Z&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;creator&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;creatorName&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;dueTime&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;endTime&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2020-04-03T05:48:47.606Z&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;flag&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
        <span class="token property">&quot;formKey&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;orderId&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;processId&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;processKey&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;processName&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;sort&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
        <span class="token property">&quot;taskId&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;taskName&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;taskNode&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;variable&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;erroode&quot;</span><span class="token operator">:</span> <span class="token number">10000</span><span class="token punctuation">,</span>
  <span class="token property">&quot;msg&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br></div></div><h5 id="_2-7-2-3-流程事件"><a href="#_2-7-2-3-流程事件" class="header-anchor">#</a> 2.7.2.3 流程事件</h5> <p>流程实例启动、结束、任务办理完成后会触发系统的全局事件，完成业务表的流程字段的更新。如果某个业务流程配置了业务相关的事件监听器，则会通知业务，如果没有定义，则统一由全局监听器自己处理。GlobalStatusFlowListener 的相关 API 接口如下：</p> <div class="language-JAVA line-numbers-mode"><pre class="language-java"><code>   <span class="token comment">/**
     *流程实例启动事件
     * @param orders
     */</span>
     <span class="token keyword">void</span> <span class="token function">processStartedEvent</span><span class="token punctuation">(</span><span class="token class-name">StatusProcess</span> process<span class="token punctuation">,</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">StatusOrder</span><span class="token punctuation">&gt;</span></span> orders<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">/**
     *实例流程完成事件
     * @param orders
     */</span>
    <span class="token keyword">void</span> <span class="token function">processCompletedEvent</span><span class="token punctuation">(</span><span class="token class-name">StatusProcess</span> process<span class="token punctuation">,</span> <span class="token class-name">StatusNode</span> node<span class="token punctuation">,</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">StatusOrder</span><span class="token punctuation">&gt;</span></span> orders<span class="token punctuation">)</span><span class="token punctuation">;</span>


    <span class="token comment">/**
     * 任务完成事件，如果定义了完成触发器，则会完成业务谁操作、什么时间操作的两个字段
     * @param tasks
     */</span>
     <span class="token keyword">void</span> <span class="token function">completedEvent</span><span class="token punctuation">(</span><span class="token class-name">StatusProcess</span> process<span class="token punctuation">,</span> <span class="token class-name">StatusNode</span> node<span class="token punctuation">,</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">StatusHisTask</span><span class="token punctuation">&gt;</span></span> tasks<span class="token punctuation">)</span><span class="token punctuation">;</span>


    <span class="token comment">/**
     * 任务创建事件
     * @param tasks
     */</span>
     <span class="token keyword">void</span> <span class="token function">createdEvent</span><span class="token punctuation">(</span><span class="token class-name">StatusProcess</span> process<span class="token punctuation">,</span> <span class="token class-name">StatusNode</span> node<span class="token punctuation">,</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">TaskModel</span><span class="token punctuation">&gt;</span></span> tasks<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">/**
     *
     * @param process
     * @param node
     * @param tasks
     * @param isStart
     */</span>

     <span class="token keyword">void</span> <span class="token function">createdEvent</span><span class="token punctuation">(</span><span class="token class-name">StatusProcess</span> process<span class="token punctuation">,</span> <span class="token class-name">StatusNode</span> node<span class="token punctuation">,</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">TaskModel</span><span class="token punctuation">&gt;</span></span> tasks<span class="token punctuation">,</span><span class="token keyword">boolean</span> isStart<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br></div></div><h5 id="_2-7-2-4-流程与业务"><a href="#_2-7-2-4-流程与业务" class="header-anchor">#</a> 2.7.2.4 流程与业务</h5> <p>BusinessService 类实现业务表的处理及任务创建的消息推送，包括流程字段更新、业务状态的更新、谁办理及办理时间的两个段更新。业务表必须包括以下字段：</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>  <span class="token punctuation">`</span>task_user<span class="token punctuation">`</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">300</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'下步办理人'</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>process_instance_id<span class="token punctuation">`</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'流程实例ID'</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>task_id<span class="token punctuation">`</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'流程业务ID'</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>form_key<span class="token punctuation">`</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'formKey'</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>task_node<span class="token punctuation">`</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'流程节点名称'</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>task_name<span class="token punctuation">`</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'流程节点名称'</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>process_def_key<span class="token punctuation">`</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'流程定义key'</span><span class="token punctuation">,</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><div class="language-Java line-numbers-mode"><pre class="language-java"><code> <span class="token comment">/**
     * 更新流程
     *
     * @param process
     * @param node
     * @param tasks
     * @param isStart
     */</span>

    <span class="token keyword">void</span> <span class="token function">updateProcessByTask</span><span class="token punctuation">(</span><span class="token class-name">StatusProcess</span> process<span class="token punctuation">,</span> <span class="token class-name">StatusNode</span> node<span class="token punctuation">,</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">TaskModel</span><span class="token punctuation">&gt;</span></span> tasks<span class="token punctuation">,</span> <span class="token keyword">boolean</span> isStart<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">void</span> <span class="token function">updateProcessByTask</span><span class="token punctuation">(</span><span class="token class-name">StatusProcess</span> process<span class="token punctuation">,</span> <span class="token class-name">StatusNode</span> node<span class="token punctuation">,</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">TaskModel</span><span class="token punctuation">&gt;</span></span> tasks<span class="token punctuation">,</span> <span class="token keyword">boolean</span> isStart<span class="token punctuation">,</span> <span class="token keyword">boolean</span> isMQ<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">/**
     *流程实例结束更新
     *
     * @param process
     * @param node
     * @param orders
     */</span>
    <span class="token keyword">void</span> <span class="token function">updateProcessByOrder</span><span class="token punctuation">(</span><span class="token class-name">StatusProcess</span> process<span class="token punctuation">,</span> <span class="token class-name">StatusNode</span> node<span class="token punctuation">,</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">StatusOrder</span><span class="token punctuation">&gt;</span></span> orders<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">/**
     * 更新业务办理的谁办理、什么时间办理的两个字段
     * @param process
     * @param tasks
     * @param fields
     */</span>
    <span class="token keyword">void</span> <span class="token function">updateProcessInfoByHisTask</span><span class="token punctuation">(</span><span class="token class-name">StatusProcess</span> process<span class="token punctuation">,</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">StatusHisTask</span><span class="token punctuation">&gt;</span></span> tasks<span class="token punctuation">,</span> <span class="token class-name">String</span> fields<span class="token punctuation">)</span><span class="token punctuation">;</span>

   <span class="token comment">/**
     * 获取业务办理人
     * @param variableName
     * @param model
     * @return
     */</span>
     <span class="token class-name">String</span> <span class="token function">findActorId</span><span class="token punctuation">(</span><span class="token class-name">String</span> variableName<span class="token punctuation">,</span> <span class="token class-name">BusinessModel</span> model<span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br></div></div><div class="language-sql line-numbers-mode"><pre class="language-sql"><code>  <span class="token punctuation">`</span>task_user<span class="token punctuation">`</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">300</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'下步办理人'</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>process_instance_id<span class="token punctuation">`</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'流程实例ID'</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>task_id<span class="token punctuation">`</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'流程业务ID'</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>form_key<span class="token punctuation">`</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'formKey'</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>task_node<span class="token punctuation">`</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'流程节点名称'</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>task_name<span class="token punctuation">`</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'流程节点名称'</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>process_def_key<span class="token punctuation">`</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'流程定义key'</span><span class="token punctuation">,</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h5 id="_2-7-2-5-流程事件自定义"><a href="#_2-7-2-5-流程事件自定义" class="header-anchor">#</a> 2.7.2.5 流程事件自定义</h5> <p>业务部分可根据自身需要扩展流程引擎，比如流程表可以按照段别、模块存储、流程监听器需业务自身扩展。如果扩展了流程监听器，全局监听事件则会调用业务自定义的监听器，则不执行自动更新业务表</p> <table><thead><tr><th>序号</th> <th>属性</th> <th>描述</th></tr></thead> <tbody><tr><td>1</td> <td>com.togest.engine.msgEnabled</td> <td>MQ 消息使能标准 true:启用消息，开启消息后，任务创建都会推送至前端</td></tr> <tr><td>2</td> <td>com.togest.engine.process</td> <td>流程定义列表，支持多个定义</td></tr> <tr><td>3</td> <td>com.togest.engine.process.processkey</td> <td>流程定义 KEY</td></tr> <tr><td>4</td> <td>com.togest.engine.process.flowTableRule</td> <td>流程表配置 0：公共(流程表名) ，1：段(流程表名+“<em>”+具体段别 ),2：模块(流程表名+“</em>”+具体模块)</td></tr> <tr><td>5</td> <td>com.togest.engine.process.flowTableSuffix</td> <td>在 4 的配置等于 2 有效，表名后缀</td></tr> <tr><td>6</td> <td>com.togest.engine.process.listenerClassName</td> <td>自定义流程事件监听器 BEAN 名字</td></tr> <tr><td>7</td> <td>com.togest.engine.process.nodes</td> <td>流程节点定义</td></tr> <tr><td>8</td> <td>com.togest.engine.process.nodes.node</td> <td>流程节点定义名</td></tr> <tr><td>9</td> <td>com.togest.engine.process.nodes.node.assignees</td> <td>节点办理人，KEY 为段别。，目前系统统一采用节点权限配置，不建议启用该配置</td></tr> <tr><td>10</td> <td>com.togest.engine.process.nodes.node.trigger</td> <td>节点触发器定义</td></tr> <tr><td>11</td> <td>com.togest.engine.process.nodes.node.trigger.completedField</td> <td>任务完成时，需更新的“谁办理”、“什么时间”两个字段，两个字段采用“，”拼接的方式</td></tr></tbody></table> <p>以 6C 数据中心为例，介绍流程配置文件</p> <div class="language-properties line-numbers-mode"><pre class="language-properties"><code><span class="token attr-name">com</span><span class="token punctuation">:</span>
<span class="token attr-name">  togest</span><span class="token punctuation">:</span>
<span class="token attr-name">    statusFlow</span><span class="token punctuation">:</span>
<span class="token attr-name">      engine</span><span class="token punctuation">:</span>
<span class="token comment">        # 消息是否启用</span>
<span class="token attr-name">        msgEnabled</span><span class="token punctuation">:</span> <span class="token attr-value">false</span>
<span class="token comment">         # 流程定义</span>
<span class="token attr-name">        process</span><span class="token punctuation">:</span>
<span class="token comment">            # 流程定义KEY</span>
<span class="token attr-name">          -</span> <span class="token attr-value">processKey: 6c_defect</span>
<span class="token comment">             # 表规则 0：公共 1：段 2：业务。默认公共</span>
<span class="token attr-name">            flowTableRule</span><span class="token punctuation">:</span> <span class="token attr-value">2</span>
<span class="token comment">             # 业务流程表名后缀</span>
<span class="token attr-name">            flowTableSuffix</span><span class="token punctuation">:</span> <span class="token attr-value">6c</span>
<span class="token comment">            #节点定义</span>
<span class="token attr-name">            nodes</span><span class="token punctuation">:</span>
<span class="token comment">                # 具体节点步骤</span>
<span class="token attr-name">              -</span> <span class="token attr-value">node: usertask2</span>
<span class="token comment">               #办理人定义，按照段别。新配置流程不再使用，由业务或者前端传递</span>
<span class="token attr-name">                assignees</span><span class="token punctuation">:</span>
<span class="token attr-name">                  7c5e13b4dd8d4f599bfb11a9a8ef4d16</span><span class="token punctuation">:</span> <span class="token attr-value">f4d5b2de07ae4e52afb263f98f263a3f</span>
<span class="token attr-name">                  8b7caeccf8c249ecb21465de3e7050e2</span><span class="token punctuation">:</span> <span class="token attr-value">4253afb9b78a4f3ca92e9fb5e720024e,41ffb1c1b7d24c0897616b47afe0f1cf</span>
<span class="token attr-name">                  16516b9988bb470cb5225825997e9562</span><span class="token punctuation">:</span> <span class="token attr-value">3abab7c25d024e5189bd877de07d6288,ed58783023c44428838c20ffa47ee9f6</span>
<span class="token attr-name">                  96174ba6690242cfa8da9e0e7c60c025</span><span class="token punctuation">:</span> <span class="token attr-value">df7d514f277f43c28c145d2d9edec847</span>
<span class="token attr-name">                  3ceeec04f1264f1290ba8763279a5de0</span><span class="token punctuation">:</span> <span class="token attr-value">d30407c09dd44bd48139e8f5d0b1cd27,904f2c390a4e48339fdeb960ba68b955</span>
<span class="token attr-name">              -</span> <span class="token attr-value">node: usertask6</span>
<span class="token attr-name">                assignees</span><span class="token punctuation">:</span>
<span class="token attr-name">                  7c5e13b4dd8d4f599bfb11a9a8ef4d16</span><span class="token punctuation">:</span> <span class="token attr-value">7c5e13b4dd8d4f599bfb11a9a8ef4d16,f4d5b2de07ae4e52afb263f98f263a3f</span>
<span class="token attr-name">                  8b7caeccf8c249ecb21465de3e7050e2</span><span class="token punctuation">:</span> <span class="token attr-value">41ffb1c1b7d24c0897616b47afe0f1cf,4253afb9b78a4f3ca92e9fb5e720024e</span>
<span class="token attr-name">                  16516b9988bb470cb5225825997e9562</span><span class="token punctuation">:</span> <span class="token attr-value">3abab7c25d024e5189bd877de07d6288,ed58783023c44428838c20ffa47ee9f6</span>
<span class="token attr-name">                  96174ba6690242cfa8da9e0e7c60c025</span><span class="token punctuation">:</span> <span class="token attr-value">df7d514f277f43c28c145d2d9edec847</span>
<span class="token attr-name">                  3ceeec04f1264f1290ba8763279a5de0</span><span class="token punctuation">:</span> <span class="token attr-value">d30407c09dd44bd48139e8f5d0b1cd27,904f2c390a4e48339fdeb960ba68b955</span>
<span class="token attr-name">              -</span> <span class="token attr-value">node: usertask7</span>
<span class="token attr-name">                assignees</span><span class="token punctuation">:</span>
<span class="token attr-name">                  7c5e13b4dd8d4f599bfb11a9a8ef4d16</span><span class="token punctuation">:</span> <span class="token attr-value">togest_status-root</span>
<span class="token attr-name">                  8b7caeccf8c249ecb21465de3e7050e2</span><span class="token punctuation">:</span> <span class="token attr-value">togest_status-root</span>
<span class="token attr-name">                  16516b9988bb470cb5225825997e9562</span><span class="token punctuation">:</span> <span class="token attr-value">togest_status-root</span>
<span class="token attr-name">                  96174ba6690242cfa8da9e0e7c60c025</span><span class="token punctuation">:</span> <span class="token attr-value">togest_status-root</span>
<span class="token attr-name">                  3ceeec04f1264f1290ba8763279a5de0</span><span class="token punctuation">:</span> <span class="token attr-value">togest_status-root</span>
<span class="token attr-name">          -</span> <span class="token attr-value">processKey: 1c_plan</span>
<span class="token attr-name">            flowTableRule</span><span class="token punctuation">:</span> <span class="token attr-value">2</span>
<span class="token attr-name">            flowTableSuffix</span><span class="token punctuation">:</span> <span class="token attr-value">6c</span>
<span class="token attr-name">          -</span> <span class="token attr-value">processKey: 6c_plan_section</span>
<span class="token attr-name">            flowTableRule</span><span class="token punctuation">:</span> <span class="token attr-value">2</span>
<span class="token attr-name">            flowTableSuffix</span><span class="token punctuation">:</span> <span class="token attr-value">6c</span>
<span class="token attr-name">          -</span> <span class="token attr-value">processKey: 6c_notice_section</span>
<span class="token attr-name">            flowTableRule</span><span class="token punctuation">:</span> <span class="token attr-value">2</span>
<span class="token attr-name">            flowTableSuffix</span><span class="token punctuation">:</span> <span class="token attr-value">6c</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br></div></div><p>以接触网台账心为例，介绍流程配置文件</p> <div class="language-properties line-numbers-mode"><pre class="language-properties"><code><span class="token attr-name">com</span><span class="token punctuation">:</span>
<span class="token attr-name">  togest</span><span class="token punctuation">:</span>
<span class="token attr-name">    statusFlow</span><span class="token punctuation">:</span>
<span class="token attr-name">      engine</span><span class="token punctuation">:</span>
<span class="token comment">        # 消息是否启用</span>
<span class="token attr-name">        msgEnabled</span><span class="token punctuation">:</span> <span class="token attr-value">true</span>
<span class="token attr-name">        process</span><span class="token punctuation">:</span>
<span class="token comment">            # 流程定义key</span>
<span class="token attr-name">          -</span> <span class="token attr-value">processKey: jcw_ledger_base_info</span>
<span class="token comment">            # 流程监听器</span>
<span class="token attr-name">            listenerClassName</span><span class="token punctuation">:</span> <span class="token attr-value">ledgerStatusFlowListener</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Component</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">LedgerStatusFlowListener</span> <span class="token keyword">implements</span> <span class="token class-name">StatusFlowListener</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">BusinessService</span> businessService<span class="token punctuation">;</span>
    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">LedgerCommonService</span> ledgerCommonService<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">processStartedEvent</span><span class="token punctuation">(</span><span class="token class-name">StatusProcess</span> process<span class="token punctuation">,</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">StatusOrder</span><span class="token punctuation">&gt;</span></span> orders<span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">processCompletedEvent</span><span class="token punctuation">(</span><span class="token class-name">StatusProcess</span> process<span class="token punctuation">,</span> <span class="token class-name">StatusNode</span> node<span class="token punctuation">,</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">StatusOrder</span><span class="token punctuation">&gt;</span></span> orders<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 更新主表数据</span>
        businessService<span class="token punctuation">.</span><span class="token function">updateProcessByOrder</span><span class="token punctuation">(</span>process<span class="token punctuation">,</span> node<span class="token punctuation">,</span> orders<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 更新子表数据</span>
        <span class="token class-name">SystemResoucesResponse</span> resources <span class="token operator">=</span> ledgerCommonService<span class="token punctuation">.</span><span class="token function">getResourcesById</span><span class="token punctuation">(</span>orders<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getBusinessKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        process<span class="token punctuation">.</span><span class="token function">setTableName</span><span class="token punctuation">(</span>resources<span class="token punctuation">.</span><span class="token function">getResource</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getResource</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        businessService<span class="token punctuation">.</span><span class="token function">updateProcessByOrder</span><span class="token punctuation">(</span>process<span class="token punctuation">,</span> node<span class="token punctuation">,</span> orders<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">StatusFlowEngineConfiguration</span><span class="token punctuation">.</span>END_TASK<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span><span class="token function">getTaskType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">//处理台账回填和工作流统计</span>
            <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> orderIds <span class="token operator">=</span> <span class="token class-name">FunctionUtil</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>orders<span class="token punctuation">,</span> <span class="token class-name">StatusOrder</span><span class="token operator">::</span><span class="token function">getBusinessKey</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;orderIds 1 =&gt; &quot;</span> <span class="token operator">+</span> orderIds<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// 处理工作量和工区填报</span>
            orderIds <span class="token operator">=</span> ledgerCommonService<span class="token punctuation">.</span><span class="token function">handleWorkData</span><span class="token punctuation">(</span>orderIds<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;orderIds 2 =&gt; &quot;</span> <span class="token operator">+</span> orderIds<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// 处理数据回填</span>
            ledgerCommonService<span class="token punctuation">.</span><span class="token function">handleData</span><span class="token punctuation">(</span>resources<span class="token punctuation">.</span><span class="token function">getResource</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getCustomCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> orderIds<span class="token punctuation">,</span> resources<span class="token punctuation">,</span> orders<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getCreator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">completedEvent</span><span class="token punctuation">(</span><span class="token class-name">StatusProcess</span> process<span class="token punctuation">,</span> <span class="token class-name">StatusNode</span> node<span class="token punctuation">,</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">StatusHisTask</span><span class="token punctuation">&gt;</span></span> tasks<span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">createdEvent</span><span class="token punctuation">(</span><span class="token class-name">StatusProcess</span> process<span class="token punctuation">,</span> <span class="token class-name">StatusNode</span> node<span class="token punctuation">,</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">TaskModel</span><span class="token punctuation">&gt;</span></span> tasks<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">createdEvent</span><span class="token punctuation">(</span>process<span class="token punctuation">,</span> node<span class="token punctuation">,</span> tasks<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">createdEvent</span><span class="token punctuation">(</span><span class="token class-name">StatusProcess</span> process<span class="token punctuation">,</span> <span class="token class-name">StatusNode</span> node<span class="token punctuation">,</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">TaskModel</span><span class="token punctuation">&gt;</span></span> tasks<span class="token punctuation">,</span> <span class="token keyword">boolean</span> isStart<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        businessService<span class="token punctuation">.</span><span class="token function">updateProcessByTask</span><span class="token punctuation">(</span>process<span class="token punctuation">,</span> node<span class="token punctuation">,</span> tasks<span class="token punctuation">,</span> isStart<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 更新子表数据</span>
        <span class="token class-name">SystemResoucesResponse</span> resources <span class="token operator">=</span> ledgerCommonService<span class="token punctuation">.</span><span class="token function">getResourcesById</span><span class="token punctuation">(</span>tasks<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getBusinessKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        process<span class="token punctuation">.</span><span class="token function">setTableName</span><span class="token punctuation">(</span>resources<span class="token punctuation">.</span><span class="token function">getResource</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getResource</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        businessService<span class="token punctuation">.</span><span class="token function">updateProcessByTask</span><span class="token punctuation">(</span>process<span class="token punctuation">,</span> node<span class="token punctuation">,</span> tasks<span class="token punctuation">,</span> isStart<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br></div></div><p>以综合办公用品申请为例，介绍流程配置文件。自定义扩展了流程事件</p> <div class="language-properties line-numbers-mode"><pre class="language-properties"><code><span class="token attr-name">com</span><span class="token punctuation">:</span>
<span class="token attr-name">  togest</span><span class="token punctuation">:</span>
<span class="token attr-name">    statusFlow</span><span class="token punctuation">:</span>
<span class="token attr-name">      engine</span><span class="token punctuation">:</span>
<span class="token attr-name">        msgEnabled</span><span class="token punctuation">:</span> <span class="token attr-value">true</span>
<span class="token attr-name">        process</span><span class="token punctuation">:</span>
<span class="token attr-name">          -</span> <span class="token attr-value">processKey: comp_spares_apply</span>
<span class="token attr-name">            nodes</span><span class="token punctuation">:</span>
<span class="token attr-name">              -</span> <span class="token attr-value">node: usertask2</span>
<span class="token comment">                # 触发器</span>
<span class="token attr-name">                trigger</span><span class="token punctuation">:</span>
<span class="token comment">                 # 完成字段</span>
<span class="token attr-name">                  completedField</span><span class="token punctuation">:</span> <span class="token attr-value">audit_person,audit_date</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h5 id="_2-7-2-6-业务办理提交扩展"><a href="#_2-7-2-6-业务办理提交扩展" class="header-anchor">#</a> 2.7.2.6 业务办理提交扩展</h5> <p>有些业务可能会存在业务数据及流程一块操作的过程，遇到这种情况时，我们目前有两种处理办法，第一种采用业务数据保存与流程办理分成两步，增加一个流程操作按钮，以达到保存业务数据和流程分开。对于确实需要一步操作的话，我们的另外一种处理方式是采用自定义业务提交 API 的方式实现，比如某一个流程节点可以自定义 API 提交及驳回路由，而不走公共提交 API，由业务触发调用工作流引擎。</p> <p>以下是电力针对供电处科长审核时，业务办理重写提交场景。</p> <p><img src="/vuepress-demo/assets/img/image-20200402171141910.1c362b2f.png" alt="image-20200402171141910"></p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>	<span class="token annotation punctuation">@Override</span>
	<span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">gdckzAudit</span><span class="token punctuation">(</span><span class="token class-name">BatchCompleteModel</span> batchCompleteModel<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token class-name">Objects</span><span class="token punctuation">.</span><span class="token function">requireNonNull</span><span class="token punctuation">(</span>batchCompleteModel<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">Objects</span><span class="token punctuation">.</span><span class="token function">requireNonNull</span><span class="token punctuation">(</span>batchCompleteModel<span class="token punctuation">.</span><span class="token function">getTasks</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">TaskCompleteModel</span> task <span class="token operator">=</span> batchCompleteModel<span class="token punctuation">.</span><span class="token function">getTasks</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>batchCompleteModel<span class="token punctuation">.</span><span class="token function">compareVariable</span><span class="token punctuation">(</span><span class="token string">&quot;leadPass&quot;</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> map <span class="token operator">=</span> batchCompleteModel<span class="token punctuation">.</span><span class="token function">getVariableMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token class-name">CutPlan</span> cutPlans <span class="token operator">=</span> dao<span class="token punctuation">.</span><span class="token function">getByKey</span><span class="token punctuation">(</span>task<span class="token punctuation">.</span><span class="token function">getBusinessKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>cutPlans <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">ServiceException</span><span class="token punctuation">(</span><span class="token string">&quot;查询计划数据空&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;gateway&quot;</span><span class="token punctuation">,</span> <span class="token operator">!</span>auditLists<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span>cutPlans<span class="token punctuation">.</span><span class="token function">getTepName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			batchCompleteModel<span class="token punctuation">.</span><span class="token function">setVariable</span><span class="token punctuation">(</span><span class="token class-name">Jacksons</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>map<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token punctuation">}</span>
		<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">TaskModel</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> statusFlowEngine<span class="token punctuation">.</span><span class="token function">completeTask</span><span class="token punctuation">(</span>batchCompleteModel<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span> list<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p>业务有时候会需要判断该办理是否是驳回操作，BatchCompleteModel 类中提供方法判断变量值</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code> <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">compareVariable</span><span class="token punctuation">(</span><span class="token class-name">String</span> variableName<span class="token punctuation">,</span> <span class="token class-name">Object</span> variableValue<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token function">compareVariable</span><span class="token punctuation">(</span>variableName<span class="token punctuation">,</span> variableValue<span class="token punctuation">,</span> <span class="token string">&quot;==&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">}</span>
    <span class="token comment">/**
     * @param variableName
     * @param variableValue
     * @return
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">compareVariable</span><span class="token punctuation">(</span><span class="token class-name">String</span> variableName<span class="token punctuation">,</span> <span class="token class-name">Object</span> variableValue<span class="token punctuation">,</span> <span class="token class-name">String</span> expression<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Objects</span><span class="token punctuation">.</span><span class="token function">requireNonNull</span><span class="token punctuation">(</span>variableName<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Objects</span><span class="token punctuation">.</span><span class="token function">requireNonNull</span><span class="token punctuation">(</span>variableValue<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Object</span> exist <span class="token operator">=</span> <span class="token function">getVariableValue</span><span class="token punctuation">(</span>variableName<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Preconditions</span><span class="token punctuation">.</span><span class="token function">checkArgument</span><span class="token punctuation">(</span>exist <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">,</span> variableName <span class="token operator">+</span> <span class="token string">&quot;值空&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Object</span> v <span class="token operator">=</span> <span class="token function">getVariableValue</span><span class="token punctuation">(</span>exist<span class="token punctuation">,</span> variableValue<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">ScriptEngineManager</span> m <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ScriptEngineManager</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">ScriptEngine</span> engine <span class="token operator">=</span> m<span class="token punctuation">.</span><span class="token function">getEngineByName</span><span class="token punctuation">(</span><span class="token string">&quot;JavaScript&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> exp <span class="token operator">=</span> <span class="token string">&quot;&quot;</span> <span class="token operator">+</span> v <span class="token operator">+</span> expression <span class="token operator">+</span> variableValue<span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token class-name">Boolean</span><span class="token punctuation">)</span> engine<span class="token punctuation">.</span><span class="token function">eval</span><span class="token punctuation">(</span>exp<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">ScriptException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token comment">// TODO Auto-generated catch block</span>
			<span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">StatusFlowException</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

    <span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><h5 id="_2-7-2-7-业务事件升级"><a href="#_2-7-2-7-业务事件升级" class="header-anchor">#</a> 2.7.2.7 业务事件升级</h5> <p>​         针对某些业务应用可能只关注流程结束或者某一个具体的事件感兴趣，而其它的事件继续希望流程引擎去处理，因此扩展了一个抽象CommonStatusFlowListener，其它的应用可以继承它，再去重写某一个事件。</p> <p><img src="/vuepress-demo/assets/img/image-20200430134644358.3d2ecf95.png" alt="image-20200430134644358"></p> <h4 id="_2-7-3-流程定义配置"><a href="#_2-7-3-流程定义配置" class="header-anchor">#</a> 2.7.3 流程定义配置</h4> <h5 id="_2-7-3-1-流程定义"><a href="#_2-7-3-1-流程定义" class="header-anchor">#</a> 2.7.3.1 流程定义</h5> <p><img src="/vuepress-demo/assets/img/image-20200402173105974.2f7b12bb.png" alt="image-20200402173105974"></p> <table><thead><tr><th>序号</th> <th>属性</th> <th>描述</th></tr></thead> <tbody><tr><td>1</td> <td>流程 KEY</td> <td>流程定义 KEY 系统唯一，一般使用系统表名</td></tr> <tr><td>2</td> <td>流程名称</td> <td>流程定义名称</td></tr> <tr><td>3</td> <td>业务状态字段</td> <td>具体视情况而定，需要根据流程状态跟新业务状态字段</td></tr> <tr><td>4</td> <td>业务状态字典</td> <td>具 3 而定，业务使用的字典名称</td></tr> <tr><td>5</td> <td>业务表名</td> <td>业务表名</td></tr> <tr><td>6</td> <td>分类</td> <td>流程分类</td></tr> <tr><td>7</td> <td>服务网关</td> <td>模块对应的网关，流程进度及流程历史任务 UI 会使用该网关</td></tr></tbody></table> <h5 id="_2-7-3-2-节点定义"><a href="#_2-7-3-2-节点定义" class="header-anchor">#</a> 2.7.3.2 节点定义</h5> <p><img src="/vuepress-demo/assets/img/image-20200402173317811.a14e7d7c.png" alt="image-20200402173317811"></p> <table><thead><tr><th style="text-align:left;">序号</th> <th>属性</th> <th>描述</th></tr></thead> <tbody><tr><td style="text-align:left;">1</td> <td>任务名称</td> <td>名称，具体流程中唯一</td></tr> <tr><td style="text-align:left;">2</td> <td>顺序号</td> <td>唯一，从小到大</td></tr> <tr><td style="text-align:left;">3</td> <td>业务字典值</td> <td>对应字典中，某字典项的值，视业务情况而定</td></tr> <tr><td style="text-align:left;">4</td> <td>业务字典描述</td> <td>对应 3 中的描述</td></tr> <tr><td style="text-align:left;">5</td> <td>任务节点</td> <td>任务节点代码，具体流程中唯一</td></tr> <tr><td style="text-align:left;">6</td> <td>任务类型</td> <td>类型有三种 Start/Task/Gateway/End</td></tr> <tr><td style="text-align:left;">7</td> <td>页面办理路由</td> <td>目前只应用详情路由配置,每个节点办理路由移至决策属性里面</td></tr> <tr><td style="text-align:left;">8</td> <td>流程追踪页面路由</td> <td>应用对于流程追踪页面有特殊定制场景</td></tr> <tr><td style="text-align:left;">9</td> <td>提交 API</td> <td>流程办理提交后台 API，默认可配置成通用的，对于 Start 任务:/模块 URL/statusFlowEngine/starts,Task 任务：/模块 URL/statusFlowEngine/complete</td></tr> <tr><td style="text-align:left;">10</td> <td>是否驳回</td> <td></td></tr> <tr><td style="text-align:left;">11</td> <td>驳回 API</td> <td>如果 10 配置驳回才生效，驳回 AP 默认可配置成/模块 URL/statusFlowEngine/reject</td></tr> <tr><td style="text-align:left;">12</td> <td>表达式</td> <td>冒号表达式，leadPass==true?&quot;c1&quot;:&quot;c2&quot; 标识变量 leadPass 通过则指向 C1 不通过则指向 C2.配置参考决策配置</td></tr> <tr><td style="text-align:left;">13</td> <td>决策</td> <td>name:条件编码 to:代表流向 value:变量提交值 desc:UI 单选框显示 hideComment：是否开启办理意见，handleRoute:办理路由[<br> {<br> &quot;name&quot;: &quot;c1&quot;,<br> &quot;to&quot;: &quot;usertask6&quot;,<br> &quot;value&quot;: &quot;true&quot;,<br> &quot;desc&quot;: &quot;提交通过&quot;,<br> &quot;hideComment&quot;: true,<br> &quot;handleRoute&quot;: &quot;/6c/defectManagement/reviewRectificationHandle&quot;<br> },<br> {<br> &quot;name&quot;: &quot;c2&quot;,<br> &quot;to&quot;: &quot;usertask5&quot;,<br> &quot;value&quot;: &quot;'applyDelay'&quot;,<br> &quot;desc&quot;: &quot;申请延期&quot;,<br> &quot;handleRoute&quot;: &quot;/6c/defectManagement/delay&quot;,<br> &quot;hideComment&quot;: true<br> }<br>]</td></tr> <tr><td style="text-align:left;">14</td> <td>是否是会签</td> <td>默认是 Any 会签取值 All</td></tr> <tr><td style="text-align:left;">15</td> <td>变量名称</td> <td>表单提交变量值，提交时组成 JSON 提交</td></tr> <tr><td style="text-align:left;">16</td> <td>表单 key</td> <td>预留</td></tr> <tr><td style="text-align:left;">17</td> <td>权限 API</td> <td>获取业务数据中某个部门或者人员字段值，用于办理人</td></tr></tbody></table> <h5 id="_2-7-3-3-节点权限配置"><a href="#_2-7-3-3-节点权限配置" class="header-anchor">#</a> 2.7.3.3 节点权限配置</h5> <table><thead><tr><th>序号</th> <th>属性</th> <th>描述</th></tr></thead> <tbody><tr><td>1</td> <td>规则</td> <td>审核规则 具体人员/群组</td></tr> <tr><td>2</td> <td>变量</td> <td>支持审核部门或者人员来源业务数据。目前支持 dept.部门属性/user.人员属性/group.群组业务属性</td></tr> <tr><td>3</td> <td>群组</td> <td>来源与群组选择器中的群组，支持多选</td></tr> <tr><td>4</td> <td>人员类型</td> <td>人员类型 ，支持多窜</td></tr> <tr><td>5</td> <td>岗位</td> <td>岗位，支持多选</td></tr> <tr><td>6</td> <td>人员</td> <td>人员，支持多选</td></tr></tbody></table> <p>车间审核节点：取业务字段 deptId 的部门及上级部门人员分类为车间管理所有人的</p> <p><img src="/vuepress-demo/assets/img/image-20200403105257132.0fcff586.png" alt="image-20200403105257132"></p> <p>供电处电力科审：配置固定的人员审核</p> <p><img src="/vuepress-demo/assets/img/image-20200403105332477.079ddee3.png" alt="image-20200403105332477"></p> <p>工作领导人审核：配置业务工作票上面的执行人审核</p> <p><img src="/vuepress-demo/assets/img/image-20200403105839040.8a9f100f.png" alt="image-20200403105839040"></p> <p>调度审核：配置业务上面的调度台，群组</p> <p><img src="/vuepress-demo/assets/img/image-20200403105655251.e8d7ab5a.png" alt="image-20200403105655251">
缺陷审核：配置固定的部门，规则群组</p> <p><img src="/vuepress-demo/assets/img/image-20200403110208776.e03c4223.png" alt="image-20200403110208776"></p> <h3 id="_2-8-消息服务"><a href="#_2-8-消息服务" class="header-anchor">#</a> 2.8 消息服务</h3> <h4 id="_2-8-1-mq-三种消息模式"><a href="#_2-8-1-mq-三种消息模式" class="header-anchor">#</a> 2.8.1 MQ 三种消息模式</h4> <div class="language- line-numbers-mode"><pre class="language-text"><code>RabbitMQ有三种主要消息模式，包括Fanout、Direct、Topic模式。
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h5 id="fanout-模式"><a href="#fanout-模式" class="header-anchor">#</a> Fanout 模式</h5> <p><strong>Fanout 模式：即广播模式，生产者及消费者绑定相同的 Fanout 交换机，不需要路由键，多个消费者通过定义不同的队列来消费，以达到一个消息多个消费者目的。</strong></p> <p><strong>HR 人力资源人员调动消息配置定义</strong></p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Configuration</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RabbitConfiguration</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> DEFAULT_EXCHANGE <span class="token operator">=</span> <span class="token string">&quot;hr.transfer.fanout.exchange&quot;</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> TRANSFER_KEY <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>


    <span class="token keyword">static</span> <span class="token punctuation">{</span>
        <span class="token class-name">EventPublisherService</span><span class="token punctuation">.</span><span class="token function">registerType</span><span class="token punctuation">(</span><span class="token class-name">EventBusinessType</span><span class="token punctuation">.</span>HR_TRANSFER<span class="token punctuation">.</span><span class="token function">name</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> DEFAULT_EXCHANGE<span class="token punctuation">,</span> TRANSFER_KEY<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">EventPublisherService</span> <span class="token function">publisherService</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">EventPublisherService</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">FanoutExchange</span> <span class="token function">defaultExchange</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">FanoutExchange</span><span class="token punctuation">(</span>DEFAULT_EXCHANGE<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><p><strong>EventPublisherService 业务及交换机绑定方法</strong></p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">registerType</span><span class="token punctuation">(</span><span class="token class-name">String</span> businessType<span class="token punctuation">,</span> <span class="token class-name">String</span> exchange<span class="token punctuation">,</span> <span class="token class-name">String</span> routeKey<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Objects</span><span class="token punctuation">.</span><span class="token function">requireNonNull</span><span class="token punctuation">(</span>businessType<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Objects</span><span class="token punctuation">.</span><span class="token function">requireNonNull</span><span class="token punctuation">(</span>exchange<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Objects</span><span class="token punctuation">.</span><span class="token function">requireNonNull</span><span class="token punctuation">(</span>routeKey<span class="token punctuation">)</span><span class="token punctuation">;</span>
        REGISTRY<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>businessType<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">MessageRoute</span><span class="token punctuation">(</span>exchange<span class="token punctuation">,</span> routeKey<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p><strong>EventPublisherService 消息发送方法</strong></p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">publish</span><span class="token punctuation">(</span><span class="token class-name">Event</span> event<span class="token punctuation">,</span> <span class="token class-name">String</span> exchange<span class="token punctuation">,</span> <span class="token class-name">String</span> routeKey<span class="token punctuation">,</span> <span class="token class-name">CorrelationData</span> correlationData<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Objects</span><span class="token punctuation">.</span><span class="token function">requireNonNull</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Objects</span><span class="token punctuation">.</span><span class="token function">requireNonNull</span><span class="token punctuation">(</span>exchange<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Objects</span><span class="token punctuation">.</span><span class="token function">requireNonNull</span><span class="token punctuation">(</span>routeKey<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Objects</span><span class="token punctuation">.</span><span class="token function">requireNonNull</span><span class="token punctuation">(</span>correlationData<span class="token punctuation">)</span><span class="token punctuation">;</span>
        rabbitTemplate<span class="token punctuation">.</span><span class="token function">convertAndSend</span><span class="token punctuation">(</span>exchange<span class="token punctuation">,</span> routeKey<span class="token punctuation">,</span> event<span class="token punctuation">,</span> correlationData<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p><strong>HR 人员调动生产消息</strong></p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>   <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">EventPublisherService</span> eventPublisherService<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Transactional</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">save</span><span class="token punctuation">(</span><span class="token class-name">Transfer</span> entity<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">StringUtil</span><span class="token punctuation">.</span><span class="token function">isNotBlank</span><span class="token punctuation">(</span>entity<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span><span class="token string">&quot;调动记录不得编辑!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> userId <span class="token operator">=</span> entity<span class="token punctuation">.</span><span class="token function">getUserId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> transferDept <span class="token operator">=</span> entity<span class="token punctuation">.</span><span class="token function">getTransferDept</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Objects</span><span class="token punctuation">.</span><span class="token function">requireNonNull</span><span class="token punctuation">(</span>userId<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Objects</span><span class="token punctuation">.</span><span class="token function">requireNonNull</span><span class="token punctuation">(</span>transferDept<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Objects</span><span class="token punctuation">.</span><span class="token function">requireNonNull</span><span class="token punctuation">(</span>entity<span class="token punctuation">.</span><span class="token function">getTransferDate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        entity<span class="token punctuation">.</span><span class="token function">preInsert</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        dao<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>entity<span class="token punctuation">)</span><span class="token punctuation">;</span>
        userDao<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">SystemUser</span><span class="token punctuation">(</span>userId<span class="token punctuation">,</span> transferDept<span class="token punctuation">,</span> entity<span class="token punctuation">.</span><span class="token function">getTransferPosition</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> entity<span class="token punctuation">.</span><span class="token function">getTransferPersonalType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 更新证书</span>
        electricService<span class="token punctuation">.</span><span class="token function">updateNotNonByUserId</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">LicenceElectric</span><span class="token punctuation">(</span>userId<span class="token punctuation">,</span> transferDept<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        guardService<span class="token punctuation">.</span><span class="token function">updateNotNonByUserId</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">LicenceGuard</span><span class="token punctuation">(</span>userId<span class="token punctuation">,</span> transferDept<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 更新成绩</span>
        scoreService<span class="token punctuation">.</span><span class="token function">changeDept</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">LicenceElectricScore</span><span class="token punctuation">(</span>userId<span class="token punctuation">,</span> transferDept<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">TransferMessage</span> message<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">TransferMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">BeanUtils</span><span class="token punctuation">.</span><span class="token function">copyProperties</span><span class="token punctuation">(</span>entity<span class="token punctuation">,</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
        eventPublisherService<span class="token punctuation">.</span><span class="token function">publish</span><span class="token punctuation">(</span>message<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token class-name">EventBusinessType</span><span class="token punctuation">.</span>HR_TRANSFER<span class="token punctuation">.</span><span class="token function">name</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>entity<span class="token punctuation">.</span><span class="token function">getUserId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//TODO 发布调动信息</span>
        <span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><p><strong>COMP 派计工管理模块定义队列、交换机消费 HR 人员调动消息</strong></p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Configuration</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RabbitConfiguration</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> DEFAULT_EXCHANGE <span class="token operator">=</span> <span class="token string">&quot;hr.transfer.fanout.exchange&quot;</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> TRANSFER_QUEUE <span class="token operator">=</span> <span class="token string">&quot;comp.transfer.queue&quot;</span><span class="token punctuation">;</span>


    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">TransferEventHandler</span> <span class="token function">transferEventHandler</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">TransferEventHandler</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>


    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">EventSubscriberService</span> <span class="token function">subscriber</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">EventSubscriberService</span> subscriberService <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">EventSubscriberService</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        subscriberService<span class="token punctuation">.</span><span class="token function">registerEvent</span><span class="token punctuation">(</span><span class="token class-name">EventBusinessType</span><span class="token punctuation">.</span>HR_TRANSFER<span class="token punctuation">.</span><span class="token function">name</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">transferEventHandler</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> subscriberService<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">FanoutExchange</span> <span class="token function">defaultExchange</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">FanoutExchange</span><span class="token punctuation">(</span>DEFAULT_EXCHANGE<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">Queue</span> <span class="token function">transferQueue</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Queue</span><span class="token punctuation">(</span>TRANSFER_QUEUE<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">Binding</span> <span class="token function">transferBinding</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token class-name">BindingBuilder</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token function">transferQueue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">to</span><span class="token punctuation">(</span><span class="token function">defaultExchange</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br></div></div><p><strong>COMP 人员调动监听器，监听队列名称</strong></p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Component</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TransferEventListener</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">EventSubscriberService</span> subscriberService<span class="token punctuation">;</span>
    <span class="token annotation punctuation">@RabbitListener</span><span class="token punctuation">(</span>queues <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token class-name">RabbitConfiguration</span><span class="token punctuation">.</span>TRANSFER_QUEUE<span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">transfer</span><span class="token punctuation">(</span><span class="token class-name">Event</span> event<span class="token punctuation">)</span><span class="token punctuation">{</span>
        subscriberService<span class="token punctuation">.</span><span class="token function">persistAndHandleMessage</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TransferEventHandler</span> <span class="token keyword">extends</span> <span class="token class-name">EventHandler</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">ScheduleUserService</span> scheduleUserService<span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token class-name">Logger</span> logger <span class="token operator">=</span> <span class="token class-name">LoggerFactory</span><span class="token punctuation">.</span><span class="token function">getLogger</span><span class="token punctuation">(</span><span class="token class-name">TransferEventHandler</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">handle</span><span class="token punctuation">(</span><span class="token class-name">EventSubscriber</span> subscriber<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">TransferMessage</span> message <span class="token operator">=</span> <span class="token class-name">Jacksons</span><span class="token punctuation">.</span><span class="token function">jsonToPojo</span><span class="token punctuation">(</span>subscriber<span class="token punctuation">.</span><span class="token function">getPayload</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">TransferMessage</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        scheduleUserService<span class="token punctuation">.</span><span class="token function">updateTransferEvent</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ScheduleUser</span><span class="token punctuation">(</span>message<span class="token punctuation">.</span><span class="token function">getUserId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> message<span class="token punctuation">.</span><span class="token function">getDeptId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> message<span class="token punctuation">.</span><span class="token function">getTransferDate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> message<span class="token punctuation">.</span><span class="token function">getTransferDept</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><p><strong>EventSubsriberService 消息业务类型及消费事件绑定</strong></p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>
    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">ConcurrentMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">EventHandler</span><span class="token punctuation">&gt;</span></span> eventHandlerConcurrentHashMap <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ConcurrentHashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">registerEvent</span><span class="token punctuation">(</span><span class="token class-name">String</span> businessType<span class="token punctuation">,</span> <span class="token class-name">EventHandler</span> handler<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        eventHandlerConcurrentHashMap<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>businessType<span class="token punctuation">,</span> handler<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p><strong>EventSubsriberService 消息消费及回调业务</strong></p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>  <span class="token annotation punctuation">@Transactional</span><span class="token punctuation">(</span>rollbackFor <span class="token operator">=</span> <span class="token class-name">Exception</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">persistAndHandleMessage</span><span class="token punctuation">(</span><span class="token class-name">String</span> serviceId<span class="token punctuation">,</span> <span class="token class-name">Event</span> event<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Objects</span><span class="token punctuation">.</span><span class="token function">requireNonNull</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Objects</span><span class="token punctuation">.</span><span class="token function">requireNonNull</span><span class="token punctuation">(</span>serviceId<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">throwIfNotIncluded</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span><span class="token function">getBusinessType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        logger<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">&quot;rec rabbitmq-----------&gt; serviceId:{}  msg: {}&quot;</span><span class="token punctuation">,</span>serviceId<span class="token punctuation">,</span>event<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> influence <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token keyword">final</span> <span class="token class-name">EventSubscriber</span> subscriber <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">EventSubscriber</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        subscriber<span class="token punctuation">.</span><span class="token function">setId</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        subscriber<span class="token punctuation">.</span><span class="token function">setBusinessType</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span><span class="token function">getBusinessType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        subscriber<span class="token punctuation">.</span><span class="token function">setPayload</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span><span class="token function">getPayload</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        subscriber<span class="token punctuation">.</span><span class="token function">setGuid</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span><span class="token function">getGuid</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        subscriber<span class="token punctuation">.</span><span class="token function">setLockVersion</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        subscriber<span class="token punctuation">.</span><span class="token function">setEventStatus</span><span class="token punctuation">(</span><span class="token class-name">EventStatus</span><span class="token punctuation">.</span>NEW<span class="token punctuation">)</span><span class="token punctuation">;</span>
        subscriber<span class="token punctuation">.</span><span class="token function">setCreateTime</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span><span class="token function">getCreateTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        subscriber<span class="token punctuation">.</span><span class="token function">setRecTime</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        subscriber<span class="token punctuation">.</span><span class="token function">setServiceId</span><span class="token punctuation">(</span>serviceId<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">HibernateValidators</span><span class="token punctuation">.</span><span class="token function">throwsIfInvalid</span><span class="token punctuation">(</span>subscriber<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            influence <span class="token operator">=</span> subscriberMapper<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>subscriber<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">DuplicateKeyException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            logger<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">&quot;duplicate key in processing message serviceId:{} msgId:{} guid:{}&quot;</span><span class="token punctuation">,</span> serviceId<span class="token punctuation">,</span> event<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> event<span class="token punctuation">.</span><span class="token function">getGuid</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>influence <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            eventHandlerConcurrentHashMap<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span><span class="token function">getBusinessType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">handle</span><span class="token punctuation">(</span>subscriber<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//todo update</span>
            subscriberMapper<span class="token punctuation">.</span><span class="token function">updateEventStatus</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">EventSubscriber</span><span class="token punctuation">(</span>serviceId<span class="token punctuation">,</span>subscriber<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token class-name">EventStatus</span><span class="token punctuation">.</span>DONE<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> influence<span class="token punctuation">;</span>

    <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br></div></div><h5 id="direct-模式"><a href="#direct-模式" class="header-anchor">#</a> Direct 模式</h5> <p><strong>直连模式，生产者和消费者通过相同的 Direct Exchange、RouteKey、Queue 投递及消费消息，单一消费模式，一条消息只能被一个消费者消费。</strong></p> <p><strong>HR 人员调动生产者消息配置。</strong></p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Configuration</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RabbitConfiguration</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> DEFAULT_DIRECT_EXCHANGE <span class="token operator">=</span> <span class="token string">&quot;hr.direct.exchange&quot;</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> TRANSFER_QUEUE <span class="token operator">=</span> <span class="token string">&quot;hr.transfer.queue&quot;</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> DEAD_TRANSFER_QUEUE <span class="token operator">=</span> <span class="token string">&quot;d.hr.transfer.queue&quot;</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> TRANSFER_KEY <span class="token operator">=</span> <span class="token string">&quot;hr.transfer.route&quot;</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> DEAD_TRANSFER_KEY <span class="token operator">=</span> <span class="token string">&quot;d.hr.transfer.route&quot;</span><span class="token punctuation">;</span>


    <span class="token keyword">static</span> <span class="token punctuation">{</span>
        <span class="token class-name">EventPublisherService</span><span class="token punctuation">.</span><span class="token function">registerType</span><span class="token punctuation">(</span><span class="token class-name">EventBusinessType</span><span class="token punctuation">.</span>HR_TRANSFER<span class="token punctuation">.</span><span class="token function">name</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> DEFAULT_DIRECT_EXCHANGE<span class="token punctuation">,</span> TRANSFER_KEY<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">EventPublisherService</span> <span class="token function">publisherService</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">EventPublisherService</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">DirectExchange</span> <span class="token function">defaultExchange</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">DirectExchange</span><span class="token punctuation">(</span>DEFAULT_DIRECT_EXCHANGE<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">Queue</span> <span class="token function">transferQueue</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">final</span> <span class="token class-name">ImmutableMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> args <span class="token operator">=</span>
                <span class="token class-name">ImmutableMap</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token string">&quot;x-dead-letter-exchange&quot;</span><span class="token punctuation">,</span> DEFAULT_DIRECT_EXCHANGE<span class="token punctuation">,</span>
                        <span class="token string">&quot;x-dead-letter-routing-key&quot;</span><span class="token punctuation">,</span> DEAD_TRANSFER_KEY<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Queue</span><span class="token punctuation">(</span>TRANSFER_QUEUE<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">Binding</span> <span class="token function">transferBinding</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token class-name">BindingBuilder</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token function">transferQueue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">to</span><span class="token punctuation">(</span><span class="token function">defaultExchange</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">with</span><span class="token punctuation">(</span>TRANSFER_KEY<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">Queue</span> <span class="token function">deadTransferQueue</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Queue</span><span class="token punctuation">(</span>DEAD_TRANSFER_QUEUE<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">Binding</span> <span class="token function">deadPointBinding</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token class-name">BindingBuilder</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token function">deadTransferQueue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">to</span><span class="token punctuation">(</span><span class="token function">defaultExchange</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">with</span><span class="token punctuation">(</span>DEAD_TRANSFER_KEY<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br></div></div><p><strong>HR 生产者消息发送 Fanout</strong></p> <p><strong>Comp 消费 HR 人员调动消息消费者配置，同生产者一致</strong></p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Configuration</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RabbitConfiguration</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> DEFAULT_DIRECT_EXCHANGE <span class="token operator">=</span> <span class="token string">&quot;hr.direct.exchange&quot;</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> TRANSFER_QUEUE <span class="token operator">=</span> <span class="token string">&quot;hr.transfer.queue&quot;</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> DEAD_TRANSFER_QUEUE <span class="token operator">=</span> <span class="token string">&quot;d.hr.transfer.queue&quot;</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> TRANSFER_KEY <span class="token operator">=</span> <span class="token string">&quot;hr.transfer.route&quot;</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> DEAD_TRANSFER_KEY <span class="token operator">=</span> <span class="token string">&quot;d.hr.transfer.route&quot;</span><span class="token punctuation">;</span>


    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">TransferEventHandler</span> <span class="token function">transferEventHandler</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">TransferEventHandler</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>


    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">EventSubscriberService</span> <span class="token function">subscriber</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">EventSubscriberService</span> subscriberService <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">EventSubscriberService</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        subscriberService<span class="token punctuation">.</span><span class="token function">registerEvent</span><span class="token punctuation">(</span><span class="token class-name">EventBusinessType</span><span class="token punctuation">.</span>HR_TRANSFER<span class="token punctuation">.</span><span class="token function">name</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">transferEventHandler</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> subscriberService<span class="token punctuation">;</span>

    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">DirectExchange</span> <span class="token function">defaultExchange</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">DirectExchange</span><span class="token punctuation">(</span>DEFAULT_DIRECT_EXCHANGE<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">Queue</span> <span class="token function">transferQueue</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">final</span> <span class="token class-name">ImmutableMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> args <span class="token operator">=</span>
                <span class="token class-name">ImmutableMap</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token string">&quot;x-dead-letter-exchange&quot;</span><span class="token punctuation">,</span> DEFAULT_DIRECT_EXCHANGE<span class="token punctuation">,</span>
                        <span class="token string">&quot;x-dead-letter-routing-key&quot;</span><span class="token punctuation">,</span> DEAD_TRANSFER_KEY<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Queue</span><span class="token punctuation">(</span>TRANSFER_QUEUE<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">Binding</span> <span class="token function">transferBinding</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token class-name">BindingBuilder</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token function">transferQueue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">to</span><span class="token punctuation">(</span><span class="token function">defaultExchange</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">with</span><span class="token punctuation">(</span>TRANSFER_KEY<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">Queue</span> <span class="token function">deadTransferQueue</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Queue</span><span class="token punctuation">(</span>DEAD_TRANSFER_QUEUE<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">Binding</span> <span class="token function">deadPointBinding</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token class-name">BindingBuilder</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token function">deadTransferQueue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">to</span><span class="token punctuation">(</span><span class="token function">defaultExchange</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">with</span><span class="token punctuation">(</span>DEAD_TRANSFER_KEY<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br></div></div><p><strong>消息监听及事件处理同 Fanout</strong></p> <h5 id="topic-模式"><a href="#topic-模式" class="header-anchor">#</a> Topic 模式</h5> <p><strong>主题模式，类似 Direct 模式，生产者通过 TopicExchange、RouteKey 投递消息，消费者通过 TopicExchange、模糊匹配 RouteKey、绑定 Queue 消费消息。支持多个消费者消费相同消息。</strong></p> <p><strong>人员调动生产者消息配置</strong></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>@Configuration
public class RabbitConfiguration {

    public static final String DEFAULT_EXCHANGE = &quot;hr.topic.exchange&quot;;
    public static final String TRANSFER_KEY = &quot;hr.transfer.route&quot;;


    static {
        EventPublisherService.registerType(EventBusinessType.HR_TRANSFER.name(), DEFAULT_EXCHANGE, TRANSFER_KEY);
    }

    @Bean
    public EventPublisherService publisherService() {
        return new EventPublisherService();
    }

    @Bean
    public TopicExchange defaultExchange() {
        return new TopicExchange(DEFAULT_EXCHANGE);
    }

}

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><p><strong>消费者消费人员调动及 HR 所有的消息配置</strong></p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Configuration</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RabbitConfiguration</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> DEFAULT_EXCHANGE <span class="token operator">=</span> <span class="token string">&quot;hr.topic.exchange&quot;</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> TRANSFER_QUEUE <span class="token operator">=</span> <span class="token string">&quot;transfer.queue&quot;</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> TRANSFER_KEY<span class="token operator">=</span><span class="token string">&quot;hr.transfer.*&quot;</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> HR_QUEUE <span class="token operator">=</span> <span class="token string">&quot;hr.queue&quot;</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> HR_KEY<span class="token operator">=</span><span class="token string">&quot;hr.#&quot;</span><span class="token punctuation">;</span>




    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">TopicExchange</span> <span class="token function">defaultExchange</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">TopicExchange</span><span class="token punctuation">(</span>DEFAULT_EXCHANGE<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">Queue</span> <span class="token function">transferQueue</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Queue</span><span class="token punctuation">(</span>TRANSFER_QUEUE<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">Queue</span> <span class="token function">hrQueue</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Queue</span><span class="token punctuation">(</span>HR_QUEUE<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">Binding</span> <span class="token function">transferBinding</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token class-name">BindingBuilder</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token function">transferQueue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">to</span><span class="token punctuation">(</span><span class="token function">defaultExchange</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">with</span><span class="token punctuation">(</span>TRANSFER_KEY<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">Binding</span> <span class="token function">hrBinding</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token class-name">BindingBuilder</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token function">hrQueue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">to</span><span class="token punctuation">(</span><span class="token function">defaultExchange</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">with</span><span class="token punctuation">(</span>HR_QUEUE<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br></div></div><h4 id="_2-8-2-api"><a href="#_2-8-2-api" class="header-anchor">#</a> 2.8.2 API</h4> <p><strong>消息服务模块 togest-rabbitmq 模块下，包括事件发布、事件订阅两个接口类</strong></p> <h5 id="事件发布-eventpublisherservice"><a href="#事件发布-eventpublisherservice" class="header-anchor">#</a> 事件发布(EventPublisherService)</h5> <p><strong>1) 注册函数，实现功能：业务类型及交换机、路由绑定，对于 Fanout 模式，路由参数可空</strong></p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">registerType</span><span class="token punctuation">(</span><span class="token class-name">String</span> businessType<span class="token punctuation">,</span> <span class="token class-name">String</span> exchange<span class="token punctuation">,</span> <span class="token class-name">String</span> routeKey<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><strong>2) 消息发布，payload:业务数据 json 格式，guid:业务数据主键</strong></p> <div class="language-java line-numbers-mode"><pre class="language-java"><code> <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">publish</span><span class="token punctuation">(</span><span class="token class-name">String</span> payload<span class="token punctuation">,</span> <span class="token class-name">String</span> businessType<span class="token punctuation">,</span><span class="token class-name">String</span> guid<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h5 id="事件订阅-eventsubscriberservice"><a href="#事件订阅-eventsubscriberservice" class="header-anchor">#</a> 事件订阅(EventSubscriberService)</h5> <p><strong>1) 注册函数，实现功能：业务类型和消息处理事件绑定</strong></p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>   <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">registerEvent</span><span class="token punctuation">(</span><span class="token class-name">String</span> businessType<span class="token punctuation">,</span> <span class="token class-name">EventHandler</span> handler<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><strong>2) 消息处理函数。实现功能接收到的消息保存到数据表中防止重复接收消息及将消息输入到消息事件处理类中</strong></p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">persistAndHandleMessage</span><span class="token punctuation">(</span><span class="token class-name">Event</span> event<span class="token punctuation">)</span>```
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="_2-9-痕迹分析"><a href="#_2-9-痕迹分析" class="header-anchor">#</a> 2.9 痕迹分析</h3> <p>平台审计框架，用于数据提交分析。分析的涵盖属性包括：</p> <p>1)IP</p> <p>2)用户</p> <ol start="3"><li>请求时间</li></ol> <p>4）响应时间</p> <p>5）后台响应时间</p> <p>6）请求方法：PUT/GET/POST/DELETE</p> <ol start="7"><li><p>模块 URL</p></li> <li><p>二级模块 URL</p></li> <li><p>数据 API</p></li> <li><p>提交请求内容</p></li></ol> <p>11）响应内容</p> <p>13）后台执行 SQL 记录</p> <p>14）上传附件</p> <p>15）上传附件名称</p> <p>16）异常</p> <p>17）功能名称</p> <p>18）agent</p> <p>框架采用切面、 SQL 拦截器、线程池异步保存痕迹信息，附件存储在 MYSQL 中设计思想开发。审计框架包括 client、server 两个模块。</p> <h4 id="_2-9-1-数据表"><a href="#_2-9-1-数据表" class="header-anchor">#</a> 2.9.1 数据表</h4> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> <span class="token punctuation">`</span>sys_mark<span class="token punctuation">`</span> <span class="token punctuation">(</span>
  <span class="token punctuation">`</span>id<span class="token punctuation">`</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>ip<span class="token punctuation">`</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'用户IP'</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>user_id<span class="token punctuation">`</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'用户ID'</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>request_time<span class="token punctuation">`</span> <span class="token keyword">datetime</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'请求时间'</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>agent<span class="token punctuation">`</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'代理PC/APP'</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>method<span class="token punctuation">`</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'请求方法'</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>api_desc<span class="token punctuation">`</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'API描述'</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>module_url<span class="token punctuation">`</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'模块路由'</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>function_url<span class="token punctuation">`</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>url<span class="token punctuation">`</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'api路由'</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>request_content<span class="token punctuation">`</span> <span class="token keyword">text</span> <span class="token keyword">COMMENT</span> <span class="token string">'请求内容'</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>upload_file_name<span class="token punctuation">`</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'上传附件名称'</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>upload_file_content<span class="token punctuation">`</span> <span class="token keyword">longblob</span> <span class="token keyword">COMMENT</span> <span class="token string">'上传附件内容'</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>response_content<span class="token punctuation">`</span> <span class="token keyword">text</span> <span class="token keyword">COMMENT</span> <span class="token string">'响应内容'</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>response_time<span class="token punctuation">`</span> <span class="token keyword">datetime</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'响应时间'</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>persist_time<span class="token punctuation">`</span> <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">DEFAULT</span> <span class="token string">'0'</span> <span class="token keyword">COMMENT</span> <span class="token string">'持续时间毫秒'</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>exception<span class="token punctuation">`</span> <span class="token keyword">text</span> <span class="token keyword">COMMENT</span> <span class="token string">'异常'</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>sql_log<span class="token punctuation">`</span> <span class="token keyword">text</span> <span class="token keyword">COMMENT</span> <span class="token string">'SQL日志'</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>sort<span class="token punctuation">`</span> <span class="token keyword">bigint</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">AUTO_INCREMENT</span><span class="token punctuation">,</span>
  <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span><span class="token punctuation">`</span>id<span class="token punctuation">`</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token keyword">KEY</span> <span class="token punctuation">`</span>sort<span class="token punctuation">`</span> <span class="token punctuation">(</span><span class="token punctuation">`</span>sort<span class="token punctuation">`</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token keyword">KEY</span> <span class="token punctuation">`</span>idx_query<span class="token punctuation">`</span> <span class="token punctuation">(</span><span class="token punctuation">`</span>module_url<span class="token punctuation">`</span><span class="token punctuation">,</span><span class="token punctuation">`</span>function_url<span class="token punctuation">`</span><span class="token punctuation">,</span><span class="token punctuation">`</span>sort<span class="token punctuation">`</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span> <span class="token keyword">ENGINE</span><span class="token operator">=</span>MyISAM <span class="token keyword">AUTO_INCREMENT</span><span class="token operator">=</span><span class="token number">14</span> <span class="token keyword">DEFAULT</span> <span class="token keyword">CHARSET</span><span class="token operator">=</span>utf8
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><h4 id="_2-9-2-注解"><a href="#_2-9-2-注解" class="header-anchor">#</a> 2.9.2 注解</h4> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Retention</span><span class="token punctuation">(</span><span class="token class-name">RetentionPolicy</span><span class="token punctuation">.</span>RUNTIME<span class="token punctuation">)</span>
<span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token class-name">ElementType</span><span class="token punctuation">.</span>METHOD<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">MarkAnnotation</span> <span class="token punctuation">{</span>
    <span class="token comment">/**
     * 模块中的小模块
     * @return
     */</span>
    <span class="token class-name">String</span> <span class="token function">functionUrl</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>functionUrl:二级模块，比如/C1/defect。默认可以空。空则用 API 的前两级填充。比如/C1/defect/imports 则 functionUrl=/C1/defect</p> <h4 id="_2-9-3-配置"><a href="#_2-9-3-配置" class="header-anchor">#</a> 2.9.3 配置</h4> <table><thead><tr><th>属性名</th> <th>功能</th></tr></thead> <tbody><tr><td>com.togest.mark.enabled</td> <td>切面是否启用，默认 true,启用</td></tr> <tr><td>com.togest.mark.sqlMaxLength</td> <td>保留 SQL 长度，单位字节，默认 16M</td></tr> <tr><td>com.togest.mark.threadPool</td> <td>线程池配置</td></tr> <tr><td>com.togest.mark.threadPool.corePoolSize</td> <td></td></tr> <tr><td>com.togest.mark.threadPool.maxPoolSize</td> <td></td></tr> <tr><td>com.togest.mark.threadPool.queueCapacity</td> <td></td></tr> <tr><td>com.togest.mark.threadPool.keepAliveSeconds</td> <td></td></tr></tbody></table> <h4 id="_2-9-4-restful-api"><a href="#_2-9-4-restful-api" class="header-anchor">#</a> 2.9.4 restful api</h4> <p><strong>1.mark/getDetail</strong></p> <p><strong>功能：</strong> 获取审计详细信息</p> <p><strong>方法：</strong> GET</p> <p>**输入：**id</p> <p><strong>输出：</strong></p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;data&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;agent&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;apiDesc&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;exception&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;functionUrl&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;ip&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;method&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;moduleUrl&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;persistTime&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token property">&quot;requestContent&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;requestTime&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2020-04-07T04:49:26.884Z&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;requestTimeEnd&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2020-04-07T04:49:26.884Z&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;requestTimeStart&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2020-04-07T04:49:26.884Z&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;responseContent&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;responseTime&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2020-04-07T04:49:26.885Z&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;responseTimeEnd&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2020-04-07T04:49:26.885Z&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;responseTimeStart&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2020-04-07T04:49:26.885Z&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;sqlLog&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;status&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;statusName&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;uploadFileName&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;url&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;userId&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;userName&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;errorCode&quot;</span><span class="token operator">:</span> <span class="token number">10000</span><span class="token punctuation">,</span>
  <span class="token property">&quot;msg&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br></div></div><p><strong>2./mark/{resourcesCode}/getMarkByFunction</strong></p> <p><strong>功能：</strong> 获取审计分页信息，按照 sort 倒序排</p> <p><strong>方法：</strong> GET</p> <p>**输入：**resourcesCode、moduleUrl、functionUrl、pageSize、pageNo</p> <p><strong>输出：</strong></p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;data&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;autoCount&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token property">&quot;hasNext&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token property">&quot;hasPre&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token property">&quot;nextPage&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token property">&quot;orderBy&quot;</span><span class="token operator">:</span> <span class="token string">&quot;CREATE_TIME DESC&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;orderBySetted&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token property">&quot;pageNo&quot;</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
    <span class="token property">&quot;pageSize&quot;</span><span class="token operator">:</span> <span class="token number">30</span><span class="token punctuation">,</span>
    <span class="token property">&quot;prePage&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token property">&quot;rows&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token property">&quot;agent&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;apiDesc&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;exception&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;functionUrl&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;ip&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;method&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;moduleUrl&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;persistTime&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
        <span class="token property">&quot;requestContent&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;requestTime&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2020-04-07T04:49:26.896Z&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;requestTimeEnd&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2020-04-07T04:49:26.896Z&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;requestTimeStart&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2020-04-07T04:49:26.896Z&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;responseContent&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;responseTime&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2020-04-07T04:49:26.896Z&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;responseTimeEnd&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2020-04-07T04:49:26.896Z&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;responseTimeStart&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2020-04-07T04:49:26.896Z&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;sqlLog&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;status&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;statusName&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;uploadFileName&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;url&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;userId&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;userName&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token property">&quot;total&quot;</span><span class="token operator">:</span> <span class="token number">81</span><span class="token punctuation">,</span>
    <span class="token property">&quot;totoalPage&quot;</span><span class="token operator">:</span> <span class="token number">3</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;errorCode&quot;</span><span class="token operator">:</span> <span class="token number">10000</span><span class="token punctuation">,</span>
  <span class="token property">&quot;msg&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br></div></div><p><strong>3.mark/getUploadFile</strong></p> <p><strong>功能：</strong> 下载附件</p> <p><strong>方法：</strong> GET</p> <p>**输入：**id</p> <p>**输出：**ResponseEntity</p> <p><strong>4.mark/{resourcesCode}/getEnclosureDetail</strong></p> <p><strong>功能：</strong> 获取元数据封装审计详情</p> <p><strong>方法：</strong> GET</p> <p>**输入：**id、resourcesCode</p> <p><strong>输出：</strong></p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;data&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;errorCode&quot;</span><span class="token operator">:</span> <span class="token number">10000</span><span class="token punctuation">,</span>
  <span class="token property">&quot;msg&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h4 id="_2-9-5-框架使用"><a href="#_2-9-5-框架使用" class="header-anchor">#</a> 2.9.5 框架使用</h4> <p><strong>依赖</strong></p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code>		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.togest<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>togest-mark-server<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>0.0.1-SNAPSHOT<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><strong>配置</strong></p> <div class="language-properties line-numbers-mode"><pre class="language-properties"><code><span class="token attr-name">com</span><span class="token punctuation">:</span>
<span class="token attr-name">  togest</span><span class="token punctuation">:</span>
<span class="token attr-name">    mark</span><span class="token punctuation">:</span>
<span class="token attr-name">      markEnabled</span><span class="token punctuation">:</span> <span class="token attr-value">true</span>
<span class="token attr-name">      sqlMaxLength</span><span class="token punctuation">:</span> <span class="token attr-value">20971520</span>
<span class="token attr-name">      threadPool</span><span class="token punctuation">:</span>
<span class="token attr-name">        core-pool-size</span><span class="token punctuation">:</span> <span class="token attr-value">8</span>
<span class="token attr-name">        max-pool-size</span><span class="token punctuation">:</span> <span class="token attr-value">12</span>
<span class="token attr-name">        queue-capacity</span><span class="token punctuation">:</span> <span class="token attr-value">500</span>
<span class="token attr-name">        keep-alive-seconds</span><span class="token punctuation">:</span> <span class="token attr-value">300</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p><strong>业务</strong></p> <p>业务中需要结合 Swagger 的 ApiOperation 注解实现 API 的描述。MarkAnnotation 的解释看上章节</p> <p><img src="/vuepress-demo/assets/img/image-20200407131741091.108e42a0.png" alt="image-20200407131741091"></p> <h3 id="_2-10-代码生成器"><a href="#_2-10-代码生成器" class="header-anchor">#</a> 2.10 代码生成器</h3> <p>为了提高后端工程师的开发效率，我们开发了 togest-cms-generator 模块，它目前是作为一个独立的微服务运行。利用这个服务，我们可以完成控制器、业务逻辑、dao、xml 的代码生成。生成完之后，针对业务做些修改定制开发即何。</p> <p>**功能描述：**生成代码，返回 ZIP 压缩包</p> <div class="language-Java line-numbers-mode"><pre class="language-java"><code>  <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token string">&quot;/generator&quot;</span><span class="token punctuation">,</span>method<span class="token operator">=</span><span class="token class-name">RequestMethod</span><span class="token punctuation">.</span>GET<span class="token punctuation">)</span><span class="token annotation punctuation">@ApiOperation</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;生成代码&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">code</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">,</span><span class="token class-name">GeneratorRequest</span> entity<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>**输入：**GeneratorRequest</p> <table><thead><tr><th>属性</th> <th>类型</th> <th>描述</th></tr></thead> <tbody><tr><td>tableName</td> <td>String</td> <td>表名</td></tr> <tr><td>tablePrefix</td> <td>String</td> <td>代码生成去除模块名称</td></tr> <tr><td>packageName</td> <td>String</td> <td>包名</td></tr> <tr><td>tag</td> <td>String</td> <td>树形应用/典型。1：树形 其它值：典型</td></tr></tbody></table> <p>**输出：**ZIP 文件，可直接拷贝到项目中</p> <h3 id="_2-11-常用工具"><a href="#_2-11-常用工具" class="header-anchor">#</a> 2.11 常用工具</h3> <p>常用工具 togest-common 模块 util 包图如下，分别包括 JSON、文件、String、Word、XLS、日期、反射、集合、条形码、二维码常用的一些操作类。</p> <p>util 定义了反射、日期、条形码、二维码、集合工具。其中 ListUtils、MapUtils、SetUtils 这些类可以使用</p> <p><strong>com.google.common.collect</strong>包中集合替代使用。</p> <p>json 包定义了 JSON、实体间的转换。</p> <p>file 包中定义文件拷贝、图片、ZIP、流、FTL 处理工具。</p> <p>function 包定义了链式空处理、空值校验、集合的处理工具。</p> <p>string 包定义了字符串的常用的一些处理方法。</p> <p>xls 包定义了导入、导出的方法。</p> <p>word 包定义了基于书签方式的详情替换、表格方式创建、详情替换+表格方式创</p> <p><img src="/vuepress-demo/assets/img/image-20200413174753577.df34a4ec.png" alt="image-20200413174753577"></p> <h4 id="_2-11-1-校验"><a href="#_2-11-1-校验" class="header-anchor">#</a> 2.11.1 校验</h4> <p><code>com.togest.common.util.function.Check.java</code></p> <p><strong>带有 <code>check</code> 前缀的方法 设计思想接近{@link java.util.Objects} ，为空时会上抛异常，应当用于快速失败。</strong></p> <p><code>checkNotNull()</code> 前三个重载方法见参数列表可知，依次用来给 Collection、Map、String 类型对象进行判空。对于集合，会检查 size；对于字符串，会检查空串。</p> <p>最后一个重载方法接受可变长参数，判空逻辑即通过 <code>instanceof</code> 与上面三种类型进行匹配，命中则调用对应方法。均不匹配时调用 <code>Objects.requireNonNull()</code> 。</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">void</span> <span class="token function">checkNotNull</span><span class="token punctuation">(</span><span class="token class-name">Collection</span> collection<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">void</span> <span class="token function">checkNotNull</span><span class="token punctuation">(</span><span class="token class-name">Map</span> map<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">void</span> <span class="token function">checkNotNull</span><span class="token punctuation">(</span><span class="token class-name">String</span> str<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">void</span> <span class="token function">checkNotNull</span><span class="token punctuation">(</span><span class="token class-name">Object</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> params<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><strong><code>isEmpty()/isNotEmpty()</code> 方法用来判断对象是否为空，返回 boolean 。类似的，均为三个重载方法。</strong></p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">boolean</span> <span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token class-name">Collection</span> collection<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">boolean</span> <span class="token function">isNotEmpty</span><span class="token punctuation">(</span><span class="token class-name">Collection</span> collection<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><strong><code>isNumber(Class&lt;?&gt; type)</code> 方法用来判断是否为数值类型，根据判断结果返回 boolean。所有的 <code>Number</code> 子类、Primitive 数值类型，以及其对应的 Wrapper 类型。</strong></p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">boolean</span> <span class="token function">isNumber</span><span class="token punctuation">(</span><span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> type<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="_2-11-2-日期"><a href="#_2-11-2-日期" class="header-anchor">#</a> 2.11.2 日期</h4> <p>com.togest.common.util.LocalDateUtils.java`</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// 获得 yyyy-MM-dd 格式的 String</span>
<span class="token class-name">String</span> <span class="token function">getDateStr</span><span class="token punctuation">(</span><span class="token class-name">Date</span> date<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 通过给定参数获得 Date</span>
<span class="token class-name">Date</span> <span class="token function">getDate</span><span class="token punctuation">(</span><span class="token class-name">String</span> dateStr<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// yyyy-MM-dd 格式</span>
<span class="token class-name">Date</span> <span class="token function">getDate</span><span class="token punctuation">(</span><span class="token keyword">int</span> year<span class="token punctuation">,</span> <span class="token keyword">int</span> month<span class="token punctuation">,</span> <span class="token keyword">int</span> day<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Date</span> <span class="token function">getDate</span><span class="token punctuation">(</span><span class="token keyword">int</span> year<span class="token punctuation">,</span> <span class="token keyword">int</span> month<span class="token punctuation">,</span> <span class="token keyword">int</span> dayOfMonth<span class="token punctuation">,</span> <span class="token keyword">int</span> hour<span class="token punctuation">,</span> <span class="token keyword">int</span> minute<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Date</span> <span class="token function">getDate</span><span class="token punctuation">(</span><span class="token keyword">int</span> year<span class="token punctuation">,</span> <span class="token keyword">int</span> month<span class="token punctuation">,</span> <span class="token keyword">int</span> dayOfMonth<span class="token punctuation">,</span> <span class="token keyword">int</span> hour<span class="token punctuation">,</span> <span class="token keyword">int</span> minute<span class="token punctuation">,</span> <span class="token keyword">int</span> second<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 日期间隔天数</span>
<span class="token keyword">long</span> <span class="token function">daysBetween</span><span class="token punctuation">(</span><span class="token class-name">Date</span> begin<span class="token punctuation">,</span> <span class="token class-name">Date</span> end<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 当前年份</span>
<span class="token keyword">int</span> <span class="token function">getYear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 当前月份</span>
<span class="token keyword">int</span> <span class="token function">getMonth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 本年第一天</span>
<span class="token class-name">Date</span> <span class="token function">firstOfYear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 本年最后一天</span>
<span class="token class-name">Date</span> <span class="token function">lastOfYear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 本月第一天</span>
<span class="token class-name">Date</span> <span class="token function">firstOfMonth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 本月天数</span>
<span class="token keyword">int</span> <span class="token function">lengthOfMonth</span><span class="token punctuation">(</span><span class="token class-name">Date</span> date<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 日期所处年月</span>
<span class="token keyword">int</span> <span class="token function">lengthOfMonth</span><span class="token punctuation">(</span><span class="token keyword">int</span> year<span class="token punctuation">,</span> <span class="token keyword">int</span> month<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> <span class="token function">lengthOfMonth</span><span class="token punctuation">(</span><span class="token class-name">String</span> yearMonth<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// yyyy-MM 的 String 年月表示</span>
<span class="token comment">// 本月第几天</span>
<span class="token keyword">int</span> <span class="token function">getDay</span><span class="token punctuation">(</span><span class="token class-name">Date</span> date<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 日期拆分</span>
<span class="token comment">// 数组中依次为 年、月、日、时、分 的 &quot;%02d&quot; 表示</span>
<span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">splitDate</span><span class="token punctuation">(</span><span class="token class-name">Date</span> date<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 自行指定 format 用于拆分后的 String 格式化规则</span>
<span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">splitDate</span><span class="token punctuation">(</span><span class="token class-name">Date</span> date<span class="token punctuation">,</span> <span class="token class-name">String</span> format<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 获得一个月的日期字符串表示 格式为 yyyy-MM-dd</span>
<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> <span class="token function">getMonthDateStr</span><span class="token punctuation">(</span><span class="token class-name">Date</span> date<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 给日期增加指定的天数 减少传负数即可</span>
<span class="token class-name">Date</span> <span class="token function">plusDays</span><span class="token punctuation">(</span><span class="token class-name">Date</span> date<span class="token punctuation">,</span> <span class="token keyword">long</span> daysToAdd<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 给日期增加指定的 年 月 周 日数  减少传负数即可</span>
<span class="token class-name">Date</span> <span class="token function">plus</span><span class="token punctuation">(</span><span class="token class-name">Date</span> date<span class="token punctuation">,</span> <span class="token keyword">long</span> yearsToAdd<span class="token punctuation">,</span> <span class="token keyword">long</span> monthsToAdd<span class="token punctuation">,</span> <span class="token keyword">long</span> weeksToAdd<span class="token punctuation">,</span> <span class="token keyword">long</span> daysToAdd<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 判断一个日期是否处于当前月</span>
<span class="token keyword">boolean</span> <span class="token function">isDateInCurrMonth</span><span class="token punctuation">(</span><span class="token class-name">Date</span> date<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br></div></div><h4 id="_2-11-3-集合处理"><a href="#_2-11-3-集合处理" class="header-anchor">#</a> 2.11.3 集合处理</h4> <p><code>com.togest.common.util.function.FunctionUtil.java</code></p> <p>此工具类基于以下类和方法进行封装，使用了较多 Java 8 引入的一些特性。</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>function<span class="token punctuation">.</span>*<span class="token punctuation">;</span>
<span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>stream<span class="token punctuation">.</span></span>Collector</span><span class="token punctuation">;</span>
<span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>stream<span class="token punctuation">.</span></span>Collectors</span><span class="token punctuation">.</span>*<span class="token punctuation">;</span>
<span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>stream<span class="token punctuation">.</span></span>Stream</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>其中较多方法参数接收的是 FunctionalInterface，这里简单给出常用的说明，下面就不在解释了。</p> <table><thead><tr><th>接口</th> <th>表示</th> <th>描述</th></tr></thead> <tbody><tr><td><code>Predicate&lt;T&gt;</code></td> <td>T → boolean</td> <td>对给定参数做判断，返回值必须为 boolean</td></tr> <tr><td><code>Consumer&lt;T&gt;</code></td> <td>T → void</td> <td>接收单个参数给接口“消费”用，无返回值</td></tr> <tr><td><code>Function&lt;T, R&gt;</code></td> <td>T → R</td> <td>接收单个参数，并返回结果</td></tr> <tr><td><code>Supplier&lt;T&gt;</code></td> <td>None → T</td> <td>内容提供者，不接受参数，返回结果</td></tr></tbody></table> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// 通过给定 Predicate 对容器中元素进行 过滤</span>
<span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token function">filter</span><span class="token punctuation">(</span><span class="token class-name">Collection</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> data<span class="token punctuation">,</span> <span class="token class-name">Predicate</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> predicate<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 通过给定 Function 对容器中元素进行 转换</span>
<span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">,</span> <span class="token class-name">R</span><span class="token punctuation">&gt;</span></span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">R</span><span class="token punctuation">&gt;</span></span> <span class="token function">map</span><span class="token punctuation">(</span><span class="token class-name">Collection</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> data<span class="token punctuation">,</span> <span class="token class-name">Function</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">,</span> <span class="token class-name">R</span><span class="token punctuation">&gt;</span></span> function<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 转换后是否去重 去重依赖 equals() 方法</span>
<span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">,</span> <span class="token class-name">R</span><span class="token punctuation">&gt;</span></span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">R</span><span class="token punctuation">&gt;</span></span> <span class="token function">map</span><span class="token punctuation">(</span><span class="token class-name">Collection</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> data<span class="token punctuation">,</span> <span class="token class-name">Function</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">,</span> <span class="token class-name">R</span><span class="token punctuation">&gt;</span></span> function<span class="token punctuation">,</span> <span class="token keyword">boolean</span> distinct<span class="token punctuation">)</span>
<span class="token comment">// 对容器内元素 先通过 Predicate 过滤，再通过 Function 转换</span>
<span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">,</span> <span class="token class-name">R</span><span class="token punctuation">&gt;</span></span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">R</span><span class="token punctuation">&gt;</span></span> <span class="token function">map</span><span class="token punctuation">(</span><span class="token class-name">Collection</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> data<span class="token punctuation">,</span> <span class="token class-name">Predicate</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> predicate<span class="token punctuation">,</span> <span class="token class-name">Function</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">,</span> <span class="token class-name">R</span><span class="token punctuation">&gt;</span></span> function<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 通过 Function 结果作为去重依据 不依赖 equals() 方法</span>
<span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">,</span> <span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token function">distinct</span><span class="token punctuation">(</span><span class="token class-name">Collection</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> data<span class="token punctuation">,</span> <span class="token class-name">Function</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">,</span> <span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> keyExtractor<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 去重前先过滤 不依赖 equals() 方法</span>
<span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">,</span> <span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token function">distinct</span><span class="token punctuation">(</span><span class="token class-name">Collection</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> data<span class="token punctuation">,</span> <span class="token class-name">Predicate</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> predicate<span class="token punctuation">,</span> <span class="token class-name">Function</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">,</span> <span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> keyExtractor<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 将多个 Stream 合并为一个 Stream</span>
<span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">,</span> <span class="token class-name">R</span><span class="token punctuation">&gt;</span></span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">R</span><span class="token punctuation">&gt;</span></span> <span class="token function">flatMap</span><span class="token punctuation">(</span><span class="token class-name">Collection</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> data<span class="token punctuation">,</span> <span class="token class-name">Function</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">,</span>  <span class="token class-name">Stream</span><span class="token punctuation">&lt;</span><span class="token class-name">R</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> function<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 拼接泛型为 String 的容器，默认 delimiter 为 &quot;,&quot;</span>
<span class="token class-name">String</span> <span class="token function">joinings</span><span class="token punctuation">(</span><span class="token class-name">Collection</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> data<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 指定 delimiter</span>
<span class="token class-name">String</span> <span class="token function">joinings</span><span class="token punctuation">(</span><span class="token class-name">Collection</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> data<span class="token punctuation">,</span> <span class="token class-name">String</span> delimiter<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 指定 delimiter 以及是否去重</span>
<span class="token class-name">String</span> <span class="token function">joinings</span><span class="token punctuation">(</span><span class="token class-name">Collection</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> data<span class="token punctuation">,</span> <span class="token class-name">String</span> delimiter<span class="token punctuation">,</span> <span class="token keyword">boolean</span> distinct<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 对容器内容元素使用 Function 进行转换，使用默认 delimiter 拼接</span>
<span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token class-name">String</span> <span class="token function">joinings</span><span class="token punctuation">(</span><span class="token class-name">Collection</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> data<span class="token punctuation">,</span> <span class="token class-name">Function</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> function<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 指定 delimiter 以及是否去重</span>
<span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token class-name">String</span> <span class="token function">joinings</span><span class="token punctuation">(</span><span class="token class-name">Collection</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> data<span class="token punctuation">,</span> <span class="token class-name">Function</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> function<span class="token punctuation">,</span> <span class="token class-name">String</span> delimiter<span class="token punctuation">,</span> <span class="token keyword">boolean</span> distinct<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// List&lt;Map&lt;String, String&gt; 为系统中通过 id找name 或 通过name找id 接口返回格式</span>
<span class="token comment">// 通过指定的 key名称 与 value名称 规约为一个 HashMap</span>
<span class="token comment">// List&lt;Map&lt;String, String&gt; 中的 key 如果有重复，显然获得的 HashMap 可能出现覆盖的情况</span>
<span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> <span class="token function">getHashMap</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Map</span><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> data<span class="token punctuation">,</span> <span class="token class-name">String</span> keyName<span class="token punctuation">,</span> <span class="token class-name">String</span> valueName<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 容器中是否 存在 满足 Predicate 的元素</span>
<span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token keyword">boolean</span> <span class="token function">anyMatch</span><span class="token punctuation">(</span><span class="token class-name">Collection</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> data<span class="token punctuation">,</span> <span class="token class-name">Predicate</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">super</span> <span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> predicate<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 容器中是否 全部为 满足 Predicate 的元素</span>
<span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token keyword">boolean</span> <span class="token function">allMatch</span><span class="token punctuation">(</span><span class="token class-name">Collection</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> data<span class="token punctuation">,</span> <span class="token class-name">Predicate</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">super</span> <span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> predicate<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 容器中是否 全都为不满足 Predicate 的元素</span>
<span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token keyword">boolean</span> <span class="token function">noneMatch</span><span class="token punctuation">(</span><span class="token class-name">Collection</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> data<span class="token punctuation">,</span> <span class="token class-name">Predicate</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">super</span> <span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> predicate<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 通过 指定的 keyMapper 结果作为 key，元素作为值，将容器转换为 map，key 出现重复会上抛异常</span>
<span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">,</span> <span class="token class-name">R</span><span class="token punctuation">&gt;</span></span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">R</span><span class="token punctuation">,</span> <span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token function">toMap</span><span class="token punctuation">(</span><span class="token class-name">Collection</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> data<span class="token punctuation">,</span> <span class="token class-name">Function</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">,</span> <span class="token class-name">R</span><span class="token punctuation">&gt;</span></span> keyMapper<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 同上 指定 BinaryOperator 作为 key duplicate 时的处理方式</span>
<span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">,</span> <span class="token class-name">R</span><span class="token punctuation">&gt;</span></span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">R</span><span class="token punctuation">,</span> <span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token function">toMap</span><span class="token punctuation">(</span><span class="token class-name">Collection</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> data<span class="token punctuation">,</span> <span class="token class-name">Function</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">,</span> <span class="token class-name">R</span><span class="token punctuation">&gt;</span></span> keyMapper<span class="token punctuation">,</span> <span class="token class-name">BinaryOperator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> mergeFunction<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 通过 指定的 keyMapper 结果作为 key，指定的 valueMapper 结果作为值，将容器转换为 map，key 出现重复会上抛异常</span>
<span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">,</span> <span class="token class-name">K</span><span class="token punctuation">,</span> <span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span> <span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> <span class="token function">toMap</span><span class="token punctuation">(</span><span class="token class-name">Collection</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> data<span class="token punctuation">,</span> <span class="token class-name">Function</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">,</span> <span class="token class-name">K</span><span class="token punctuation">&gt;</span></span> keyMapper<span class="token punctuation">,</span> <span class="token class-name">Function</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">,</span> <span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> valueMapper<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 同上 指定 BinaryOperator 作为 key duplicate 时的处理方式</span>
<span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">,</span> <span class="token class-name">K</span><span class="token punctuation">,</span> <span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span> <span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> <span class="token function">toMap</span><span class="token punctuation">(</span><span class="token class-name">Collection</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> data<span class="token punctuation">,</span> <span class="token class-name">Function</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">,</span> <span class="token class-name">K</span><span class="token punctuation">&gt;</span></span> keyMapper<span class="token punctuation">,</span> <span class="token class-name">Function</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">,</span> <span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> valueMapper<span class="token punctuation">,</span> <span class="token class-name">BinaryOperator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> mergeFunction<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 对容器中元素求 double 和，从一个元素获取 double 的方式为 ToDoubleFunction</span>
<span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token keyword">double</span> <span class="token function">toDoubleSum</span><span class="token punctuation">(</span><span class="token class-name">Collection</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> data<span class="token punctuation">,</span> <span class="token class-name">ToDoubleFunction</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> mapper<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 获取前先过滤</span>
<span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token keyword">double</span> <span class="token function">toDoubleSum</span><span class="token punctuation">(</span><span class="token class-name">Collection</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> data<span class="token punctuation">,</span> <span class="token class-name">Predicate</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> predicate<span class="token punctuation">,</span> <span class="token class-name">ToDoubleFunction</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> mapper<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 对容器中元素求 int 和，从一个元素获取 int 的方式为 ToIntFunction</span>
<span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token keyword">int</span> <span class="token function">toIntSum</span><span class="token punctuation">(</span><span class="token class-name">Collection</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> data<span class="token punctuation">,</span> <span class="token class-name">ToIntFunction</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> mapper<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 获取前先过滤</span>
<span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token keyword">int</span> <span class="token function">toIntSum</span><span class="token punctuation">(</span><span class="token class-name">Collection</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> data<span class="token punctuation">,</span> <span class="token class-name">Predicate</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> predicate<span class="token punctuation">,</span> <span class="token class-name">ToIntFunction</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> mapper<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br></div></div><h4 id="_2-11-4-连续空值处理"><a href="#_2-11-4-连续空值处理" class="header-anchor">#</a> 2.11.4 连续空值处理</h4> <p><code>com.togest.common.util.function.OptionalUtils.java</code></p> <p>此工具类基于 <code>java.util.Optional</code> 封装，这里只介绍一个常用的方法:</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token class-name">T</span> <span class="token function">map</span><span class="token punctuation">(</span><span class="token class-name">RestfulResponse</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> clientEntity<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>系统服务间客户端调用时，返回的数据格式均为 <code>RestfulResponse&lt;?&gt; clientObj</code>。通常需要对 clientObj 判空，再调用 <code>getData()</code> 方法获得我们实际关心的业务数据，还要对业务数据判空。</p> <p>上述方法直接返回我们实际关心的业务数据，转换过程中有一次出现空值，则获得数据为 null。</p> <hr> <p>这个工具类了解这一个方法就可以了，<strong>更多的用法应当去了解 Optional 类</strong>。</p> <p>在涉及对一个对象连续调用（或者叫做转换）时，其中每一步都有可能为空时，我们推荐使用 Optional 链去做这件事。</p> <p>Optional 链起始于一个 <code>Optional&lt;?&gt;</code> 对象。获取这个对象有两种方法：</p> <ul><li><code>Optional.of(T value)</code> 链的起始 value 不可以为空，为空上抛异常</li> <li><code>Optional.ofNullable(T value)</code> 链的起始 value 就可以为空。</li></ul> <p>Optional 链的中间部分即为 <code>&lt;U&gt; Optional&lt;U&gt; map(Function&lt;? super T, ? extends U&gt; mapper)</code>， map 方法的连续调用。</p> <p><em>假设有一个可能为空的字符串，我们的需求是把字符串的首字母变成大写。</em></p> <p><em>为了体现“中间步骤”多，所以这里假设实现思路是：先转换成数组，数组首字母大写，转换成字符串。那么从起始到中间转换的过程代码如下。</em></p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">Optional</span><span class="token punctuation">.</span><span class="token function">ofNullable</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token operator">::</span><span class="token function">toCharArray</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>x <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>x<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token class-name">Character</span><span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span>x<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token keyword">return</span> x<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token operator">::</span><span class="token keyword">new</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>注意这整个过程都是<strong>惰性求值</strong>的，我们最后结尾的一定是一个终止符，用来获得“结果”。</p> <p>使用 <code>get()</code> 方法，代表你非常确信能够获得结果，如果获取不到，就会上抛异常。</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">final</span> <span class="token class-name">String</span> rst <span class="token operator">=</span> <span class="token class-name">Optional</span><span class="token punctuation">.</span><span class="token function">ofNullable</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token operator">::</span><span class="token function">toCharArray</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>x <span class="token operator">-&gt;</span> <span class="token punctuation">{</span> x<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token class-name">Character</span><span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span>x<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token keyword">return</span> x<span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token operator">::</span><span class="token keyword">new</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>使用 <code>orElse(T other)</code> 方法，指定一个出现空值时的默认值，如果整个链式转换过程中出现空值，则即可停止，返回这里你指定的值。</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">final</span> <span class="token class-name">String</span> rst <span class="token operator">=</span> <span class="token class-name">Optional</span><span class="token punctuation">.</span><span class="token function">ofNullable</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token operator">::</span><span class="token function">toCharArray</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>x <span class="token operator">-&gt;</span> <span class="token punctuation">{</span> x<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token class-name">Character</span><span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span>x<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token keyword">return</span> x<span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token operator">::</span><span class="token keyword">new</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">orElse</span><span class="token punctuation">(</span><span class="token string">&quot;default&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>使用 <code>orElseGet(Supplier&lt;? extends T&gt; other)</code> 方法，与上面含义相同，无非你提供的不是具体的默认值，而是一个内容提供者 Supplier。</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">final</span> <span class="token class-name">String</span> rst <span class="token operator">=</span> <span class="token class-name">Optional</span><span class="token punctuation">.</span><span class="token function">ofNullable</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token operator">::</span><span class="token function">toCharArray</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>x <span class="token operator">-&gt;</span> <span class="token punctuation">{</span> x<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token class-name">Character</span><span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span>x<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token keyword">return</span> x<span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token operator">::</span><span class="token keyword">new</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">orElseGet</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token operator">::</span><span class="token keyword">new</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>使用 <code>ifPresent(Consumer&lt;? super T&gt; consumer)</code> 方法，传入 Consumer ，整个转换过程中都没有问题出现的话，直接消费掉最终结果，无返回值。</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">Optional</span><span class="token punctuation">.</span><span class="token function">ofNullable</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token operator">::</span><span class="token function">toCharArray</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>x <span class="token operator">-&gt;</span> <span class="token punctuation">{</span> x<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token class-name">Character</span><span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span>x<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token keyword">return</span> x<span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token operator">::</span><span class="token keyword">new</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">ifPresent</span><span class="token punctuation">(</span>rst <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
                    <span class="token comment">// do whatever you want</span>
                    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;rst:&quot;</span> <span class="token operator">+</span> rst<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="_2-12-日志使用"><a href="#_2-12-日志使用" class="header-anchor">#</a> 2.12 日志使用</h3> <p>日志使用时，输出信息要使用占位符的方式，实例如下。</p> <p><img src="/vuepress-demo/assets/img/image-20200414135615542.c15d9c9a.png" alt="image-20200414135615542"></p> <p>日志使用时，输出异常堆栈信息，实例如下，便于追踪异常。</p> <p><img src="/vuepress-demo/assets/img/image-20200414140908708.f812bbf6.png" alt="image-20200414140908708"></p> <p>谨慎地记录日志。生产环境禁止输出 debug 日志；有选择地输出 info 日志；如果使用 warn 来记录刚上线时的业务行为信息，一定要注意日志输出量的问题，避免把服务器磁盘撑爆，并记得及时删除这些观察日志。</p> <p>说明：大量地输出无效日志，不利于系统性能提升，也不利于快速定位错误点。</p> <h2 id="_3-平台服务"><a href="#_3-平台服务" class="header-anchor">#</a> 3.平台服务</h2> <h3 id="_3-1-注册服务"><a href="#_3-1-注册服务" class="header-anchor">#</a> 3.1 注册服务</h3> <p>平台注册 togest-register 模块，为服务注册中心，独立服务运行,默认端口 8762，目前单点运行。</p> <p><img src="/vuepress-demo/assets/img/image-20200410145632207.ba05f0cf.png" alt="image-20200410145632207"></p> <h3 id="_3-2-网关"><a href="#_3-2-网关" class="header-anchor">#</a> 3.2 网关</h3> <p><img src="/vuepress-demo/assets/img/image-20200414133846210.cb224370.png" alt="image-20200414133846210"></p> <p>平台 togest-gateway 模块，为所有后台网关转发服务，独立服务运行，目前单点运行,默认端口 50001。网关的功能如下：</p> <p>1、登录鉴权。所有经过网关的请求都会获取 TOKEN 拦截。TOKEN 校验通过 REDIS 完成</p> <p>2、白名单鉴权。对于第三方系统需要访问我们的系统，我们会通过配置文件，配置些固定的 KEY 及秘钥。用户携带这些固定秘钥进行白名单鉴权</p> <p>3、路由功能。通过路由配置规则，进行转发。配置定义参考以下文件：</p> <div class="language-properties line-numbers-mode"><pre class="language-properties"><code><span class="token attr-name">routes</span><span class="token punctuation">:</span>
<span class="token attr-name">    file</span><span class="token punctuation">:</span>
<span class="token attr-name">      path</span><span class="token punctuation">:</span> <span class="token attr-value">/file/**</span>
<span class="token attr-name">      serviceId</span><span class="token punctuation">:</span> <span class="token attr-value">file-service</span>
<span class="token attr-name">      stripPrefix</span><span class="token punctuation">:</span> <span class="token attr-value">true</span>
<span class="token attr-name">    download</span><span class="token punctuation">:</span>
<span class="token attr-name">      path</span><span class="token punctuation">:</span> <span class="token attr-value">/download/**</span>
<span class="token attr-name">      serviceId</span><span class="token punctuation">:</span> <span class="token attr-value">file-service</span>
<span class="token attr-name">      stripPrefix</span><span class="token punctuation">:</span> <span class="token attr-value">true</span>
<span class="token attr-name">    code</span><span class="token punctuation">:</span>
<span class="token attr-name">      path</span><span class="token punctuation">:</span> <span class="token attr-value">/code/**</span>
<span class="token attr-name">      serviceId</span><span class="token punctuation">:</span> <span class="token attr-value">code-service</span>
<span class="token attr-name">      stripPrefix</span><span class="token punctuation">:</span> <span class="token attr-value">true</span>
<span class="token attr-name">    dict</span><span class="token punctuation">:</span>
<span class="token attr-name">      path</span><span class="token punctuation">:</span> <span class="token attr-value">/dict/**</span>
<span class="token attr-name">      serviceId</span><span class="token punctuation">:</span> <span class="token attr-value">dict-service</span>
<span class="token attr-name">      stripPrefix</span><span class="token punctuation">:</span> <span class="token attr-value">true</span>
<span class="token attr-name">    base</span><span class="token punctuation">:</span>
<span class="token attr-name">      path</span><span class="token punctuation">:</span> <span class="token attr-value">/base/**</span>
<span class="token attr-name">      serviceId</span><span class="token punctuation">:</span> <span class="token attr-value">base-service</span>
<span class="token attr-name">      stripPrefix</span><span class="token punctuation">:</span> <span class="token attr-value">true</span>
<span class="token attr-name">    workflow</span><span class="token punctuation">:</span>
<span class="token attr-name">      path</span><span class="token punctuation">:</span> <span class="token attr-value">/workflow/**</span>
<span class="token attr-name">      serviceId</span><span class="token punctuation">:</span> <span class="token attr-value">workflow-service</span>
<span class="token attr-name">      stripPrefix</span><span class="token punctuation">:</span> <span class="token attr-value">true</span>
<span class="token attr-name">    jcwBase</span><span class="token punctuation">:</span>
<span class="token attr-name">      path</span><span class="token punctuation">:</span> <span class="token attr-value">/jcw/base/**</span>
<span class="token attr-name">      serviceId</span><span class="token punctuation">:</span> <span class="token attr-value">jcwBase-service</span>
<span class="token attr-name">      stripPrefix</span><span class="token punctuation">:</span> <span class="token attr-value">true</span>
<span class="token attr-name">    jcwEqu</span><span class="token punctuation">:</span>
<span class="token attr-name">      path</span><span class="token punctuation">:</span> <span class="token attr-value">/jcw/equ/**</span>
<span class="token attr-name">      serviceId</span><span class="token punctuation">:</span> <span class="token attr-value">jcwEqu-service</span>
<span class="token attr-name">      stripPrefix</span><span class="token punctuation">:</span> <span class="token attr-value">true</span>
<span class="token attr-name">    jcwProduce</span><span class="token punctuation">:</span>
<span class="token attr-name">      path</span><span class="token punctuation">:</span> <span class="token attr-value">/jcw/produce/**</span>
<span class="token attr-name">      serviceId</span><span class="token punctuation">:</span> <span class="token attr-value">jcwProduce-service</span>
<span class="token attr-name">      stripPrefix</span><span class="token punctuation">:</span> <span class="token attr-value">true</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br></div></div><h3 id="_3-3-监控服务"><a href="#_3-3-监控服务" class="header-anchor">#</a> 3.3 监控服务</h3> <p>平台 togest-admin 模块，为服务监控模块，完成平台所有微服务的监控，默认端口 8090。通过该监控可以看到服务的在线状态、CPU、内存、健康检查情况、日志查看。</p> <p><img src="/vuepress-demo/assets/img/image-20200410144504923.b1709c4b.png" alt="image-20200410144504923"></p> <h3 id="_3-4-配置管理"><a href="#_3-4-配置管理" class="header-anchor">#</a> 3.4 配置管理</h3> <p>配置管理服务管理平台所有服务的配置文件，配置文件的管理目前有三种方式 ,包括配置管理本地存储、GIT、SVN 管理。服务的配置文件一旦有变动，配置管理服务会通知关联的服务进行重启。目前平台一些 IP 的配置，采用的都是 HOST，配置不经常变化，估暂时未启用该服务。</p> <p>以下为配置管理服务使用本地文件管理服务配置，文件名要对应微服务名称。</p> <p><img src="/vuepress-demo/assets/img/image-20200410151331625.f0de20fd.png" alt="image-20200410151331625"></p> <h3 id="_3-5-字典"><a href="#_3-5-字典" class="header-anchor">#</a> 3.5 字典</h3> <p>字典服务管理平台所有的字典，微服务之间通过 feignClient 聚合。</p> <p><img src="/vuepress-demo/assets/img/image-20200414114952249.8545c70b.png" alt="image-20200414114952249"></p> <p>字典开发了客户端模块，在上面聚合中已经详细介绍了，不再做描述，字典服务经常被服务调用的 restful api 如下：</p> <ol><li><p><strong><a href="http://192.168.1.96:40001/swagger-ui.html#!/dictionary-item-resource/getNameByIdsUsingGET" target="_blank" rel="noopener noreferrer">GET<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> <a href="http://192.168.1.96:40001/swagger-ui.html#!/dictionary-item-resource/getNameByIdsUsingGET" target="_blank" rel="noopener noreferrer">/dictionaryItem/ids/names<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></strong></p> <p><strong>输入：</strong> id,多个</p></li></ol> <p><strong>输出：</strong></p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;data&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;基本信息&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;男&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2&quot;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">&quot;errorCode&quot;</span><span class="token operator">:</span> <span class="token number">10000</span><span class="token punctuation">,</span>
  <span class="token property">&quot;msg&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ok&quot;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>2.<a href="http://192.168.1.96:40001/swagger-ui.html#!/dictionary-item-resource/findDictionaryItemsUsingGET" target="_blank" rel="noopener noreferrer">GET<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> <a href="http://192.168.1.96:40001/swagger-ui.html#!/dictionary-item-resource/findDictionaryItemsUsingGET" target="_blank" rel="noopener noreferrer">/dictionary/dictionaryName/dictionaryItems<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><strong>输入：</strong> 字典名称,多个</p> <p><strong>输出：</strong></p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;data&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;男&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;code&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;sort&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
      <span class="token property">&quot;dictionaryId&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;dictionaryEname&quot;</span><span class="token operator">:</span> <span class="token string">&quot;sex&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;dictionaryName&quot;</span><span class="token operator">:</span> <span class="token string">&quot;性别&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;dictionaryParentId&quot;</span><span class="token operator">:</span> <span class="token null keyword">null</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;3&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;女&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;code&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;sort&quot;</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
      <span class="token property">&quot;dictionaryId&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;dictionaryEname&quot;</span><span class="token operator">:</span> <span class="token string">&quot;sex&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;dictionaryName&quot;</span><span class="token operator">:</span> <span class="token string">&quot;性别&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;dictionaryParentId&quot;</span><span class="token operator">:</span> <span class="token null keyword">null</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">&quot;errorCode&quot;</span><span class="token operator">:</span> <span class="token number">10000</span><span class="token punctuation">,</span>
  <span class="token property">&quot;msg&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ok&quot;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><h3 id="_3-6-元数据"><a href="#_3-6-元数据" class="header-anchor">#</a> 3.6 元数据</h3> <p>元数据服务管理了平台所有的 Crud、导入、导出元数据模型。</p> <p><img src="/vuepress-demo/assets/img/image-20200414115421054.a021876a.png" alt="image-20200414115421054"></p> <p>所有业务都是基于元数据驱动，我们针对聚合的应用，设计了 togest-cms-code-client 模块，在导入导出中有些介绍。togest-cms-code-client 中设计了 MetadataConfigClient、ImportConfigClient、MetadataClient 三个类实现元数据服务的调用。</p> <p><strong>MetadataConfigClient：获取元数据配置相关接口</strong></p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@FeignClient</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token class-name">FeignServerConfig</span><span class="token punctuation">.</span>codeServerName<span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">MetadataConfigClient</span> <span class="token punctuation">{</span>

	<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;/systemResources/share&quot;</span><span class="token punctuation">,</span> method <span class="token operator">=</span> <span class="token class-name">RequestMethod</span><span class="token punctuation">.</span>POST<span class="token punctuation">)</span>
	<span class="token class-name">RestfulResponse</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">List</span><span class="token punctuation">&lt;</span><span class="token class-name">SystemResourcesDTO</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> <span class="token function">getSystemPropertyResources</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestBody</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> ids<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;/systemResources/customCode&quot;</span><span class="token punctuation">,</span> method <span class="token operator">=</span> <span class="token class-name">RequestMethod</span><span class="token punctuation">.</span>GET<span class="token punctuation">)</span>
	<span class="token class-name">RestfulResponse</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> <span class="token function">getCustomCode</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestParam</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span> <span class="token class-name">String</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/systemPropertyResources/resourcesCode&quot;</span><span class="token punctuation">)</span>
	<span class="token class-name">RestfulResponse</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">List</span><span class="token punctuation">&lt;</span><span class="token class-name">SystemPropertyResourcesDTO</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> <span class="token function">getSystemPropertyResources</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestParam</span><span class="token punctuation">(</span><span class="token string">&quot;resourcesCode&quot;</span><span class="token punctuation">)</span> <span class="token class-name">String</span> resourcesCode<span class="token punctuation">,</span> <span class="token annotation punctuation">@RequestParam</span><span class="token punctuation">(</span><span class="token string">&quot;allocationTag&quot;</span><span class="token punctuation">)</span> <span class="token class-name">Integer</span> allocationTag<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/systemPropertyResources/resourcesCode/record&quot;</span><span class="token punctuation">)</span>
	<span class="token annotation punctuation">@ApiOperation</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;获取配置归档字段信息&quot;</span><span class="token punctuation">)</span>
	<span class="token class-name">RestfulResponse</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">List</span><span class="token punctuation">&lt;</span><span class="token class-name">SystemPropertyResourcesDTO</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> <span class="token function">getRecordProperty</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestParam</span><span class="token punctuation">(</span><span class="token string">&quot;resourcesCode&quot;</span><span class="token punctuation">)</span> <span class="token class-name">String</span> resourcesCode<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;/systemResources/share/{code}&quot;</span><span class="token punctuation">,</span> method <span class="token operator">=</span> <span class="token class-name">RequestMethod</span><span class="token punctuation">.</span>GET<span class="token punctuation">)</span>
	<span class="token annotation punctuation">@ApiOperation</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;获取资源&quot;</span><span class="token punctuation">)</span>
	<span class="token class-name">RestfulResponse</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">SystemResoucesResponse</span><span class="token punctuation">&gt;</span></span> <span class="token function">getSystemResources</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathVariable</span><span class="token punctuation">(</span><span class="token string">&quot;code&quot;</span><span class="token punctuation">)</span> <span class="token class-name">String</span> code<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;/systemPropertyResources/ids/codes&quot;</span><span class="token punctuation">,</span> method <span class="token operator">=</span> <span class="token class-name">RequestMethod</span><span class="token punctuation">.</span>POST<span class="token punctuation">)</span>
	<span class="token annotation punctuation">@ApiOperation</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;通过code集合获取信息&quot;</span><span class="token punctuation">)</span>
	<span class="token class-name">RestfulResponse</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">List</span><span class="token punctuation">&lt;</span><span class="token class-name">Map</span><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> <span class="token function">getIdsByCustomCodes</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestBody</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> codes<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;/systemPropertyResources/code/id&quot;</span><span class="token punctuation">,</span> method <span class="token operator">=</span> <span class="token class-name">RequestMethod</span><span class="token punctuation">.</span>GET<span class="token punctuation">)</span>
	<span class="token annotation punctuation">@ApiOperation</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;通过id获取code&quot;</span><span class="token punctuation">)</span>
	<span class="token class-name">RestfulResponse</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> <span class="token function">getCodeById</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestParam</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span> <span class="token class-name">String</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;/systemPropertyResources/systemResourcesCodes&quot;</span><span class="token punctuation">,</span> method <span class="token operator">=</span> <span class="token class-name">RequestMethod</span><span class="token punctuation">.</span>POST<span class="token punctuation">)</span>
	<span class="token annotation punctuation">@ApiOperation</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;通过code集合获取信息, TAG_SELECTED&quot;</span><span class="token punctuation">)</span>
	<span class="token class-name">RestfulResponse</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Map</span><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">List</span><span class="token punctuation">&lt;</span><span class="token class-name">SystemPropertyResourcesDTO</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> <span class="token function">getSystemResourcesByCodeList</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestBody</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> systemResourcesCodeList<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;/systemPropertyResources&quot;</span><span class="token punctuation">,</span> method <span class="token operator">=</span> <span class="token class-name">RequestMethod</span><span class="token punctuation">.</span>GET<span class="token punctuation">)</span>
	<span class="token annotation punctuation">@ApiOperation</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;获取数据字段信息&quot;</span><span class="token punctuation">)</span>
	<span class="token class-name">RestfulResponse</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">SystemPropertyResourcesDTO</span><span class="token punctuation">&gt;</span></span> <span class="token function">getSystemPropertyResources</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestParam</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span> <span class="token class-name">String</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;template/suffix&quot;</span><span class="token punctuation">,</span> method <span class="token operator">=</span> <span class="token class-name">RequestMethod</span><span class="token punctuation">.</span>GET<span class="token punctuation">)</span>
	<span class="token annotation punctuation">@ApiOperation</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;通过模板数据id获取关联文件后缀名&quot;</span><span class="token punctuation">)</span>
	<span class="token class-name">RestfulResponse</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> <span class="token function">getFileSuffix</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestParam</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span> <span class="token class-name">String</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br></div></div><p><strong>MetadataClient：对 MAP 集合数据经过元数据加工</strong></p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Service</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MetadataClient</span> <span class="token punctuation">{</span>
   <span class="token annotation punctuation">@Autowired</span>
   <span class="token keyword">private</span> <span class="token class-name">MetadataConfigClient</span> client<span class="token punctuation">;</span>
   <span class="token annotation punctuation">@Autowired</span>
   <span class="token keyword">private</span> <span class="token class-name">MetadataUtil</span> util<span class="token punctuation">;</span>

   <span class="token keyword">public</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">List</span><span class="token punctuation">&lt;</span><span class="token class-name">Map</span><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> <span class="token function">enclosure</span><span class="token punctuation">(</span><span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> obj<span class="token punctuation">,</span> <span class="token class-name">String</span> systemResourceCode<span class="token punctuation">,</span>
         <span class="token class-name">String</span> dictName<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token function">enclosure</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> systemResourceCode<span class="token punctuation">,</span> dictName<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>

   <span class="token keyword">public</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">List</span><span class="token punctuation">&lt;</span><span class="token class-name">Map</span><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> <span class="token function">enclosure</span><span class="token punctuation">(</span><span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> obj<span class="token punctuation">,</span> <span class="token class-name">String</span> systemResourceCode<span class="token punctuation">,</span>
         <span class="token class-name">String</span> dictName<span class="token punctuation">,</span> <span class="token keyword">boolean</span> isShowRelation<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token class-name">RestfulResponse</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">List</span><span class="token punctuation">&lt;</span><span class="token class-name">SystemPropertyResourcesDTO</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> result <span class="token operator">=</span> client<span class="token punctuation">.</span><span class="token function">getSystemPropertyResources</span><span class="token punctuation">(</span>systemResourceCode<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>result <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> result<span class="token punctuation">.</span><span class="token function">getData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
         <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
         <span class="token keyword">return</span> util<span class="token punctuation">.</span><span class="token function">enclosure</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> result<span class="token punctuation">.</span><span class="token function">getData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> dictName<span class="token punctuation">,</span> isShowRelation<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
   <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><p><strong>ImportConfigClient：获取导入导出配置</strong></p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>
<span class="token annotation punctuation">@FeignClient</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token class-name">FeignServerConfig</span><span class="token punctuation">.</span>codeServerName<span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">ImportConfigClient</span> <span class="token punctuation">{</span>

	<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;importExcelConfigs/share/{id}&quot;</span><span class="token punctuation">,</span> method <span class="token operator">=</span> <span class="token class-name">RequestMethod</span><span class="token punctuation">.</span>GET<span class="token punctuation">)</span>
	<span class="token keyword">public</span> <span class="token class-name">RestfulResponse</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">ImportExcelConfigResponse</span><span class="token punctuation">&gt;</span></span> <span class="token function">getImportExcelConfigResponse</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathVariable</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span> <span class="token class-name">String</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;importExcelConfigs/share&quot;</span><span class="token punctuation">,</span> method <span class="token operator">=</span> <span class="token class-name">RequestMethod</span><span class="token punctuation">.</span>POST<span class="token punctuation">)</span>
	<span class="token keyword">public</span> <span class="token class-name">RestfulResponse</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">List</span><span class="token punctuation">&lt;</span><span class="token class-name">ImportExcelConfigResponse</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> <span class="token function">getImportExcelConfigResponse</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestBody</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> ids<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;importExcelConfigs/share&quot;</span><span class="token punctuation">,</span> method <span class="token operator">=</span> <span class="token class-name">RequestMethod</span><span class="token punctuation">.</span>GET<span class="token punctuation">)</span>
	<span class="token keyword">public</span> <span class="token class-name">RestfulResponse</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">List</span><span class="token punctuation">&lt;</span><span class="token class-name">ImportExcelConfigDTO</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> <span class="token function">getImportExcelConfigResponseByData</span><span class="token punctuation">(</span>
			<span class="token annotation punctuation">@RequestParam</span><span class="token punctuation">(</span><span class="token string">&quot;dataName&quot;</span><span class="token punctuation">)</span> <span class="token class-name">String</span> dataName<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;sysUser/userHeader&quot;</span><span class="token punctuation">,</span> method <span class="token operator">=</span> <span class="token class-name">RequestMethod</span><span class="token punctuation">.</span>POST<span class="token punctuation">)</span>
	<span class="token keyword">public</span> <span class="token class-name">RestfulResponse</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">List</span><span class="token punctuation">&lt;</span><span class="token class-name">ExcelHeaderData</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> <span class="token function">getUserConfiguration</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestParam</span><span class="token punctuation">(</span><span class="token string">&quot;userId&quot;</span><span class="token punctuation">)</span> <span class="token class-name">String</span> userId<span class="token punctuation">,</span>
			<span class="token annotation punctuation">@RequestParam</span><span class="token punctuation">(</span><span class="token string">&quot;systemResourcesCode&quot;</span><span class="token punctuation">)</span> <span class="token class-name">String</span> systemResourcesCode<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;template/share/file/{id}&quot;</span><span class="token punctuation">,</span> method <span class="token operator">=</span> <span class="token class-name">RequestMethod</span><span class="token punctuation">.</span>GET<span class="token punctuation">)</span>
	<span class="token keyword">public</span> <span class="token class-name">RestfulResponse</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> <span class="token function">getFileId</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathVariable</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span> <span class="token class-name">String</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><h3 id="_3-7-文件"><a href="#_3-7-文件" class="header-anchor">#</a> 3.7 文件</h3> <p>文件服务管理平台所有的文件，文件系统支持 ftp、disk、fastdfs 三种方式。所有的功能包括：大小文件上传、下载功能。</p> <p><img src="/vuepress-demo/assets/img/image-20200414132806868.0ee9e9f6.png" alt="image-20200414132806868"></p> <p>文件服务相关的 API，可查看http://192.168.1.96:20001/swagger-ui.html#/。</p> <p>业务服务可能会需要调用文件服务，例如 Excel 中解析的图片需要上传至文件服务器上面。针对这么一种场景，我们设计了<code>togest-file-client</code>模块，便于内部服务上传文件。<code>togest-file-client</code>中是通过<code>feignClient</code>调用的，效率会较低，如果存在大量的文件上传的话，建议使用<code>togest-file-system-service</code>模块，直接操作文件系统。直接使用文件系统的话，需要考虑的是如果使用 disk 的方式，就需要考虑挂载的方式。</p> <p><strong><code>FileClient</code></strong></p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@FeignClient</span><span class="token punctuation">(</span><span class="token class-name">FeignServerConfig</span><span class="token punctuation">.</span>fileServerName<span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">FileClient</span> <span class="token punctuation">{</span>

	<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;files/client&quot;</span><span class="token punctuation">,</span> method <span class="token operator">=</span> <span class="token class-name">RequestMethod</span><span class="token punctuation">.</span>POST<span class="token punctuation">)</span>
	<span class="token keyword">public</span> <span class="token class-name">RestfulResponse</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> <span class="token function">uploadFileByClient</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestBody</span> <span class="token class-name">FileBlobDTO</span> blob<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;files/client/{id}&quot;</span><span class="token punctuation">,</span> method <span class="token operator">=</span> <span class="token class-name">RequestMethod</span><span class="token punctuation">.</span>GET<span class="token punctuation">)</span>
	<span class="token keyword">public</span> <span class="token class-name">RestfulResponse</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">FileDataDTO</span><span class="token punctuation">&gt;</span></span> <span class="token function">download</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathVariable</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span> <span class="token class-name">String</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token annotation punctuation">@DeleteMapping</span><span class="token punctuation">(</span><span class="token string">&quot;files/{id}/real&quot;</span><span class="token punctuation">)</span>
	<span class="token keyword">public</span> <span class="token class-name">RestfulResponse</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Boolean</span><span class="token punctuation">&gt;</span></span> <span class="token function">deleteFile</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathVariable</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span> <span class="token class-name">String</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;files/{id}&quot;</span><span class="token punctuation">,</span> method <span class="token operator">=</span> <span class="token class-name">RequestMethod</span><span class="token punctuation">.</span>GET<span class="token punctuation">)</span>
	<span class="token annotation punctuation">@ApiOperation</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;获取文件信息&quot;</span><span class="token punctuation">)</span>
	<span class="token keyword">public</span> <span class="token class-name">RestfulResponse</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">FileBlobDTO</span><span class="token punctuation">&gt;</span></span> <span class="token function">getFile</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathVariable</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span> <span class="token class-name">String</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;files/client/uploads&quot;</span><span class="token punctuation">,</span> method <span class="token operator">=</span> <span class="token class-name">RequestMethod</span><span class="token punctuation">.</span>POST<span class="token punctuation">)</span>
	<span class="token annotation punctuation">@ApiOperation</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;批量上传文件&quot;</span><span class="token punctuation">)</span>
	<span class="token keyword">public</span> <span class="token class-name">RestfulResponse</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Map</span><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">List</span><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> <span class="token function">uploadByClient</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestBody</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">FileBatchData</span><span class="token punctuation">&gt;</span></span> list<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;files/client/downloads&quot;</span><span class="token punctuation">,</span> method <span class="token operator">=</span> <span class="token class-name">RequestMethod</span><span class="token punctuation">.</span>POST<span class="token punctuation">)</span>
	<span class="token annotation punctuation">@ApiOperation</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;批量下载文件&quot;</span><span class="token punctuation">)</span>
	<span class="token keyword">public</span> <span class="token class-name">RestfulResponse</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Map</span><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">FileDataDTO</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> <span class="token function">downloadByFileId</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestBody</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> fileIds<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token annotation punctuation">@PostMapping</span><span class="token punctuation">(</span><span class="token class-name">FileURL</span><span class="token punctuation">.</span>UPLOAD_FILE_URL<span class="token punctuation">)</span>
	<span class="token keyword">public</span> <span class="token class-name">RestfulResponse</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> <span class="token function">uploadFile</span><span class="token punctuation">(</span><span class="token class-name">FileUploadDTO</span> fileUploadRequest<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token class-name">FileURL</span><span class="token punctuation">.</span>DOWNLOAD_FILE_URL<span class="token punctuation">)</span>
	<span class="token keyword">public</span> <span class="token class-name">ResponseEntity</span> <span class="token function">downloadFile</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathVariable</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span> <span class="token class-name">String</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;files/client/office/pdf&quot;</span><span class="token punctuation">,</span> method <span class="token operator">=</span> <span class="token class-name">RequestMethod</span><span class="token punctuation">.</span>POST<span class="token punctuation">)</span>
	<span class="token keyword">public</span> <span class="token class-name">RestfulResponse</span><span class="token operator">&lt;</span><span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> <span class="token function">conventToPdf</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestBody</span> <span class="token class-name">FileDataDTO</span> entity<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;files/adds&quot;</span><span class="token punctuation">,</span> method <span class="token operator">=</span> <span class="token class-name">RequestMethod</span><span class="token punctuation">.</span>POST<span class="token punctuation">)</span>
	<span class="token annotation punctuation">@ApiOperation</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;文件批量新增&quot;</span><span class="token punctuation">)</span>
	<span class="token keyword">public</span> <span class="token class-name">RestfulResponse</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Boolean</span><span class="token punctuation">&gt;</span></span> <span class="token function">inserts</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestBody</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">FileBlobDTO</span><span class="token punctuation">&gt;</span></span> blobs<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;files/datas&quot;</span><span class="token punctuation">,</span> method <span class="token operator">=</span> <span class="token class-name">RequestMethod</span><span class="token punctuation">.</span>POST<span class="token punctuation">)</span>
	<span class="token annotation punctuation">@ApiOperation</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;批量获取文件信息&quot;</span><span class="token punctuation">)</span>
	<span class="token keyword">public</span> <span class="token class-name">RestfulResponse</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">List</span><span class="token punctuation">&lt;</span><span class="token class-name">FileBlobDTO</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> <span class="token function">getByIds</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestBody</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> ids<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br></div></div><h3 id="_3-8-cms"><a href="#_3-8-cms" class="header-anchor">#</a> 3.8 CMS</h3> <p>CMS 平台门户基础，实现功能包括登录、人员、组织结构、权限、站点设置等功能。 API，可查看http://192.168.1.96:40002/swagger-ui.html#/。</p> <p><img src="/vuepress-demo/assets/img/image-20200414134024940.f4c2e18a.png" alt="image-20200414134024940"></p> <h3 id="_3-9-业务基础"><a href="#_3-9-业务基础" class="header-anchor">#</a> 3.9 业务基础</h3> <p>业务基础，平台业务基础服务，涵盖的功能包括铁路线路、站区、桥隧、接触网管辖范围、供电臂、所亭。 API，可查看http://192.168.1.96:30002/swagger-ui.html#/。</p> <p><img src="/vuepress-demo/assets/img/image-20200414134100597.b7d8a81c.png" alt="image-20200414134100597"></p> <h3 id="_3-10-消息推送"><a href="#_3-10-消息推送" class="header-anchor">#</a> 3.10 消息推送</h3> <p><img src="/vuepress-demo/assets/img/image-20200414134214998.af12588d.png" alt="image-20200414134214998"></p> <p>消息推送模块采用了 MQ 和 WebSocket 技术，实现消息的及时推送。整体设计思想： 生产者通过 MQ 点对点的方式将业务产生的消息发送给消息推送服务，消息推送服务通过绑定队列消费生产者的消息，消息服务一旦监听到消息之后，保存到数据库中，然后判断该消息是否满足在线用户的推送条件，如果满足，则及时推送。如果用户不在线，则用户登录时，会调用消息推送模块的 API 把最近的消息推送出去。</p> <p>消息推送模块包括 togest-cms-msg-model、togest-cms-msg-push 模块，togest-cms-msg-push 及业务服务可依赖 togest-cms-msg-model 模块。togest-cms-msg-model 定义了消息结构，传输的消息 ActMsgEnvelope 结构如下</p> <p><strong>ActMsgEnvelope</strong></p> <div class="language-Java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Data</span>
<span class="token annotation punctuation">@NoArgsConstructor</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ActMsgEnvelope</span> <span class="token keyword">implements</span> <span class="token class-name">Serializable</span> <span class="token punctuation">{</span>
   <span class="token keyword">private</span> <span class="token class-name">ActMessage</span> content<span class="token punctuation">;</span>
   <span class="token keyword">private</span>  <span class="token class-name">MsgTarget</span> target<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><strong>ActMessage</strong></p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Data</span>
<span class="token annotation punctuation">@NoArgsConstructor</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ActMessage</span> <span class="token keyword">implements</span> <span class="token class-name">Serializable</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> id<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> content<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> dataId<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> businessType<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> payLoad<span class="token punctuation">;</span>
    <span class="token annotation punctuation">@DateTimeFormat</span><span class="token punctuation">(</span>pattern <span class="token operator">=</span> <span class="token string">&quot;yyyy-MM-dd&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">Date</span> createTime<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Long</span> sort<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> href<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p><strong>MsgTarget</strong></p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@AllArgsConstructor</span>
<span class="token annotation punctuation">@NoArgsConstructor</span>
<span class="token annotation punctuation">@Data</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MsgTarget</span> <span class="token keyword">implements</span> <span class="token class-name">Serializable</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> userId<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> groupId<span class="token punctuation">;</span> <span class="token comment">// 此处groupId含部门及群组</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>**绑定队列：**消息推送 MQ 和消息生产者通过这两个队列进行点对点消费</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> SYSTEM_MQ_QUEUE<span class="token operator">=</span><span class="token string">&quot;com.tg.sys.msg.queue&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> SYSTEM_MQ_BATCH_QUEUE<span class="token operator">=</span><span class="token string">&quot;com.tg.sys.msg.batch.queue&quot;</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><strong>WEB 端 API：</strong></p> <p><strong>1.功能：</strong> 获取未读消息</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;getMessageList&quot;</span><span class="token punctuation">,</span> method <span class="token operator">=</span> <span class="token class-name">RequestMethod</span><span class="token punctuation">.</span>GET<span class="token punctuation">)</span>
<span class="token annotation punctuation">@ApiOperation</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;消息列表&quot;</span><span class="token punctuation">)</span>
  <span class="token keyword">public</span> <span class="token class-name">RestfulResponse</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">List</span><span class="token punctuation">&lt;</span><span class="token class-name">ActMessageDTO</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> <span class="token function">actMessageList</span><span class="token punctuation">(</span><span class="token class-name">ActMessageRequest</span> vo<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><strong>输入：</strong></p> <table><thead><tr><th>属性</th> <th>类型</th> <th>描述</th></tr></thead> <tbody><tr><td>userId</td> <td>String</td> <td>用户 ID，必填</td></tr> <tr><td>deptId</td> <td>String[]</td> <td>部门、群组，选填</td></tr> <tr><td>maxNum</td> <td>long</td> <td>读取条数，按照创建时间倒序排，必填</td></tr></tbody></table> <p>**2.功能：**读某条消息标志成已读</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;readMessage&quot;</span><span class="token punctuation">,</span> method <span class="token operator">=</span> <span class="token class-name">RequestMethod</span><span class="token punctuation">.</span>POST<span class="token punctuation">)</span>
<span class="token annotation punctuation">@ApiOperation</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;读消息&quot;</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token class-name">RestfulResponse</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> <span class="token function">readMessage</span><span class="token punctuation">(</span><span class="token class-name">String</span> msgId<span class="token punctuation">,</span> <span class="token class-name">String</span> userId<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>**输入：**消息 ID、用户 ID</p> <p>**3.功能：**消息分页</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;getAllMessageList&quot;</span><span class="token punctuation">,</span> method <span class="token operator">=</span> <span class="token class-name">RequestMethod</span><span class="token punctuation">.</span>GET<span class="token punctuation">)</span>
<span class="token annotation punctuation">@ApiOperation</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;全部消息列表&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">RestfulResponse</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Page</span><span class="token punctuation">&lt;</span><span class="token class-name">ActMessageDTO</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> <span class="token function">allActMessageList</span><span class="token punctuation">(</span><span class="token class-name">ActMessageRequest</span> vo<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><strong>输入：</strong></p> <table><thead><tr><th>属性</th> <th>类型</th> <th>描述</th></tr></thead> <tbody><tr><td>userId</td> <td>String</td> <td>用户 ID，必填</td></tr> <tr><td>deptId</td> <td>String[]</td> <td>部门，群组，选填</td></tr> <tr><td>startDate</td> <td>Date</td> <td>消息创建开始日期，选填</td></tr> <tr><td>endDate</td> <td>Date</td> <td>消息创建结束日期，选填</td></tr> <tr><td>pageSize</td> <td>int</td> <td>选填</td></tr> <tr><td>pageNo</td> <td>int</td> <td>选填</td></tr></tbody></table> <h3 id="_3-11-定时任务"><a href="#_3-11-定时任务" class="header-anchor">#</a> 3.11 定时任务</h3> <p><img src="/vuepress-demo/assets/img/image-20200414134307239.646a0e0e.png" alt="image-20200414134307239"></p> <p>平台开发了 togest-schedule 模块来实现平台所有定时任务的需要，由定时任务服务统一执行定时。定时任务服务包括的功能：</p> <p>1)配置所有的定时任务</p> <p>2)可启动、停止、手动执行</p> <p>2)可查看历史运行的日志</p> <p><strong>配置界面：</strong></p> <p><img src="/vuepress-demo/assets/img/image-20200410162715500.ec193a41.png" alt="image-20200410162715500"></p> <p><img src="/vuepress-demo/assets/img/image-20200410162908917.546110a5.png" alt="image-20200410162908917"></p> <p><strong>运行日志：</strong></p> <p><img src="/vuepress-demo/assets/img/image-20200410163008667.07d56e86.png" alt="image-20200410163008667"></p> <h2 id="_4-编码规范"><a href="#_4-编码规范" class="header-anchor">#</a> 4.编码规范</h2> <h3 id="_4-1-命名风格"><a href="#_4-1-命名风格" class="header-anchor">#</a> 4.1 命名风格</h3> <ol><li><p>代码中的命名均不能以下划线或美元符号开始，也不能以下划线或美元符号结束。</p></li> <li><p>代码中的命名<strong>尽可能避免</strong>使用拼音与英文混合的方式，不允许直接使用中文的方式。</p></li></ol> <p>由于我们的业务经常会涉及接触网、变电或者其他铁路相关的设备名称，这些专业名称难以翻译，不推荐直接使用在线工具翻译，因为翻译后的英语单词不论正确与否，往往都不易于理解，对于这类情况，可以使用拼音或者缩写并加以注释。</p> <ol start="3"><li><p>类名使用 UpperCamelCase 风格，但以下情形例外：DO / BO / DTO / VO / AO / PO / UID 等。</p></li> <li><p>方法名、参数名、成员变量、局部变量都统一使用 lowerCamelCase 风格，必须遵从驼峰形式。</p></li> <li><p>常量命名全部大写，单词间用下划线隔开，力求语义表达完整清楚，不要嫌名字长。</p></li> <li><p>抽象类命名使用 Abstract 或 Base 开头；异常类命名使用 Exception 结尾；测试类命名以它要测试的类的名称开始，以 Test 结尾。</p></li> <li><p>数组声明方式请使用类型与中括号紧挨相连的方式，如 int[] intArray; 而不是 int intArray[];</p></li> <li><p>POJO 类中布尔类型的变量，都不要加 is 前缀，否则部分框架解析会引起序列化错误。</p></li></ol> <p>反例：定义为基本数据类型 Boolean isDeleted 的属性，它的方法会自动生成为 isDeleted()，RPC 框架(或者其他涉及读取、设置 Bean 属性的框架，比如 MyBatis)在反向解析的时候，“误以为”对应的属性名称是 deleted，导致属性获取不到，进而抛出异常。</p> <ol start="9"><li><p>包名统一使用小写，点分隔符之间有且仅有一个自然语义的英语单词。包名统一使用单数形式，但是类名如果有复数含义，类名可以使用复数形式。</p></li> <li><p>如果模块、接口、类、方法使用了设计模式，在命名时需体现出具体模式。 说明：将设计模式体现在名字中，有利于阅读者快速理解架构设计理念。</p></li> <li><p>接口类中的方法不要加任何修饰符号（public 也不要加），保持代码的简洁性，并加上有效的 Javadoc 注释。</p></li></ol> <p>Java interface 中方法默认即为 public，推荐在接口中对方法声明加上注释，而不是在实现类中。</p> <ol start="12"><li>对于 Service 和 DAO 类，基于 SOA 的理念，暴露出来的服务一定是接口，内部的实现类用 Impl 的后缀与接口区别。如果是形容能力的接口名称，取对应的形容词为接口名（通常是–able 的形式）。</li></ol> <p>比如说我们的自定义实体类想要使用 clone 方法，那么就必须实现 Cloneable 接口，这类接口往往只是起到了 Marker interface 的作用，而不需要实现具体方法。</p> <ol start="13"><li>枚举类名建议带上 Enum 后缀，枚举成员名称需要全大写，单词间用下划线隔开。</li></ol> <p>枚举其实就是特殊的类，由编译器保证单例，域成员均为常量，且构造方法被默认强制是私有。</p> <h3 id="_4-2-常量定义"><a href="#_4-2-常量定义" class="header-anchor">#</a> 4.2 常量定义</h3> <ol><li>不允许任何魔法值直接出现在代码中。</li></ol> <p>反例： String key = &quot;Togest*&quot; + equName;<br>
正例： String prefix = &quot;Togest*&quot;; String key = prefix + equName;</p> <ol start="2"><li>在 long 或者 Long 赋值时，数值后使用大写的 L，不能是小写的 l，小写容易跟数字 1 混淆，造成误解。</li></ol> <p>说明：Long a = 2l; 写的是数字的 21，还是 Long 型的 2?</p> <ol start="3"><li>不要使用一个常量类维护所有常量，要按常量功能进行归类，分开维护。</li></ol> <p>说明：大而全的常量类，杂乱无章，使用查找功能才能定位到修改的常量，不利于理解和维护。</p> <ol start="4"><li><p>如果变量值仅在一个固定范围内变化用 enum 类型来定义。</p></li> <li><p>不要定义<strong>不必要</strong>的常量。</p></li></ol> <p>当我们在 service 中处理业务逻辑时，比较常见的情景就是我们需要使用 equals 进行字符串判等，比如 &quot;test&quot;.equals(str);<br>
诸如&quot;test&quot;的这类字符串，不要遇到一个就在类中以静态常量方式声明一个，静态常量不参与垃圾回收。</p> <h3 id="_4-3-代码格式"><a href="#_4-3-代码格式" class="header-anchor">#</a> 4.3 代码格式</h3> <p>前六条都属于非常好保证的格式，如果短期内难以改正，可以在提交前进行 Reformat Code，或者勾选提交代码前自动进行 Reformat Code。
后面的几条需要由编码者来保证。</p> <ol><li><p>注意大括号的使用约定及换行习惯。</p></li> <li><p>留字与括号之间都必须加空格。</p></li> <li><p>任何二目、三目运算符的左右两边都需要加一个空格。 说明：运算符包括赋值运算符=、逻辑运算符&amp;&amp;、加减乘除符号等。</p></li> <li><p>采用 4 个空格缩进，禁止使用 tab 字符。</p></li></ol> <p>如果使用 tab 缩进，则必须设置 1 个 tab 为 4 个空格。</p> <ol start="5"><li><p>注释的双斜线与注释内容之间有且仅有一个空格。</p></li> <li><p>方法参数在定义和传入时，多个参数逗号后边必须加空格。</p></li> <li><p>IDE 的文件编码设置为 UTF-8; IDE 中文件的换行符使用 Unix 格式，不要使用 Windows 格式。</p></li> <li><p>没有必要增加若干空格来使某一行的字符与上一行对应位置的字符对齐。不同逻辑、不同语义、不同业务的代码之间插入一个空行分隔开来以提升可读性。</p></li> <li><p>合理使用括号，不要盲目依赖操作符优先级。</p></li></ol> <p>反例： 2 &lt;&lt; 7 - 2 _ 3<br>
大多数语言中位移预算的优先级都低于你的“直觉”认知。很多人误以为这个表达式相当于(2 &lt;&lt; 7) - (2 _ 3)，所以等于 250。然而实际上&lt;&lt;的优先级比加法+还要低，所以这表达式其实相当于 2 &lt;&lt; (7 - 2 * 3)，所以等于 4。</p> <p>不是要每个人去把操作符优先级表给硬背下来，而是合理的加入括号。比如上面的例子，最好直接加上括号写成 2 &lt;&lt; (7 - 2 * 3)。虽然没有括号也表示同样的意思，但是加上括号就更加清晰，读者不再需要死记&lt;&lt;的优先级就能理解代码。</p> <ol start="10"><li>永远不要省略花括号。</li></ol> <p>很多语言允许你在某种情况下省略掉花括号，比如 C，Java 都允许你在 if 语句里面只有一句话的时候省略掉花括号：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span>
  <span class="token function">action1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>咋一看少打了两个字，多好。可是这其实经常引起奇怪的问题。比如，你后来想要加一句话 action2()到这个 if 里面，于是你就把代码改成：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span>
  <span class="token function">action1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">action2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>为了美观，你很小心的使用了 action1()的缩进。咋一看它们是在一起的，所以你下意识里以为它们只会在 if 的条件为真的时候执行，然而 action2()却其实在 if 外面，它会被无条件的执行。<br>
理论上每个程序员都应该可以发现这个错误，然而实际上却容易被忽视。</p> <p>那么你问，谁会这么傻，我在加入 action2()的时候加上花括号不就行了？可是从设计的角度来看，这样其实并不是合理的作法。<br>
首先，也许你以后又想把 action2()去掉，这样你为了样式一致，又得把花括号拿掉，烦不烦啊？<br>
其次，这使得代码样式不一致，有的 if 有花括号，有的又没有。况且，你为什么需要记住这个规则？<br>
如果你不问三七二十一，只要是 if-else 语句，把花括号全都打上，就可以想都不用想了，就当 C 和 Java 没提供给你这个特殊写法。<br>
这样就可以保持完全的一致性，减少不必要的思考。由于花括号的存在，使得代码界限明确，让我的眼睛负担更小了。</p> <ol start="11"><li>if 中布尔表达式的处理。</li></ol> <p>IDE 的自动格式化之后可能产生这样的代码：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">someLongCondition1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token function">someLongCondition2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token function">someLongCondition3</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span>
 <span class="token function">someLongCondition4</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
 <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>由于 someLongCondition4()超过了行宽限制，被编辑器自动换到了下面一行。虽然满足了行宽限制，换行的位置却是相当任意的，它并不能帮助人理解这代码的逻辑。这几个 boolean 表达式，全都用&amp;&amp;连接，所以它们其实处于平等的地位。为了表达这一点，当需要折行的时候，你应该把每一个表达式都放到新的一行，就像这个样子：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">someLongCondition1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span>
   <span class="token function">someLongCondition2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span>
   <span class="token function">someLongCondition3</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span>
   <span class="token function">someLongCondition4</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
 <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>如果 if 中 boolean 表达式过长，也可以单独定义意义明确的 boolean 变量，力求含义清晰：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">boolean</span> success <span class="token operator">=</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>success<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>如果有更加直接，更加清晰的写法，就选择它，即使它看起来更长，更笨，也一样选择它。我们应该都知道&amp;&amp;、||具有短路特性。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># 当command1成功，才会执行command2，当command2成功，才会执行command3。</span>
command1 <span class="token operator">&amp;&amp;</span> command2 <span class="token operator">&amp;&amp;</span> command3
<span class="token comment"># 如果command1成功，那么command2和command3都不会被执行。如果command1失败，command2成功，那么command3就不会被执行。</span>
command1 <span class="token operator">||</span> command2 <span class="token operator">||</span> command3
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>但是如果 if 中出现这样的运算：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">action1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token function">action2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token function">action3</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>你看得出来这代码是想干什么吗？action2 和 action3 什么条件下执行，什么条件下不执行？<br>
也许稍微想一下，你知道它在干什么：“如果 action1 失败了，执行 action2，如果 action2 成功了，执行 action3”。<br>
然而那种语义，并不是直接的“映射”在这代码上面的。比如“失败”这个词，对应了代码里的哪一个字呢？你找不出来，因为它包含在了||的语义里面，你需要知道||的短路特性，以及逻辑或的语义才能知道这里面在说“如果 action1 失败……”。每一次看到这行代码，你都需要思考一下，这样积累起来的负荷，就会让人很累。</p> <p>其实，这种写法是滥用了逻辑操作&amp;&amp;和||的短路特性。这两个操作符可能不执行右边的表达式，原因是为了机器的执行效率，而不是为了给人提供这种“巧妙”的用法。</p> <p>这两个操作符的本意，只是作为逻辑操作，它们并不是拿来给你代替 if 语句的。也就是说，它们只是碰巧可以达到某些 if 语句的效果，但你不应该因此就用它来代替 if 语句。如果你这样做了，就会让代码晦涩难懂。</p> <p>上面的代码写成笨一点的办法，就会清晰很多：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">action1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">action2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">action3</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="_4-4-oop-规约"><a href="#_4-4-oop-规约" class="header-anchor">#</a> 4.4 OOP 规约</h3> <ol><li><p>避免通过一个类的对象引用访问此类的静态变量或静态方法，无谓增加编译器解析成本，直接用类名来访问即可。</p></li> <li><p>所有的覆写方法，必须加@Override 注解。</p></li> <li><p>相同参数类型，相同业务含义，才可以使用 Java 的可变参数，避免使用 Object。可变参数必须放置在参数列表的最后。</p></li> <li><p>不能使用过时的类或方法。</p></li></ol> <p>接口提供方既然明确是过时接口，那么有义务同时提供新的接口(JDK，或者我们使用的第三方框架中都是如此，我们自己的工具类也要能够做到)；作为调用方来说，有义务去考证过时方法的新实现是什么。</p> <ol start="5"><li><p>所有的局部变量使用基本数据类型。所有的 POJO 类属性必须使用包装数据类型。</p></li> <li><p>Object 的 equals 方法容易抛空指针异常，应使用常量或确定有值的对象来调用 equals。</p></li></ol> <p>正例：&quot;test&quot;.equals(object);<br>
反例：object.equals(&quot;test&quot;);</p> <ol start="7"><li>所有的相同类型的包装类对象之间值的比较，全部使用 equals 方法比较。</li></ol> <p>对于 Integer var = ? 在-128 至 127 范围内的赋值，Integer 对象是在 IntegerCache.cache 产生，会复用已有对象，这个区间内的 Integer 值可以直接使用==进行判断，但是这个区间之外的所有数据，都会在堆上产生，并不会复用已有对象，这是一个大坑，推荐使用 equals 方法进行判断。</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">Integer</span> a <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
<span class="token class-name">Integer</span> b <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>a <span class="token operator">==</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
<span class="token class-name">Integer</span> c <span class="token operator">=</span> <span class="token number">1000</span><span class="token punctuation">;</span>
<span class="token class-name">Integer</span> d <span class="token operator">=</span> <span class="token number">1000</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>c <span class="token operator">==</span> d<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>c<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>d<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><ol start="8"><li><p>定义 DO/DTO/VO 等 POJO 类时，不要设定任何属性默认值。</p></li> <li><p>禁止在 POJO 类中，同时存在对应属性 xxx 的 isXxx()和 getXxx()方法。</p></li></ol> <p>框架在调用属性 xxx 的提取方法时，并不能确定哪个方法一定是被优先调用到。</p> <ol start="10"><li><p>当一个类有多个构造方法，或者多个同名方法，这些方法应该按顺序放置在一起，便于阅读。</p></li> <li><p>内方法定义的顺序依次是：公有方法或保护方法 &gt; 私有方法 &gt; getter/setter 方法。</p></li></ol> <p>公有方法是类的调用者和维护者最关心的方法，首屏展示最好；保护方法虽然只是子类关心，也可能是“模板设计模式”下的核心方法；而私有方法外部一般不需要特别关心，是一个黑盒实现；因为承载的信息价值较低，所有 Service 和 DAO 的 getter/setter 方法放在类体最后。</p> <ol start="12"><li><p>setter 方法中，参数名称与类成员变量名称一致，this.成员名 = 参数名。在 getter/setter 方法中，不要增加业务逻辑，增加排查问题的难度。</p></li> <li><p>字符串拼接。</p></li></ol> <p>在一个方法体中，普通的字符串拼接可以不做处理，如 String str = str1 + str2 + str3; 在编译期会被优化为使用 StringBuilder 的 append 方法进行扩展。</p> <p>下例中循环中，反编译出的字节码文件显示每次循环都会 new 出一个 StringBuilder 对象，然后进行 append 操作，最后通过 toString 方法返回 String 对象，造成内存资源浪费。所以循环拼接字符串应该由编码者主动实例化、使用 StringBuilder。</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">String</span> str <span class="token operator">=</span> <span class="token string">&quot;start&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">100</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	str <span class="token operator">=</span> str <span class="token operator">+</span> <span class="token string">&quot;hello&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><ol start="14"><li>方法模块化。</li></ol> <p>避免写太长的方法。如果方法太长，应当拆分成几个更小的，通常一屏为 40-50 行，在此范围内最佳。<br>
提出工具方法。如果你仔细观察代码，就会发现其实里面有很多的重复。这些常用的代码，不管它有多短，提取出去做成方法，都可能是会有好处的。有些帮助方法也许就只有两行，然而它们却能大大简化主要方法里面的逻辑。<br>
每个方法只做一件简单的事情。</p> <p>根据系统是否为“MacOS”来做不同的事情。</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token string">&quot;MacOS&quot;</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token function">getOS</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">a</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token function">b</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function">c</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token string">&quot;MacOS&quot;</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token function">getOS</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">d</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token function">e</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>你可以看出这个方法里，其实只有 c()是两种系统共有的，而其它的 a(), b(), d(), e()都属于不同的分支。</p> <p>这种“复用”其实是有害的。如果一个方法可能做两种事情，它们之间共同点少于它们的不同点，那你最好就写两个不同的方法，否则这个方法的逻辑就不会很清晰，容易出现错误。其实，上面这个方法可以改写成两个方法：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">fooMacOS</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">a</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">c</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">d</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>


<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">fooOther</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">b</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">c</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">e</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>如果你发现两件事情大部分内容相同，只有少数不同，多半时候你可以把相同的部分提取出去，做成一个辅助方法。比如，如果你有个方法是这样：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">a</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">b</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token function">c</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token string">&quot;MacOS&quot;</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token function">getOS</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">d</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token function">e</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>其中 a()，b()，c()都是一样的，只有 d()和 e()根据系统有所不同。那么你可以把 a()，b()，c()提取出去，然后制造两个方法：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">preFoo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">a</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">b</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token function">c</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">fooMacOS</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">preFoo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">d</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">fooOther</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">preFoo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">e</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>这样一来，我们既共享了代码，又做到了每个方法只做一件简单的事情。这样的代码，逻辑就更加清晰。</p> <ol start="15"><li>考虑并发与线程安全问题。</li></ol> <p>在 service 或是其他由 Spring 管理的 Bean 中，对于涉及操作成员属性的逻辑一定要考虑并发，做好同步机制处理。</p> <ol start="16"><li>方法的参数检查。</li></ol> <p>我们实现一个方法，并对方法的入参进行非空，或者其他合法性检查后，再去进行业务逻辑操作，这种习惯称之为防御性编程。
这个习惯涉及两方面问题，第一，如果非空或者合法性检查失败了，我们要做怎么做；第二，我们实现的方法中如果调用了其他方法，那么返回值是否需要非空或者合法性检查。</p> <p>如果某个参数为空或者不合法，程序就无法完成逻辑，此时检查不通过应该主动上抛异常，来达到“快速失败”的目的，而不是 return 或者 return null;</p> <p>对于调用的方法，需要考虑方法的返回值可能为 null，防止 NPE 是调用者的责任。即使被调用方法返回空集合或者空对象，对调用者来说，也并非高枕无忧，必须考虑到调用失败、序列化失败、运行时异常等场景返回 null 的情况。</p> <h3 id="_4-5-集合使用"><a href="#_4-5-集合使用" class="header-anchor">#</a> 4.5 集合使用</h3> <ol><li>注意自定义实体类是否要重写 hashCode 和 equals</li></ol> <p>如果使用的集合涉及主动调用 contains、或者隐式调用(Set、作为 Map 的 Key)的地方，以及 Stream 容器调用 distinct 等操作，则自定义对象必须重写 equals，只要重写 equals，就必须重写 hashCode。</p> <ol start="2"><li>Comparator 实现类。</li></ol> <p>在 JDK7 版本及以上，Comparator 实现类要满足如下三个条件，不然 Arrays.sort，Collections.sort 会报 IllegalArgumentException 异常。
x，y 的比较结果和 y，x 的比较结果相反。x&gt;y，y&gt;z，则 x&gt;z。x=y，则 x，z 比较结果和 y，z 比较结果相同。</p> <ol start="3"><li>选择合适的数据结构，集合初始化时，指定集合初始值大小。</li></ol> <p>结合业务情况，考虑什么数据结构是最合适的，使用栈还是队列还是双向链表。如果业务上对于数据量范围比较清晰，则应当设置初始化大小，避免多次扩容带来的性能损失。</p> <ol start="4"><li>集合泛型定义时，在 JDK7 及以上，使用 diamond 语法或全省略。</li></ol> <p>diamond 即菱形泛型，直接使用&lt;&gt;来指代前边已经指定的类型，即类型推断。</p> <p>反例: <code>List&lt;String&gt; list = new ArrayList&lt;String&gt;(); Map&lt;String, String&gt; userCache = new HashMap&lt;String, String&gt;()</code>;<br>
正例: <code>List&lt;String&gt; list = new ArrayList&lt;&gt;(); Map&lt;String, String&gt; userCache = new HashMap&lt;&gt;()</code>;</p> <ol start="5"><li>不要把 null 放进“容器数据结构”里面。</li></ol> <p>所谓容器（collection），是指一些对象以某种方式集合在一起，所以 null 不应该被放进 Array，List，Set 等结构，不应该出现在 Map 的 key 或者 value 里面。把 null 放进容器里面，是一些莫名其妙错误的来源。因为对象在容器里的位置一般是动态决定的，所以一旦 null 从某个入口跑进去了，你就很难再搞明白它去了哪里，你就得被迫在所有从这个容器里取值的位置检查 null。你也很难知道到底是谁把它放进去的，代码多了就导致调试极其困难。</p> <ol start="6"><li>尽可能避免容器本身是 null。</li></ol> <p>比如某个方法声明返回一个 <code>List&lt;MyObject&gt;</code>，如果没有符合条件的返回值，不要返回 null，不要给调用者带来不必要的繁琐检查。<br>
这里也不要 return new ArrayList&lt;&gt;(); 每次实例化一个容器也会造成内存开销。
这里推荐 return Collections.emptyList(); 同理也可以 Collections.emptyMap();
这个方法返回的容器均为 Collections 类的一个静态内部类。</p> <ol start="7"><li>当我们只有一个对象需要放入容器时，使用 Collections.singletonList(T o)代替 Arrays.asList(T... a)；</li></ol> <p>因为我们的聚合服务没有提供单个对象聚合的接口，这种情况常见于我们想要为单个对象进行聚合，而非一个集合，此时使用 Collections.singletonList(T o)；去“包裹”你的对象。</p> <h3 id="_4-6-日志使用"><a href="#_4-6-日志使用" class="header-anchor">#</a> 4.6 日志使用</h3> <ol><li>日志中需要记录信息时，学会使用占位符的方式。</li></ol> <p>反例：logger.debug(&quot;Processing trade with id: &quot; + id + &quot; and symbol: &quot; + symbol);
正例：logger.debug(&quot;Processing trade with id: {} and symbol : {} &quot;, id, symbol);</p> <ol start="2"><li>日志记录异常信息时，使用正确的 api。</li></ol> <p>正例：logger.error(各类参数或者对象 toString() + &quot;_&quot; + e.getMessage(), e);</p> <p>即使用 error(String msg, Throwable t); 在日志中记录完整的异常堆栈信息，而不是只记录 e.getMessage()。</p> <h3 id="_4-7-异常处理"><a href="#_4-7-异常处理" class="header-anchor">#</a> 4.7 异常处理</h3> <ol><li><p>try 块中代码应当尽可能少。尽可能避免在循环中进行 try-cache。如果可以对各种异常做对应处理，就不要直接 catch (Exception e)。</p></li> <li><p>cache 块中如有可能，则可以进行再次尝试，如果需要上抛异常，尽可能表达出更多信息。</p></li></ol> <p>如 throw new IllegalArgumentException(e); 表达的信息要优于 throw new RuntimeException(e.getMessage());</p> <ol start="3"><li><p>捕获异常是为了处理它，不要捕获了却什么都不处理而抛弃之，如果不想处理它，请将该异常抛给它的调用者。最外层的业务使用者，必须处理异常，将其转化为用户可以理解的内容。</p></li> <li><p>有 try 块放到了事务代码中，catch 异常后，如果需要回滚事务，一定要注意手动回滚事务。</p></li> <li><p>finally 块必须对资源对象、流对象进行关闭，有异常也要做 try-catch。如果 JDK7 及以上，可以使用 try-with-resources 方式。</p></li> <li><p>不要在 finally 块中使用 return。finally 块中的 return 返回后方法结束执行，不会再执行 try 块中的 return 语句。</p></li></ol> <h3 id="_4-8-数据库"><a href="#_4-8-数据库" class="header-anchor">#</a> 4.8 数据库</h3> <h4 id="_4-8-1-建表规约"><a href="#_4-8-1-建表规约" class="header-anchor">#</a> 4.8.1 建表规约</h4> <ol><li>【强制】表达是与否概念的字段，必须使用 is_xxx 的方式命名，数据类型是 unsigned tinyint</li></ol> <p>（ 1 表示是，0 表示否）。</p> <p>说明：任何字段如果为非负数，必须是 unsigned。</p> <p>正例：表达逻辑删除的字段名 is_deleted，1 表示删除，0 表示未删除。</p> <ol start="2"><li>【强制】表名、字段名必须使用小写字母或数字，禁止出现数字开头，禁止两个下划线中间只出现数字。数据库字段名的修改代价很大，因为无法进行预发布，所以字段名称需要慎重考虑。</li></ol> <p>说明：MySQL 在 Windows 下不区分大小写，但在 Linux 下默认是区分大小写。因此，数据库名、表名、字段名，都不允许出现任何大写字母，避免节外生枝。</p> <p>正例：aliyun_admin，rdc_config，level3_name</p> <p>反例：AliyunAdmin，rdcConfig，level_3_name</p> <ol start="3"><li>【强制】表名不使用复数名词。</li></ol> <p>说明：表名应该仅仅表示表里面的实体内容，不应该表示实体数量，对应于 DO 类名也是单数</p> <p>形式，符合表达习惯。</p> <ol start="4"><li><p>【强制】禁用保留字，如 desc、range、match、delayed 等，请参考 MySQL 官方保留字。</p></li> <li><p>【强制】主键索引名为 pk<em>字段名；唯一索引名为 uk</em>字段名；普通索引名则为 idx_字段名。</p></li></ol> <p>说明：pk* 即 primary key；uk* 即 unique key；idx_ 即 index 的简称。</p> <ol start="6"><li>【强制】小数类型为 decimal，禁止使用 float 和 double。</li></ol> <p>说明：float 和 double 在存储的时候，存在精度损失的问题，很可能在值的比较时，得到不</p> <p>正确的结果。如果存储的数据范围超过 decimal 的范围，建议将数据拆成整数和小数分开存储。</p> <ol start="7"><li><p>【强制】如果存储的字符串长度几乎相等，使用 char 定长字符串类型。</p></li> <li><p>【强制】varchar 是可变长字符串，不预先分配存储空间，长度不要超过 5000，如果存储长</p></li></ol> <p>度大于此值，定义字段类型为 text，独立出来一张表，用主键来对应，避免影响其它字段索引效率。</p> <ol start="9"><li>【强制】表必备八字段：id, del_flag，create_date,create_by,update_date,update_by,delete_by,delete_date</li></ol> <ol start="10"><li>【推荐】表的命名最好是加上“业务名称_表的作用”。</li></ol> <p>正例：alipay_task / force_project / trade_config</p> <ol start="11"><li><p>【推荐】库名与应用名称尽量一致。</p></li> <li><p>【推荐】如果修改字段含义或对字段表示的状态追加时，需要及时更新字段注释。</p></li> <li><p>【推荐】字段允许适当冗余，以提高查询性能，但必须考虑数据一致。冗余字段应遵循：</p></li></ol> <p>1）不是频繁修改的字段。</p> <p>2）不是 varchar 超长字段，更不能是 text 字段。</p> <p>正例：商品类目名称使用频率高，字段长度短，名称基本一成不变，可在相关联的表中冗余存</p> <p>储类目名称，避免关联查询。</p> <ol start="14"><li>【推荐】单表行数超过 500 万行或者单表容量超过 2GB，才推荐进行分库分表。</li></ol> <p>说明：如果预计三年后的数据量根本达不到这个级别，请不要在创建表时就分库分表。</p> <ol start="15"><li>【参考】合适的字符存储长度，不但节约数据库表空间、节约索引存储，更重要的是提升检索速度。</li></ol> <p>正例：如下表，其中无符号值可以避免误存负数，且扩大了表示范围。</p> <p><img src="/vuepress-demo/assets/img/image-20200414144719786.f2936cae.png" alt="image-20200414144719786"></p> <p>16.【强制】主键统一使用 UUID，长度 varchar(32)。</p> <h4 id="_4-8-2-索引规约"><a href="#_4-8-2-索引规约" class="header-anchor">#</a> 4.8.2 索引规约</h4> <ol><li>【强制】业务上具有唯一特性的字段，即使是多个字段的组合，也必须建成唯一索引。</li></ol> <p>说明：不要以为唯一索引影响了 insert 速度，这个速度损耗可以忽略，但提高查找速度是明显的；另外，即使在应用层做了非常完善的校验控制，只要没有唯一索引，根据墨菲定律，必然有脏数据产生。</p> <ol start="2"><li>【强制】超过三个表禁止 join。需要 join 的字段，数据类型必须绝对一致；多表关联查询时，保证被关联的字段需要有索引。</li></ol> <p>说明：即使双表 join 也要注意表索引、SQL 性能。</p> <ol start="3"><li>【强制】在 varchar 字段上建立索引时，必须指定索引长度，没必要对全字段建立索引，根据实际文本区分度决定索引长度即可。</li></ol> <p>说明：索引的长度与区分度是一对矛盾体，一般对字符串类型数据，长度为 20 的索引，区分度会高达 90%以上，可以使用 count(distinct left(列名, 索引长度))/count(*)的区分度来确定。</p> <ol start="4"><li>【强制】页面搜索严禁左模糊或者全模糊。</li></ol> <p>说明：索引文件具有 B-Tree 的最左前缀匹配特性，如果左边的值未确定，那么无法使用此索引。</p> <ol start="5"><li>【推荐】如果有 order by 的场景，请注意利用索引的有序性。order by 最后的字段是组合索引的一部分，并且放在索引组合顺序的最后，避免出现 file_sort 的情况，影响查询性能。</li></ol> <p>正例：where a=? and b=? order by c; 索引：a_b_c</p> <p>反例：索引中有范围查找，那么索引有序性无法利用，如：WHERE a&gt;10 ORDER BY b; 索引 a_b 无法排序。</p> <ol start="6"><li>【推荐】利用覆盖索引来进行查询操作，避免回表。</li></ol> <p>说明：如果一本书需要知道第 11 章是什么标题，会翻开第 11 章对应的那一页吗？目录浏览</p> <p>一下就好，这个目录就是起到覆盖索引的作用。</p> <p>正例：能够建立索引的种类：主键索引、唯一索引、普通索引，而覆盖索引是一种查询的一种效果，用 explain 的结果，extra 列会出现：using index。</p> <ol start="7"><li>【推荐】利用延迟关联或者子查询优化超多分页场景。</li></ol> <p>说明：MySQL 并不是跳过 offset 行，而是取 offset+N 行，然后返回放弃前 offset 行，返回 N 行，那当 offset 特别大的时候，效率就非常的低下，要么控制返回的总页数，要么对超过特定阈值的页数进行 SQL 改写。</p> <p>正例：先快速定位需要获取的 id 段，然后再关联：</p> <p>SELECT a.* FROM 表 1 a, (select id from 表 1 where 条件 LIMIT 100000,20 ) b where a.id=b.id</p> <ol start="8"><li>【推荐】SQL 性能优化的目标：至少要达到 range 级别，要求是 ref 级别，如果可以是 consts 最好。</li></ol> <p>说明：</p> <p>1）consts 单表中最多只有一个匹配行（主键或者唯一索引），在优化阶段即可读取到数据。</p> <p>2）ref 指的是使用普通的索引（normal index）。</p> <p>3）range 对索引进行范围检索。</p> <p>反例：explain 表的结果，type=index，索引物理文件全扫描，速度非常慢，这个 index 级</p> <p>别比较 range 还低，与全表扫描是小巫见大巫。</p> <ol start="9"><li>【推荐】建组合索引的时候，区分度最高的在最左边。</li></ol> <p>正例：如果 where a=? and b=? ，a 列的几乎接近于唯一值，那么只需要单建 idx_a 索引即可。</p> <p>说明：存在非等号和等号混合判断条件时，在建索引时，请把等号条件的列前置。如：where a&gt;?</p> <p>and b=? 那么即使 a 的区分度更高，也必须把 b 放在索引的最前列。</p> <ol start="10"><li><p>【推荐】防止因字段类型不同造成的隐式转换，导致索引失效。</p></li> <li><p>【参考】创建索引时避免有如下极端误解：</p></li></ol> <p>1）宁滥勿缺。认为一个查询就需要建一个索引。</p> <p>2）宁缺勿滥。认为索引会消耗空间、严重拖慢更新和新增速度。</p> <p>3）抵制惟一索引。认为业务的惟一性一律需要在应用层通过“先查后插”方式解决。</p> <p>12 .【推荐】查询条件中少用 OR，OR 使用不了索引。尽量使用 union all 来替代</p> <h4 id="_4-8-3-sql"><a href="#_4-8-3-sql" class="header-anchor">#</a> 4.8.3 SQL</h4> <ol><li>【强制】不要使用 count(列名)或 count(常量)来替代 count(<em>)，count(</em>)是 SQL92 定义的标准统计行数的语法，跟数据库无关，跟 NULL 和非 NULL 无关。</li></ol> <p>说明：count(*)会统计值为 NULL 的行，而 count(列名)不会统计此列为 NULL 值的行。</p> <ol start="2"><li><p>【强制】count(distinct col) 计算该列除 NULL 之外的不重复行数，注意 count(distinct col1, col2) 如果其中一列全为 NULL，那么即使另一列有不同的值，也返回为 0。</p></li> <li><p>【强制】当某一列的值全是 NULL 时，count(col)的返回结果为 0，但 sum(col)的返回结果为 NULL，因此使用 sum()时需注意 NPE 问题。</p></li></ol> <p>正例：可以使用如下方式来避免 sum 的 NPE 问题：SELECT IF(ISNULL(SUM(g)),0,SUM(g))FROM table;</p> <ol start="4"><li>【强制】使用 ISNULL()来判断是否为 NULL 值。</li></ol> <p>说明：NULL 与任何值的直接比较都为 NULL。</p> <p>1） NULL&lt;&gt;NULL 的返回结果是 NULL，而不是 false。</p> <p>2） NULL=NULL 的返回结果是 NULL，而不是 true。</p> <p>3） NULL&lt;&gt;1 的返回结果是 NULL，而不是 true。</p> <ol start="5"><li><p>【强制】在代码中写分页查询逻辑时，若 count 为 0 应直接返回，避免执行后面的分页语句。</p></li> <li><p>【强制】不得使用外键与级联，一切外键概念必须在应用层解决。</p></li></ol> <p>说明：以学生和成绩的关系为例，学生表中的 student_id 是主键，那么成绩表中的 student_id 则为外键。如果更新学生表中的 student_id，同时触发成绩表中的 student_id 更新，即为级联更新。外键与级联更新适用于单机低并发，不适合分布式、高并发集群；级联更新是强阻塞，存在数据库更新风暴的风险；外键影响数据库的插入速度。</p> <ol start="7"><li><p>【强制】禁止使用存储过程，存储过程难以调试和扩展，更没有移植性。</p></li> <li><p>【强制】数据订正时，删除和修改记录时，要先 select，避免出现误删除，确认无误才能执 行更新语句。</p></li> <li><p>【推荐】in 操作能避免则避免，若实在避免不了，需要仔细评估 in 后边的集合元素数量，控制在 1000 个之内。</p></li> <li><p>【参考】如果有全球化需要，所有的字符存储与表示，均以 utf-8 编码，注意字符统计函数的区别。</p></li></ol> <p>说明：</p> <p>SELECT LENGTH(&quot;轻松工作&quot;)； 返回为 12</p> <p>SELECT CHARACTER_LENGTH(&quot;轻松工作&quot;)； 返回为 4</p> <p>如果需要存储表情，那么选择 utfmb4 来进行存储，注意它与 utf-8 编码的区别。</p> <ol start="11"><li>【参考】TRUNCATE TABLE 比 DELETE 速度快，且使用的系统和事务日志资源少，但 TRUNCATE</li></ol> <p>无事务且不触发 trigger，有可能造成事故，故不建议在开发代码中使用此语句。</p> <p>说明：TRUNCATE TABLE 在功能上与不带 WHERE 子句的 DELETE 语句相同。</p> <h4 id="_4-8-4-orm"><a href="#_4-8-4-orm" class="header-anchor">#</a> 4.8.4 ORM</h4> <ol><li>【强制】在表查询中，一律不要使用 * 作为查询的字段列表，需要哪些字段必须明确写明。</li></ol> <p>说明：1）增加查询分析器解析成本。2）增减字段容易与 resultMap 配置不一致。</p> <ol start="2"><li>【强制】POJO 类的布尔属性不能加 is，而数据库字段必须加 is_，要求在 resultMap 中进行</li></ol> <p>字段与属性之间的映射。</p> <p>说明：参见定义 POJO 类以及数据库字段定义规定，在<code>&lt;resultMap&gt;</code>中增加映射，是必须的。</p> <p>在 MyBatis Generator 生成的代码中，需要进行对应的修改。</p> <ol start="3"><li>【强制】不要用 resultClass 当返回参数，即使所有类属性名与数据库字段一一对应，也需
要定义；反过来，每一个表也必然有一个与之对应。</li></ol> <p>说明：配置映射关系，使字段与 DO 类解耦，方便维护。</p> <ol start="4"><li><p>【强制】sql.xml 配置参数使用：#{}，#param# 不要使用${} 此种方式容易出现 SQL 注入。</p></li> <li><p>【强制】不允许直接拿 HashMap 与 Hashtable 作为查询结果集的输出。
说明：resultClass=”Hashtable”，会置入字段名和属性值，但是值的类型不可控。</p></li> <li><p>【强制】更新数据表记录时，必须同时更新记录对应的 update_date 字段值为当前时间、update_by 当前删除人。删除操作，必须同时更新 del_flag、delete_by、delete_date。创建操作，必须同时记录 create_date、create_by。</p></li> <li><p>【推荐】不要写一个大而全的数据更新接口。传入为 POJO 类，不管是不是自己的目标更新字段，都进行 update table set c1=value1,c2=value2,c3=value3; 这是不对的。执行 SQL 时，不要更新无改动的字段，一是易出错；二是效率低；三是增加 binlog 存储。</p></li> <li><p>【推荐】不要写一个大而全的查询接口。传入为 POJO 类，不管是不是自己的查询条件，里面全部做 if 判断，来添加条件。应该按照具体的业务具体分析，抽出业务独立的接口。</p></li> <li><p>【参考】@Transactional 事务不要滥用。事务会影响数据库的 QPS，另外使用事务的地方需要考虑各方面的回滚方案，包括缓存回滚、搜索引擎回滚、消息补偿、统计修正等。</p></li> <li><p>【参考】<code>&lt;isEqual&gt;</code>中的 compareValue 是与属性值对比的常量，一般是数字，表示相等时带上此条件；<code>&lt;isNotEmpty&gt;</code>表示不为空且不为 null 时执行；<code>&lt;isNotNull&gt;</code>表示不为 null 值时执行。</p></li></ol></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/kromaLee/vuepress-demo/edit/master/docs/data-service/sc.md" target="_blank" rel="noopener noreferrer">帮助我们改善此页面！</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">最后更新于 :</span> <span class="time">5/11/2020, 9:39:35 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/vuepress-demo/data-service/" class="prev router-link-active">
        后端文档
      </a></span> <!----></p></div> </main></div><div class="global-ui"><!----><!----><div class="reading-progress top" data-v-7681808f><div class="progress" data-v-7681808f></div></div></div></div>
    <script src="/vuepress-demo/assets/js/app.6ff1fa3b.js" defer></script><script src="/vuepress-demo/assets/js/6.152a5810.js" defer></script><script src="/vuepress-demo/assets/js/4.6682682e.js" defer></script><script src="/vuepress-demo/assets/js/14.e8e09540.js" defer></script>
  </body>
</html>
